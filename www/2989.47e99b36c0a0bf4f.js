"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2989],{2989:(R,v,o)=>{o.r(v),o.d(v,{EditFacilityInformationPage:()=>K});var g=o(467),l=o(9893),F=o(177),d=o(9417),m=o(3719),P=o(9631),I=o(450),t=o(4438),s=o(9934),u=o(8023),C=o(600),T=o(3629),D=o(9012),b=o(8135);function O(n,c){1&n&&(t.j41(0,"ion-text",23),t.EFF(1,"Modify Facility"),t.k0s())}function k(n,c){1&n&&(t.j41(0,"ion-text",23),t.EFF(1,"Add Facility"),t.k0s())}function S(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function N(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function A(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function B(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function j(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function U(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function L(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function x(n,c){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"This field is Required"),t.k0s())}function W(n,c){if(1&n){const h=t.RV6();t.j41(0,"ion-button",21),t.bIt("click",function(){t.eBV(h);const e=t.XpG();return t.Njj(e.confirmAlert())}),t.EFF(1," Delete "),t.k0s()}if(2&n){const h=t.XpG();t.Y8G("disabled",h.disableSaveButton)}}let K=(()=>{var n;class c{constructor(i,e,r,a,f,_,M,G,w){var p,y,E;this.utilityService=i,this.httpService=e,this.platform=r,this.storageService=a,this.router=f,this.route=_,this.alertController=M,this.navController=G,this.pageNavService=w,this.location={name:"",pincode:"",area:"",city:"",latitude:"",longitude:""},this.createFacilityPayload={type:"",name:"",phone:"",extraDetails:"",description:"",location:{name:"",pincode:"",area:"",city:"",latitude:"",longitude:""},active:!0},this.isFacilityEdit=!1,this.actionToPerform="Add",this.isEditHide=!0,this.disableSaveButton=!1,this.facilityName=null===(p=this.router.getCurrentNavigation())||void 0===p||null===(p=p.extras.state)||void 0===p?void 0:p.name,this.type=this.facilityName,this.pageTitle=null===(y=this.router.getCurrentNavigation())||void 0===y||null===(y=y.extras.state)||void 0===y?void 0:y.pageTitle,this.editFacilityPayload=null===(E=this.router.getCurrentNavigation())||void 0===E||null===(E=E.extras.state)||void 0===E?void 0:E.facility,this.editFacilityPayload&&(this.isFacilityEdit=!0,this.name=this.editFacilityPayload.name,this.phone=this.editFacilityPayload.phone,this.active=this.editFacilityPayload.active,this.location=this.editFacilityPayload.location)}ionViewWillEnter(){const i={state:{pageTitle:this.pageTitle,name:this.facilityName}};this.pageNavService.setupBackButton([{route:"/edit-facility-information-page",handler:()=>this.router.navigate(["facility-information"],i)},{route:"/home/edit-facility-information",handler:()=>this.router.navigate(["/home/facility-information"],i)}])}validateFacilityInformation(){}getRequestJSONObject(){return{type:this.type,name:this.name,phone:this.phone,extraDetails:this.extraDetails,description:this.description,location:this.location,active:!this.active||this.active}}getRequestJSONObjectEdit(){return{type:this.type,name:this.name,phone:this.phone,extraDetails:this.extraDetails,description:this.description,location:this.location,active:!this.active||this.active}}validate(){var i=this;return(0,g.A)(function*(){i.name?i.location.name?i.location.pincode?i.location.area?i.location.city?i.phone?yield i.addFacility():i.utilityService.presentAlert("Error","Please enter Facility Phone No."):i.utilityService.presentAlert("Error","Please enter Facility Location City"):i.utilityService.presentAlert("Error","Please enter Facility Location Area"):i.utilityService.presentAlert("Error","Please enter Facility Location PIN Code"):i.utilityService.presentAlert("Error","Please enter Facility Location Name"):i.utilityService.presentAlert("Error","Please enter Facility Name")})()}addFacility(){var i=this;return(0,g.A)(function*(){i.disableSaveButton=!0;const r=i.getRequestJSONObject(),a=i.getRequestJSONObjectEdit();if(i.isFacilityEdit){const f="/facilityInformation/"+i.editFacilityPayload._id;yield i.httpService.putInBackground(f,a,!0).then(_=>{null!=_?i.router.navigate(["/home/facility-information"],{state:{name:i.facilityName,title:i.pageTitle}}):i.utilityService.presentAlert("Try Again","Facility Not updated successfully.")}).catch(_=>{i.disableSaveButton=!1,i.utilityService.presentAlert("Error!",_.message)})}else yield i.httpService.postInBackground("/facilityInformation",r,!0).then(f=>{null!=f?i.router.navigate(["/home/facility-information"],{state:{pageTitle:i.pageTitle,name:i.facilityName}}):i.utilityService.presentAlert("Try Again","Facility not added.")}).catch(f=>{i.disableSaveButton=!1,i.utilityService.presentAlert("Error!",f.message)})})()}confirmAlert(){var i=this;return(0,g.A)(function*(){yield(yield i.alertController.create({header:"Warning!",message:"Are you sure want to delete facility?",cssClass:"delete-facility-alert",buttons:[{text:"Close",role:"cancel",cssClass:"dark",handler:r=>{}},{text:"Delete",handler:()=>{i.deleteFacility()}}]})).present()})()}deleteFacility(){var i=this;return(0,g.A)(function*(){const e="/facilityInformation/"+i.editFacilityPayload._id;yield i.httpService.delete(e).then(r=>{i.router.navigate(["/home/facility-information"],{state:{name:i.facilityName,title:i.pageTitle}}),i.utilityService.presentToast("Facility deleted successfully.",1e3)}).catch(r=>{i.utilityService.presentAlert("Deletion Failed",r.message)})})()}ngOnInit(){}ngOnDestroy(){this.pageNavService.cleanup()}}return(n=c).\u0275fac=function(i){return new(i||n)(t.rXU(s.Q),t.rXU(u.k),t.rXU(C.OD),t.rXU(T.n),t.rXU(D.Ix),t.rXU(D.nX),t.rXU(l.hG),t.rXU(C.q9),t.rXU(b.V))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-edit-facility-information"]],standalone:!0,features:[t.aNF],decls:63,vars:22,consts:[[1,"primaryDark"],["slot","start"],["defaultHref","hospital-list","icon","chevron-back-outline"],[1,"titleHeader"],["class","titleText",4,"ngIf"],[1,"rowEqualDistribution"],["no-padding",""],["no-padding","","justify-content-start","","align-items-start",""],["ion-item","","no-lines","","no-padding","","text-center","","col-2","",1,"text-body-sm",2,"font-weight","500"],["hideRequiredMarker","",1,"display-full-width"],["matInput","","name","facilityName","autocomplete","off","placeholder","Facility Name","required","",3,"ngModelChange","ngModel"],[4,"ngIf"],["matInput","","name","locationName","autocomplete","off","placeholder","Location Name","required","",3,"ngModelChange","ngModel"],["matInput","","type","tel","maxlength","6","minlength","6","name","locationPin","autocomplete","off","placeholder","PIN Code","required","",3,"ngModelChange","ngModel"],["matInput","","name","locationArea","autocomplete","off","placeholder","Area","required","",3,"ngModelChange","ngModel"],["matInput","","name","locationCity","autocomplete","off","placeholder","City","required","",3,"ngModelChange","ngModel"],["matInput","","name","locationLat","autocomplete","off","placeholder","Latitude","required","",3,"ngModelChange","ngModel"],["matInput","","name","locationLong","autocomplete","off","placeholder","Longitude","required","",3,"ngModelChange","ngModel"],["matInput","","type","tel","maxlength","10","minlength","10","name","contactNumber","autocomplete","off","placeholder","Contact Number","required","",3,"ngModelChange","ngModel"],["name","active",3,"ngModelChange","ngModel"],["padding-top","","no-border","","align","center"],["margin-bottom","","translucent","",1,"button-secondary","button-size",3,"click","disabled"],["margin-bottom","","class","button-secondary button-size","translucent","",3,"disabled","click",4,"ngIf"],[1,"titleText"]],template:function(i,e){1&i&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title",3),t.DNE(5,O,2,0,"ion-text",4)(6,k,2,0,"ion-text",4),t.k0s()()(),t.j41(7,"ion-content")(8,"form")(9,"ion-grid")(10,"ion-row",5)(11,"ion-grid",6)(12,"ion-row",7)(13,"ion-col",8),t.EFF(14),t.k0s()()()(),t.j41(15,"ion-row",5)(16,"ion-col")(17,"mat-form-field",9)(18,"input",10),t.mxI("ngModelChange",function(a){return t.DH7(e.name,a)||(e.name=a),a}),t.k0s(),t.DNE(19,S,2,0,"mat-error",11),t.k0s()()(),t.j41(20,"ion-row")(21,"ion-col")(22,"mat-form-field",9)(23,"input",12),t.mxI("ngModelChange",function(a){return t.DH7(e.location.name,a)||(e.location.name=a),a}),t.k0s(),t.DNE(24,N,2,0,"mat-error",11),t.k0s()()(),t.j41(25,"ion-row")(26,"ion-col")(27,"mat-form-field",9)(28,"input",13),t.mxI("ngModelChange",function(a){return t.DH7(e.location.pincode,a)||(e.location.pincode=a),a}),t.k0s(),t.DNE(29,A,2,0,"mat-error",11),t.k0s()()(),t.j41(30,"ion-row")(31,"ion-col")(32,"mat-form-field",9)(33,"input",14),t.mxI("ngModelChange",function(a){return t.DH7(e.location.area,a)||(e.location.area=a),a}),t.k0s(),t.DNE(34,B,2,0,"mat-error",11),t.k0s()()(),t.j41(35,"ion-row")(36,"ion-col")(37,"mat-form-field",9)(38,"input",15),t.mxI("ngModelChange",function(a){return t.DH7(e.location.city,a)||(e.location.city=a),a}),t.k0s(),t.DNE(39,j,2,0,"mat-error",11),t.k0s()()(),t.j41(40,"ion-row")(41,"ion-col")(42,"mat-form-field",9)(43,"input",16),t.mxI("ngModelChange",function(a){return t.DH7(e.location.latitude,a)||(e.location.latitude=a),a}),t.k0s(),t.DNE(44,U,2,0,"mat-error",11),t.k0s()()(),t.j41(45,"ion-row")(46,"ion-col")(47,"mat-form-field",9)(48,"input",17),t.mxI("ngModelChange",function(a){return t.DH7(e.location.longitude,a)||(e.location.longitude=a),a}),t.k0s(),t.DNE(49,L,2,0,"mat-error",11),t.k0s()()(),t.j41(50,"ion-row")(51,"ion-col")(52,"mat-form-field",9)(53,"input",18),t.mxI("ngModelChange",function(a){return t.DH7(e.phone,a)||(e.phone=a),a}),t.k0s(),t.DNE(54,x,2,0,"mat-error",11),t.k0s()()(),t.j41(55,"ion-row")(56,"ion-col")(57,"mat-slide-toggle",19),t.mxI("ngModelChange",function(a){return t.DH7(e.active,a)||(e.active=a),a}),t.k0s(),t.EFF(58," Active "),t.k0s()()()()(),t.j41(59,"ion-footer",20)(60,"ion-button",21),t.bIt("click",function(){return e.validate()}),t.EFF(61," Save "),t.k0s(),t.DNE(62,W,2,1,"ion-button",22),t.k0s()),2&i&&(t.R7$(5),t.Y8G("ngIf",e.isFacilityEdit),t.R7$(),t.Y8G("ngIf",!e.isFacilityEdit),t.R7$(8),t.SpI(" ",e.type," "),t.R7$(4),t.R50("ngModel",e.name),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.name),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.pincode),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.area),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.city),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.latitude),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.location.longitude),t.R7$(),t.Y8G("ngIf",!0),t.R7$(4),t.R50("ngModel",e.phone),t.R7$(),t.Y8G("ngIf",!0),t.R7$(3),t.R50("ngModel",e.active),t.R7$(3),t.Y8G("disabled",e.disableSaveButton),t.R7$(2),t.Y8G("ngIf",e.isFacilityEdit))},dependencies:[l.bv,l.Jm,l.QW,l.hU,l.W9,l.M0,l.lO,l.eU,l.ln,l.IO,l.BC,l.ai,l.el,F.bT,d.YN,d.qT,d.me,d.BC,d.cb,d.YS,d.xh,d.tU,d.vS,d.cV,m.rl,P.fg,m.TL,I.sG],styles:[".display-full-width[_ngcontent-%COMP%]{width:100%;padding-top:3%}small[_ngcontent-%COMP%]{position:relative;margin:auto}.button-size[_ngcontent-%COMP%]{width:180px;margin-bottom:22px}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:auto}.radio-button[_ngcontent-%COMP%]{padding:5% .5% .5%;margin-right:3%}ion-avatar[_ngcontent-%COMP%]{width:120px;height:120px;margin:auto}.profile-icon[_ngcontent-%COMP%]{color:#ccc;width:120px;height:120px}.delete-facility-alert[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{color:#000!important;font-weight:500}"]}),c})()},8135:(R,v,o)=>{o.d(v,{V:()=>d});var g=o(4438),l=o(600),F=o(9012);let d=(()=>{var m;class P{constructor(t,s){this.platform=t,this.router=s,this.activeSubscriptions=new Map}setupBackButton(t,s){Array.isArray(t)?t.forEach(u=>{this.setupSingleBackButton(u.route,u.handler)}):"string"==typeof t&&s&&this.setupSingleBackButton(t,s)}setupSingleBackButton(t,s){this.cleanupBackButton(t);const u=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===t&&s()});this.activeSubscriptions.set(t,u)}cleanupBackButton(t){const s=this.activeSubscriptions.get(t);s&&(s.unsubscribe(),this.activeSubscriptions.delete(t))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((t,s)=>{t.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(t="/home"){window.history.length>1?window.history.back():this.router.navigate([t])}smartNavigateBack(t){const u={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[t];u?this.router.navigate([u]):this.navigateBack()}}return(m=P).\u0275fac=function(t){return new(t||m)(g.KVO(l.OD),g.KVO(F.Ix))},m.\u0275prov=g.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),P})()}}]);