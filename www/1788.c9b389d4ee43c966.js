"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1788],{1788:(f,_,r)=>{r.r(_),r.d(_,{ServiceRequestsPage:()=>I});var v=r(467),l=r(9012),d=r(9893),p=r(177),e=r(4438),m=r(3629),P=r(8023),t=r(600),i=r(9934),g=r(7031),y=r(8251),q=r(8135);function b(s,u){1&s&&(e.j41(0,"div",11),e.nrm(1,"ion-icon",12),e.j41(2,"h2"),e.EFF(3,"No Service Requests"),e.k0s(),e.j41(4,"p"),e.EFF(5,"You don't have any open service requests at the moment"),e.k0s()())}function E(s,u){if(1&s){const a=e.RV6();e.j41(0,"div")(1,"div",17)(2,"div",18),e.nrm(3,"ion-icon",19),e.EFF(4," Open "),e.k0s(),e.j41(5,"div",20),e.nrm(6,"ion-icon",21),e.EFF(7),e.k0s()(),e.j41(8,"div",22)(9,"h3",23),e.EFF(10),e.k0s(),e.j41(11,"div",24),e.nrm(12,"ion-icon",25),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",26),e.nrm(16,"ion-icon",27),e.j41(17,"p"),e.EFF(18,"We are reviewing your request and will respond shortly"),e.k0s()()(),e.j41(19,"div",28)(20,"ion-button",29),e.bIt("click",function(){e.eBV(a);const o=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.deleteIssue(o))}),e.nrm(21,"ion-icon",30),e.EFF(22," Cancel Request "),e.k0s()()()}if(2&s){const a=e.XpG().$implicit,n=e.XpG(2);e.R7$(7),e.SpI(" ",n.toDBdateFormat(a.reportedDate)," "),e.R7$(3),e.JRh(a.issueDescription),e.R7$(4),e.SpI("Reported at ",n.getTime(a.reportedDate),"")}}function x(s,u){if(1&s&&(e.j41(0,"div",15),e.DNE(1,E,23,3,"div",16),e.k0s()),2&s){const a=u.$implicit;e.R7$(),e.Y8G("ngIf","OPEN"==a.status)}}function S(s,u){if(1&s&&(e.j41(0,"div",13),e.DNE(1,x,2,1,"div",14),e.k0s()),2&s){const a=e.XpG();e.R7$(),e.Y8G("ngForOf",a.reportedIssues)}}let I=(()=>{var s;class u{constructor(n,o,c,O,M,h,C,D){this.router=n,this.storageService=o,this.httpService=c,this.platform=O,this.utilityService=M,this.dateService=h,this.navService=C,this.pageNavService=D,this.reportedIssues=[],this.navService.pageChange("Support"),this.user=this.storageService.get("user")}deleteIssue(n){this.httpService.deleteInBackground("/customerReportedIssue/"+n._id,!0).then(c=>{this.getReportedIssues()}).catch(c=>{this.utilityService.presentAlert("Error!",c.message)})}getReportedIssues(){var n=this;return(0,v.A)(function*(){n.httpService.getInBackground("/customerReportedIssue/?userId="+n.user.id,!0).then(c=>{n.reportedIssues=c}).catch(c=>{})})()}toDBdateFormat(n){return this.dateService.toDBdateFormat(new Date(n))}getTime(n){try{const o=new Date(n);if(isNaN(o.getTime()))throw new Error("Invalid date input");const c=o.getHours(),O=o.getMinutes().toString().padStart(2,"0"),M=c<12?"AM":"PM";return`${(c%12||12).toString().padStart(2,"0")}:${O} ${M}`}catch{return"Invalid time format"}}ionViewWillEnter(){this.navService.pageChange("Support"),this.user=this.storageService.get("user"),this.getReportedIssues(),this.pageNavService.setupBackButton([{route:"/service-requests",handler:()=>this.router.navigate(["home"])},{route:"/home/service-requests",handler:()=>this.router.navigate(["/home"])}])}ngOnDestroy(){this.pageNavService.cleanup()}}return(s=u).\u0275fac=function(n){return new(n||s)(e.rXU(l.Ix),e.rXU(m.n),e.rXU(P.k),e.rXU(t.OD),e.rXU(i.Q),e.rXU(g.k),e.rXU(y.o),e.rXU(q.V))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-service-requests"]],standalone:!0,features:[e.aNF],decls:16,vars:2,consts:[[1,"service-requests"],[1,"container"],[1,"header"],[1,"title-section"],[1,"subtitle"],["fill","solid","routerLink","/home/new-service-request",1,"new-request-btn"],["name","add-outline","slot","start"],[1,"desktop-text"],[1,"mobile-text"],["class","empty-state",4,"ngIf"],["class","requests-list",4,"ngIf"],[1,"empty-state"],["name","document-text-outline",1,"empty-icon"],[1,"requests-list"],["class","request-card",4,"ngFor","ngForOf"],[1,"request-card"],[4,"ngIf"],[1,"card-header"],[1,"status-badge","status-open"],["name","ellipse",1,"status-dot"],[1,"card-date"],["name","calendar-outline"],[1,"card-body"],[1,"issue-title"],[1,"timestamp"],["name","time-outline"],[1,"status-message"],["name","information-circle-outline"],[1,"card-actions"],["fill","clear","color","danger",3,"click"],["name","close-circle-outline","slot","start"]],template:function(n,o){1&n&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"h1"),e.EFF(5,"Service Requests"),e.k0s(),e.j41(6,"p",4),e.EFF(7,"Manage your support requests"),e.k0s()(),e.j41(8,"ion-button",5),e.nrm(9,"ion-icon",6),e.j41(10,"span",7),e.EFF(11,"New Request"),e.k0s(),e.j41(12,"span",8),e.EFF(13,"New"),e.k0s()()(),e.DNE(14,b,6,0,"div",9)(15,S,2,1,"div",10),e.k0s()()),2&n&&(e.R7$(14),e.Y8G("ngIf",0==o.reportedIssues.length),e.R7$(),e.Y8G("ngIf",o.reportedIssues.length>0))},dependencies:[d.bv,d.Jm,d.W9,d.iq,d.N7,p.bT,l.Wk,p.pM],styles:[".service-requests[_ngcontent-%COMP%]{--padding-top: var(--mc-spacing-2xl);--padding-bottom: var(--mc-spacing-2xl)}.service-requests[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:0 var(--mc-spacing-xl)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--mc-spacing-2xl);gap:var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{flex:1}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-lg);font-weight:600;color:var(--color-gray-900);margin:0 0 var(--mc-spacing-xs) 0}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-md);color:var(--color-gray-600);margin:0;font-weight:400}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]{--background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary-700));--color: var(--color-white);--border-radius: var(--radius-md);--padding-top: var(--spacing-3);--padding-bottom: var(--spacing-3);--padding-start: var(--spacing-4);--padding-end: var(--spacing-4);--box-shadow: var(--shadow-sm);font-weight:600;flex-shrink:0}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]:hover{--background: linear-gradient(90deg, var(--color-primary-700), var(--color-primary-800))}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]   .mobile-text[_ngcontent-%COMP%]{display:none}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center;background:var(--color-white);border-radius:var(--radius-lg);padding:var(--spacing-6);box-shadow:var(--shadow-sm)}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--color-gray-400);margin-bottom:var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--spacing-2) 0;font-size:var(--font-heading-md);font-weight:600;color:var(--color-gray-700)}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-body-md);color:var(--color-gray-600);max-width:400px}.service-requests[_ngcontent-%COMP%]   .requests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]{background:var(--color-white);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-4) var(--spacing-5);border-bottom:1px solid var(--color-gray-100);background:var(--color-gray-50)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-2);padding:var(--spacing-1) var(--spacing-3);border-radius:var(--radius-full);font-size:var(--font-body-sm);font-weight:600}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-badge.status-open[_ngcontent-%COMP%]{background:var(--mc-color-primary-100);color:var(--mc-color-primary-700)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-badge.status-open[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{font-size:8px}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);color:var(--color-gray-600);font-size:var(--font-body-sm)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-date[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--font-body-md)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:var(--spacing-4) var(--spacing-5)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .issue-title[_ngcontent-%COMP%]{margin:0 0 var(--spacing-3) 0;font-size:var(--font-heading-sm);font-weight:600;color:var(--mc-text-primary);line-height:1.5}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);color:var(--color-gray-600);font-size:var(--font-body-sm);margin-bottom:var(--spacing-3)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--font-body-md);color:var(--mc-color-primary-500)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--spacing-2);background:var(--mc-color-primary-50);padding:var(--spacing-3);border-radius:var(--radius-md);border-left:3px solid var(--mc-color-primary-500)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--mc-color-primary-500);font-size:var(--font-heading-sm);flex-shrink:0;margin-top:2px}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-body-sm);color:var(--color-gray-700);line-height:1.5}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:var(--spacing-3) var(--spacing-5);border-top:1px solid var(--color-gray-100);background:var(--color-gray-50)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--mc-color-error-500);font-weight:500}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--color: var(--mc-color-error-600)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.service-requests[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-md)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--spacing-3)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]{width:100%}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]   .desktop-text[_ngcontent-%COMP%]{display:none}.service-requests[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .new-request-btn[_ngcontent-%COMP%]   .mobile-text[_ngcontent-%COMP%]{display:inline}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-2);padding:var(--spacing-3) var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .issue-title[_ngcontent-%COMP%]{font-size:var(--font-body-lg)}.service-requests[_ngcontent-%COMP%]   .request-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:var(--spacing-2) var(--spacing-4)}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:var(--spacing-5);min-height:300px}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--font-heading-sm)}.service-requests[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}}"]}),u})()},8135:(f,_,r)=>{r.d(_,{V:()=>p});var v=r(4438),l=r(600),d=r(9012);let p=(()=>{var e;class m{constructor(t,i){this.platform=t,this.router=i,this.activeSubscriptions=new Map}setupBackButton(t,i){Array.isArray(t)?t.forEach(g=>{this.setupSingleBackButton(g.route,g.handler)}):"string"==typeof t&&i&&this.setupSingleBackButton(t,i)}setupSingleBackButton(t,i){this.cleanupBackButton(t);const g=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===t&&i()});this.activeSubscriptions.set(t,g)}cleanupBackButton(t){const i=this.activeSubscriptions.get(t);i&&(i.unsubscribe(),this.activeSubscriptions.delete(t))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((t,i)=>{t.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(t="/home"){window.history.length>1?window.history.back():this.router.navigate([t])}smartNavigateBack(t){const g={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[t];g?this.router.navigate([g]):this.navigateBack()}}return(e=m).\u0275fac=function(t){return new(t||e)(v.KVO(l.OD),v.KVO(d.Ix))},e.\u0275prov=v.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),m})()}}]);