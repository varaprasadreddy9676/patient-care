"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9742],{9742:(k,M,l)=>{l.r(M),l.d(M,{BillDetailsPage:()=>H});var u=l(467),C=l(9893),y=l(177),f=l(2739),_=l(5083),O=l(4726),w=l(8176),t=l(4438),m=l(9012),v=l(3629),B=l(8023),I=l(600),F=l(9934),S=l(7793);let E=(()=>{var a;class c{constructor(i,e,r,o){this.utilityService=i,this.httpService=e,this.storageService=r,this.paymentGatewayService=o,this.paymentType=3,this.user=this.storageService.get("user")}makePayment(i,e,r){var o,g;this.bill=i;let s=i;if(s.paymentDetails&&s.paymentDetails.upi&&(this.paymentType=s.paymentDetails.gatewayKey?3:1),s.paymentDetails&&s.paymentDetails.gatewayKey&&(this.paymentType=s.paymentDetails.upi?3:2),this.successCallbackFun=e,i.paymentDetail&&null==i.paymentDetails.gatewayKey&&null==i.paymentDetails.upi)return void this.utilityService.presentAlert("Missing Payment Gateway Details","Payment gateway details are not configured for this hospital.");const p={paymentGatewayKey:null===(o=i.paymentDetails)||void 0===o?void 0:o.gatewayKey,orderId:null===(g=i.billPayload)||void 0===g?void 0:g.billId,payerEmail:this.user.email?this.user.email:null,payerName:this.user.firstName+" "+this.user.lastName,payerPhoneNumber:this.user.phone,appName:"medics",amount:i.billPayload.price,description:i.billPayload.chargeName,upi:i.paymentDetails.upi?i.paymentDetails.upi:{name:"",id:""},paymentType:this.paymentType};this.paymentGatewayService.makePayment(p,b=>{this.bill.billPayload.paymentTransactionNo=b.razorpay_payment_id?b.razorpay_payment_id:"",this.bill.billPayload.paymentDetails=b,this.bill.billPayload.phone=this.user.phone,this.user.email&&(this.bill.billPayload.email=this.user.email),this.httpService.postInBackground("/bill/confirmPayment",this.bill.billPayload,!0).then(x=>{x||this.utilityService.presentAlert("Bill not confirmed.","Your bill is not confirmed due to some technical issue. Please contact the hospital with your payment details."),this.successCallbackFun(this.bill)}).catch(x=>{this.utilityService.presentAlert("Bill not confirmed.","Your bill is not confirmed due to some technical issue. Please contact the hospital with your payment details.")})},b=>{this.utilityService.presentAlert("Payment Failed","Your payment against the bill has failed. Please try again.")})}}return(a=c).\u0275fac=function(i){return new(i||a)(t.KVO(F.Q),t.KVO(B.k),t.KVO(v.n),t.KVO(S.W))},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();var j=l(8251),R=l(8135);function N(a,c){if(1&a&&(t.j41(0,"div",20)(1,"span",21),t.EFF(2,"Bill ID:"),t.k0s(),t.j41(3,"span",22),t.EFF(4),t.k0s()()),2&a){const n=t.XpG(2);t.R7$(4),t.JRh(n.fetchedBill.id)}}function T(a,c){if(1&a&&(t.j41(0,"div",11),t.nrm(1,"ion-icon",23),t.j41(2,"div",13)(3,"div",24),t.EFF(4),t.k0s()()()),2&a){const n=t.XpG(2);t.R7$(4),t.JRh(n.fetchedBill.consultantName)}}function A(a,c){if(1&a&&(t.j41(0,"div",11),t.nrm(1,"ion-icon",25),t.j41(2,"div",13)(3,"span",26),t.EFF(4,"Visit ID:"),t.k0s(),t.EFF(5),t.k0s()()),2&a){const n=t.XpG(2);t.R7$(5),t.SpI(" ",n.fetchedBill.visitID," ")}}function $(a,c){if(1&a&&(t.j41(0,"div",46)(1,"div",47),t.EFF(2),t.k0s(),t.j41(3,"div",48),t.EFF(4),t.k0s(),t.j41(5,"div",49),t.EFF(6),t.k0s()()),2&a){const n=c.$implicit,i=c.index,e=t.XpG(4);t.R7$(2),t.JRh(i+1),t.R7$(2),t.JRh(n.chargeName||n.name||"Consultation"),t.R7$(2),t.SpI("\u20b9",e.getChargeAmount(n),"")}}function z(a,c){if(1&a&&(t.j41(0,"div",39)(1,"div",40)(2,"div",41),t.EFF(3,"S.No"),t.k0s(),t.j41(4,"div",42),t.EFF(5,"Description"),t.k0s(),t.j41(6,"div",43),t.EFF(7,"Amount"),t.k0s()(),t.j41(8,"div",44),t.DNE(9,$,7,3,"div",45),t.k0s()()),2&a){const n=t.XpG(3);t.R7$(9),t.Y8G("ngForOf",n.bill[0].billDetail)}}function G(a,c){1&a&&(t.j41(0,"div",50)(1,"p"),t.EFF(2,"No charges available"),t.k0s()())}function X(a,c){if(1&a&&(t.j41(0,"div",51)(1,"span",35),t.EFF(2,"Tax Amount:"),t.k0s(),t.j41(3,"span",52),t.EFF(4),t.k0s()()),2&a){const n=t.XpG(3);t.R7$(4),t.SpI("\u20b9",n.bill[0].taxAmount,"")}}function U(a,c){if(1&a&&(t.j41(0,"div",53)(1,"span",35),t.EFF(2,"Paid Amount:"),t.k0s(),t.j41(3,"span",54),t.EFF(4),t.k0s()()),2&a){const n=t.XpG(3);t.R7$(4),t.SpI("\u20b9",n.bill[0].receiptAmount,"")}}function Y(a,c){if(1&a&&(t.j41(0,"div",55)(1,"span",35),t.EFF(2,"Pending Amount:"),t.k0s(),t.j41(3,"span",56),t.EFF(4),t.k0s()()),2&a){const n=t.XpG(3);t.R7$(4),t.SpI("\u20b9",n.pendingAmount,"")}}function V(a,c){if(1&a&&(t.j41(0,"div",27)(1,"h3",28),t.EFF(2,"Bill Items"),t.k0s(),t.DNE(3,z,10,1,"div",29)(4,G,3,0,"div",30),t.nrm(5,"div",31),t.j41(6,"div",32),t.DNE(7,X,5,1,"div",33),t.j41(8,"div",34)(9,"span",35),t.EFF(10,"Total Amount:"),t.k0s(),t.j41(11,"span",36),t.EFF(12),t.k0s()(),t.DNE(13,U,5,1,"div",37)(14,Y,5,1,"div",38),t.k0s()()),2&a){const n=t.XpG(2);t.R7$(3),t.Y8G("ngIf",n.bill[0].billDetail&&n.bill[0].billDetail.length>0),t.R7$(),t.Y8G("ngIf",!n.bill[0].billDetail||0===n.bill[0].billDetail.length),t.R7$(3),t.Y8G("ngIf",n.bill[0].taxAmount),t.R7$(5),t.SpI("\u20b9",n.bill[0].netAmount,""),t.R7$(),t.Y8G("ngIf",n.bill[0].receiptAmount),t.R7$(),t.Y8G("ngIf",n.pendingAmount>0)}}function K(a,c){if(1&a){const n=t.RV6();t.j41(0,"div",57)(1,"h3",28),t.EFF(2,"Payment Details"),t.k0s(),t.j41(3,"div",58)(4,"div",11),t.nrm(5,"ion-icon",59),t.j41(6,"div",13)(7,"span",26),t.EFF(8,"Receipt ID:"),t.k0s(),t.j41(9,"span",60),t.EFF(10),t.k0s()()(),t.j41(11,"div",11),t.nrm(12,"ion-icon",15),t.j41(13,"div",13)(14,"span",26),t.EFF(15,"Payment Date:"),t.k0s(),t.EFF(16),t.k0s()()(),t.j41(17,"div",61)(18,"ion-button",62),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.viewReceipt(e.bill[0].receiptId))}),t.nrm(19,"ion-icon",63),t.EFF(20," View Receipt "),t.k0s(),t.j41(21,"ion-button",64),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.downloadReceipt(e.bill[0].receiptId))}),t.nrm(22,"ion-icon",65),t.EFF(23," Download Receipt "),t.k0s()()()}if(2&a){const n=t.XpG(2);t.R7$(10),t.JRh(n.bill[0].receiptId),t.R7$(6),t.SpI(" ",n.bill[0].date," ")}}function W(a,c){if(1&a){const n=t.RV6();t.j41(0,"div",66)(1,"ion-button",67),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.makePayment())}),t.nrm(2,"ion-icon",68),t.EFF(3),t.k0s()()}if(2&a){const n=t.XpG(2);t.R7$(3),t.SpI(" Pay \u20b9",n.pendingAmount," ")}}function J(a,c){if(1&a&&(t.j41(0,"div",3)(1,"header",4)(2,"h1"),t.EFF(3,"Bill Details"),t.k0s(),t.j41(4,"p",5),t.EFF(5,"View and manage your medical bill"),t.k0s()(),t.j41(6,"div",6)(7,"div",7),t.DNE(8,N,5,1,"div",8),t.j41(9,"div",9),t.EFF(10),t.k0s()(),t.j41(11,"div",10)(12,"div",11),t.nrm(13,"ion-icon",12),t.j41(14,"div",13),t.EFF(15),t.k0s()(),t.j41(16,"div",11),t.nrm(17,"ion-icon",14),t.j41(18,"div",13),t.EFF(19),t.k0s()(),t.j41(20,"div",11),t.nrm(21,"ion-icon",15),t.j41(22,"div",13),t.EFF(23),t.k0s()(),t.DNE(24,T,5,1,"div",16)(25,A,6,1,"div",16),t.k0s()(),t.DNE(26,V,15,6,"div",17)(27,K,24,2,"div",18)(28,W,4,1,"div",19),t.k0s()),2&a){const n=t.XpG();t.R7$(8),t.Y8G("ngIf",n.fetchedBill.id),t.R7$(),t.AVh("status-paid","FullyPaid"===n.fetchedBill.billStatus)("status-partial","partiallyPaid"===n.fetchedBill.billStatus),t.R7$(),t.SpI(" ","FullyPaid"===n.fetchedBill.billStatus?"Fully Paid":"Partially Paid"," "),t.R7$(5),t.JRh(n.fetchedBill.familyMemberName),t.R7$(4),t.JRh(n.fetchedBill.hospitalName),t.R7$(4),t.JRh(n.fetchedBill.billdate),t.R7$(),t.Y8G("ngIf",n.fetchedBill.consultantName),t.R7$(),t.Y8G("ngIf",n.fetchedBill.visitID),t.R7$(),t.Y8G("ngIf",n.bill&&n.bill[0]),t.R7$(),t.Y8G("ngIf",n.bill&&n.bill[0]&&n.bill[0].receiptId),t.R7$(),t.Y8G("ngIf","FullyPaid"!==n.fetchedBill.billStatus&&n.pendingAmount>0)}}function L(a,c){1&a&&(t.j41(0,"div",69),t.nrm(1,"ion-icon",70),t.j41(2,"h2"),t.EFF(3,"No Bill Details"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Unable to load bill information"),t.k0s()())}let H=(()=>{var a;class c{constructor(i,e,r,o,g,s,P,d,p,b){var h;this.router=i,this.storageService=e,this.httpService=r,this.platform=o,this.utilityService=g,this.billPaymentService=s,this.navService=P,this.pageNavService=d,this.toastController=p,this.modalController=b,this.bill=[],this.navService.pageChange("Bills"),this.user=this.storageService.get("user"),this.fetchedBill=null===(h=this.router.getCurrentNavigation())||void 0===h||null===(h=h.extras.state)||void 0===h?void 0:h.bill,this.getBillsDetails(this.fetchedBill)}ionViewDidEnter(){this.navService.pageChange("Bills"),this.pageNavService.setupBackButton("/bill-details",()=>{this.router.navigate(["bills"])})}getBillsDetails(i){var e=this;return(0,u.A)(function*(){e.user=e.storageService.get("user");const r="/bill/billDetails/?hospitalCode="+i.entityCode+"&billId="+i.id;yield e.httpService.getInBackground(r,!0).then(o=>{e.bill=o.bill;const g=+e.bill[0].netAmount;let s=0;for(let P=0;P<e.bill.length;P++)s+=+e.bill[P].receiptAmount;e.pendingAmount=g-s,console.log("Bill details",e.bill),e.bill[0]&&e.bill[0].billDetail&&console.log("Bill detail items:",e.bill[0].billDetail)}).catch(o=>{})})()}getChargeAmount(i){const e=i.amount||i.chargeAmount||i.Amount||i.price||i.cost||i.netAmount||i.chargeAmt||i.amt;return null!=e?e.toString():(console.log("Charge object:",i),"0")}downloadPDF(i){var e=this;return(0,u.A)(function*(r,o="bill.pdf"){try{yield(yield e.toastController.create({message:"Downloading document...",duration:2e3,position:"bottom",color:"primary"})).present();let s=r;if(s.startsWith("data:")&&(s=s.split(",")[1]),_.Ii.isNativePlatform())try{const d=e.platform.is("android")?f.__.ExternalStorage:f.__.Documents,p=e.platform.is("android")?`Download/${o}`:o,b=yield f.YA.writeFile({path:p,data:s,directory:d,recursive:!0});console.log("File saved successfully to:",b.uri),yield(yield e.toastController.create({message:(e.platform.is("android"),"Downloaded successfully!"),duration:5e3,position:"bottom",color:"success",icon:"checkmark-circle",buttons:[{text:"Open",role:"action",handler:(x=(0,u.A)(function*(){try{yield O.M.open({filePath:b.uri,contentType:"application/pdf",openWithDefault:!0})}catch(D){console.error("Failed to open file:",D),yield(yield e.toastController.create({message:"Failed to open file",duration:2500,position:"bottom",color:"danger"})).present()}}),function(){return x.apply(this,arguments)})},{text:"Dismiss",role:"cancel"}]})).present()}catch(d){throw console.error("Filesystem error:",d),console.error("Error details:",JSON.stringify(d)),d}else{const d=`data:application/pdf;base64,${s}`,p=document.createElement("a");p.href=d,p.download=o,p.target="_blank",document.body.appendChild(p),p.click(),document.body.removeChild(p),yield(yield e.toastController.create({message:"Download completed successfully!",duration:2e3,position:"bottom",color:"success",icon:"checkmark-circle"})).present()}}catch(g){console.error("Failed to download PDF",g),yield(yield e.toastController.create({message:"Failed to download document",duration:2500,position:"bottom",color:"danger"})).present()}var x}).apply(this,arguments)}downloadBillPDF(){var i=this;return(0,u.A)(function*(){const e="/bill/print/?hospitalCode="+i.fetchedBill.entityCode+"&billId="+i.fetchedBill.id;yield i.httpService.getInBackground(e,!0).then(r=>{r&&r.bill&&i.downloadPDF(r.bill.billBase64,`bill_${i.fetchedBill.id}.pdf`)}).catch(r=>{})})()}downloadReceipt(i){var e=this;return(0,u.A)(function*(){const r="/receipt/print/?hospitalCode="+e.fetchedBill.entityCode+"&receiptId="+i;yield e.httpService.getInBackground(r,!0).then(o=>{o&&e.downloadPDF(o.receipt.receiptBase64,`receipt_${i}.pdf`)}).catch(o=>{})})()}viewReceipt(i){var e=this;return(0,u.A)(function*(){try{yield(yield e.toastController.create({message:"Loading receipt...",duration:1500,position:"bottom",color:"primary"})).present();const o="/receipt/print/?hospitalCode="+e.fetchedBill.entityCode+"&receiptId="+i,g=yield e.httpService.getInBackground(o,!0);if(!(g&&g.receipt&&g.receipt.receiptBase64))throw new Error("Receipt data not found");{const s=g.receipt.receiptBase64;if(_.Ii.isNativePlatform()){let d=s;d.startsWith("data:")&&(d=d.split(",")[1]);const p=`receipt_${i}_preview.pdf`,b=yield f.YA.writeFile({path:p,data:d,directory:f.__.Cache,recursive:!0});console.log("Temp file created:",b.uri),yield O.M.open({filePath:b.uri,contentType:"application/pdf",openWithDefault:!0})}else yield(yield e.modalController.create({component:w.z,componentProps:{pdfData:s,documentName:`Receipt ${i}`},cssClass:"pdf-viewer-modal"})).present()}}catch(r){console.error("Failed to view receipt",r),yield(yield e.toastController.create({message:"Failed to open receipt viewer",duration:2500,position:"bottom",color:"danger"})).present()}})()}makePayment(){let r={billPayload:{hospitalCode:this.fetchedBill.entityCode,patientId:this.fetchedBill.patientId,billId:this.fetchedBill.id,price:this.pendingAmount.toString(),billDate:this.fetchedBill.billdate,visitId:this.fetchedBill.visitID,chargeName:""},paymentDetails:this.fetchedBill.paymentDetails};this.bill[0].billDetail.map(o=>{r.billPayload.chargeName+=o.chargeName+" "}),this.billPaymentService.makePayment(r,o=>{this.router.navigate(["/home/bills"])},o=>{})}ngOnDestroy(){this.pageNavService.cleanup()}}return(a=c).\u0275fac=function(i){return new(i||a)(t.rXU(m.Ix),t.rXU(v.n),t.rXU(B.k),t.rXU(I.OD),t.rXU(F.Q),t.rXU(E),t.rXU(j.o),t.rXU(R.V),t.rXU(C.K_),t.rXU(C.W3))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-bill-details"]],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[[1,"bill-details-page"],["class","container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"container"],[1,"header"],[1,"subtitle"],[1,"bill-card"],[1,"status-section"],["class","bill-id",4,"ngIf"],[1,"status-badge"],[1,"bill-details"],[1,"detail-item"],["name","person-outline",1,"detail-icon"],[1,"detail-content"],["name","business-outline",1,"detail-icon"],["name","calendar-outline",1,"detail-icon"],["class","detail-item",4,"ngIf"],["class","billing-section",4,"ngIf"],["class","payment-section",4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"bill-id"],[1,"id-label"],[1,"id-value"],["name","medical-outline",1,"detail-icon"],[1,"doctor-name"],["name","document-text-outline",1,"detail-icon"],[1,"detail-label"],[1,"billing-section"],[1,"section-title"],["class","charges-table",4,"ngIf"],["class","empty-charges",4,"ngIf"],[1,"divider"],[1,"amount-summary"],["class","amount-row",4,"ngIf"],[1,"amount-row","total-row"],[1,"amount-label"],[1,"amount-value","total"],["class","amount-row paid-row",4,"ngIf"],["class","amount-row pending-row",4,"ngIf"],[1,"charges-table"],[1,"table-header"],[1,"table-cell","header-cell","sno-col"],[1,"table-cell","header-cell","description-col"],[1,"table-cell","header-cell","amount-col"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-cell","sno-col"],[1,"table-cell","description-col"],[1,"table-cell","amount-col"],[1,"empty-charges"],[1,"amount-row"],[1,"amount-value"],[1,"amount-row","paid-row"],[1,"amount-value","paid"],[1,"amount-row","pending-row"],[1,"amount-value","pending"],[1,"payment-section"],[1,"payment-info"],["name","receipt-outline",1,"detail-icon"],[1,"receipt-id"],[1,"receipt-actions"],["fill","solid",1,"view-button",3,"click"],["slot","start","name","eye-outline"],["fill","clear",1,"download-button",3,"click"],["slot","start","name","download-outline"],[1,"action-buttons"],["expand","block",3,"click"],["slot","start","name","wallet-outline"],[1,"empty-state"],["name","document-text-outline",1,"empty-icon"]],template:function(i,e){1&i&&(t.j41(0,"ion-content",0),t.DNE(1,J,29,14,"div",1)(2,L,6,0,"div",2),t.k0s()),2&i&&(t.R7$(),t.Y8G("ngIf",e.fetchedBill),t.R7$(),t.Y8G("ngIf",!e.fetchedBill))},dependencies:[C.bv,C.Jm,C.W9,C.iq,y.bT,y.pM],styles:[".bill-details-page[_ngcontent-%COMP%]{--padding-top: var(--mc-spacing-2xl);--padding-bottom: var(--mc-spacing-2xl);--offset-bottom: 0;height:100%}.bill-details-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--mc-spacing-xl) var(--mc-spacing-2xl) var(--mc-spacing-xl)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-md) var(--mc-spacing-2xl) var(--mc-spacing-md)}}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 12px var(--mc-spacing-2xl) 12px}}.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-2xl);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-lg);font-weight:600;color:var(--color-gray-900);margin:0 0 var(--mc-spacing-xs) 0}.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-md);color:var(--color-gray-600);margin:0;font-weight:400}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-xl)}.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.bill-details-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]{background:var(--color-white);border-radius:var(--radius-lg);padding:var(--spacing-4) var(--spacing-5);box-shadow:var(--shadow-sm);margin-bottom:var(--spacing-4);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out .1s both}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:var(--spacing-4);margin-bottom:var(--spacing-4);border-bottom:2px solid var(--color-gray-100)}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .bill-id[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2)}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .bill-id[_ngcontent-%COMP%]   .id-label[_ngcontent-%COMP%]{color:var(--color-gray-600);font-size:var(--font-body-sm);font-weight:500}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .bill-id[_ngcontent-%COMP%]   .id-value[_ngcontent-%COMP%]{color:var(--mc-text-primary);font-size:var(--font-body-md);font-weight:600}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:var(--spacing-1) var(--spacing-3);border-radius:var(--radius-full);font-size:var(--font-body-sm);font-weight:600;background:var(--color-gray-100);color:var(--color-gray-700)}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .status-badge.status-paid[_ngcontent-%COMP%]{background:var(--mc-color-success-100);color:var(--mc-color-success-700)}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]   .status-badge.status-partial[_ngcontent-%COMP%]{background:var(--mc-color-warning-100);color:var(--mc-color-warning-700)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .status-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-3)}}.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]   .bill-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .bill-card[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-4)}}.bill-details-page[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:var(--spacing-3) 0}.bill-details-page[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--color-gray-100)}.bill-details-page[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:first-child   .detail-content[_ngcontent-%COMP%]{font-weight:600;color:var(--mc-text-primary)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{padding:var(--spacing-2) 0}}.bill-details-page[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:var(--font-heading-md);color:var(--mc-color-primary-500);margin-right:var(--mc-spacing-lg);flex-shrink:0;margin-top:2px}.bill-details-page[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1;line-height:1.5;font-size:var(--font-body-md);color:var(--mc-text-primary)}.bill-details-page[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .doctor-name[_ngcontent-%COMP%]{font-weight:600;margin-bottom:var(--spacing-1);color:var(--mc-text-primary)}.bill-details-page[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--color-gray-600);font-weight:500}.bill-details-page[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .receipt-id[_ngcontent-%COMP%]{font-family:monospace;background:var(--color-gray-100);padding:2px var(--spacing-2);border-radius:var(--radius-sm);font-size:var(--font-body-sm);margin-left:var(--spacing-1)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]{background:var(--color-white);border-radius:var(--radius-lg);padding:var(--spacing-4) var(--spacing-5);box-shadow:var(--shadow-sm);margin-bottom:var(--spacing-4);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out .2s both}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--font-heading-sm);font-weight:600;color:var(--color-gray-700);margin:0 0 var(--spacing-4) 0}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-3);border-radius:var(--radius-md)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:var(--spacing-3)}}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .charges-table[_ngcontent-%COMP%]{margin-bottom:var(--spacing-4);border:1px solid var(--color-gray-200);border-radius:var(--radius-md);overflow:hidden}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .charges-table[_ngcontent-%COMP%]{margin-bottom:var(--spacing-3);border-radius:var(--radius-sm)}}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 120px;background:linear-gradient(135deg,var(--mc-color-primary-600),var(--mc-color-primary-500));color:var(--color-white);font-weight:600;font-size:var(--font-body-sm);text-transform:uppercase;letter-spacing:.5px}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{grid-template-columns:45px 1fr 95px;font-size:11px;letter-spacing:.3px}}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{grid-template-columns:40px 1fr 85px;font-size:10px;letter-spacing:.2px}}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{background:var(--color-white)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 120px;transition:background-color .2s ease}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--color-gray-200)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-gray-50)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{grid-template-columns:45px 1fr 95px}}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{grid-template-columns:40px 1fr 85px}}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]{padding:var(--spacing-3);display:flex;align-items:center;font-size:var(--font-body-md);color:var(--mc-text-primary);min-height:44px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.header-cell[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-3);color:var(--color-white);min-height:40px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.sno-col[_ngcontent-%COMP%]{justify-content:center;font-weight:600;color:var(--mc-color-primary-600)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.sno-col.header-cell[_ngcontent-%COMP%]{color:var(--color-white)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.description-col[_ngcontent-%COMP%]{padding-left:var(--spacing-4);font-weight:500;word-break:break-word;line-height:1.4}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.amount-col[_ngcontent-%COMP%]{justify-content:flex-end;font-weight:600;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--mc-color-primary-700)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.amount-col.header-cell[_ngcontent-%COMP%]{color:var(--color-white)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]{padding:10px 8px;font-size:13px;min-height:40px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.header-cell[_ngcontent-%COMP%]{padding:10px 6px;min-height:36px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.description-col[_ngcontent-%COMP%]{padding-left:8px;padding-right:6px;line-height:1.3}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.sno-col[_ngcontent-%COMP%]{font-size:12px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.amount-col[_ngcontent-%COMP%]{font-size:13px;padding-right:8px}}@media (max-width: 400px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]{padding:8px 6px;font-size:12px;min-height:38px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.header-cell[_ngcontent-%COMP%]{padding:8px 4px;min-height:34px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.description-col[_ngcontent-%COMP%]{padding-left:6px;padding-right:4px;line-height:1.3;font-size:11.5px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.sno-col[_ngcontent-%COMP%]{font-size:11px}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .table-cell.amount-col[_ngcontent-%COMP%]{font-size:12px;padding-right:6px}}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .empty-charges[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-4);color:var(--color-gray-500);font-size:var(--font-body-sm);font-style:italic;margin-bottom:var(--spacing-4)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .empty-charges[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:var(--color-gray-200);margin:var(--spacing-4) 0}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-2)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-2) var(--spacing-3);border-radius:var(--radius-sm)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount-label[_ngcontent-%COMP%]{color:var(--color-gray-600);font-size:var(--font-body-sm);font-weight:500}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{color:var(--mc-text-primary);font-size:var(--font-body-md);font-weight:600}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount-value.total[_ngcontent-%COMP%]{color:var(--mc-color-primary-600);font-size:var(--font-body-lg);font-weight:700}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount-value.paid[_ngcontent-%COMP%]{color:var(--mc-color-success-700)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row[_ngcontent-%COMP%]   .amount-value.pending[_ngcontent-%COMP%]{color:var(--mc-color-warning-700);font-weight:700}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row.total-row[_ngcontent-%COMP%]{background:var(--color-gray-50);border:1px solid var(--color-gray-200);padding:var(--spacing-3);margin-top:var(--spacing-2)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row.paid-row[_ngcontent-%COMP%]{background:var(--mc-color-success-50);border:1px solid var(--mc-color-success-200);padding:var(--spacing-3)}.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]   .amount-row.pending-row[_ngcontent-%COMP%]{background:var(--mc-color-warning-50);border:1px solid var(--mc-color-warning-200);padding:var(--spacing-3)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .billing-section[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-4)}}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{background:var(--color-white);border-radius:var(--radius-lg);padding:var(--spacing-4) var(--spacing-5);box-shadow:var(--shadow-sm);margin-bottom:var(--spacing-6);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out .3s both}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--font-heading-sm);font-weight:600;color:var(--color-gray-700);margin:0 0 var(--spacing-4) 0}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:var(--spacing-4)}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .receipt-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-3);margin-top:var(--spacing-3);padding-bottom:var(--spacing-2)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .receipt-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-2);padding-bottom:var(--spacing-3)}}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]{--background: var(--mc-color-primary-600);--color: var(--color-white);--border-radius: var(--radius-md);font-weight:600;flex:1;height:44px}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:var(--spacing-1)}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]:hover{--background: var(--mc-color-primary-700)}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]{--color: var(--mc-color-primary-500);--border-radius: var(--radius-md);font-weight:500;flex:1;height:44px}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:var(--spacing-1)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{padding:var(--spacing-3) var(--spacing-4)}}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:var(--spacing-4);margin-bottom:var(--spacing-6);padding-top:var(--spacing-4);border-top:2px solid var(--color-gray-100);display:flex;flex-direction:column;gap:var(--spacing-3);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out .4s both}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: var(--radius-md);--padding-top: var(--spacing-3);--padding-bottom: var(--spacing-3);--box-shadow: var(--shadow-sm);font-weight:600;text-transform:capitalize;height:48px;transition:all .2s ease}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]){--background: var(--mc-color-primary-600);--color: var(--color-white)}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]):hover{--background: var(--mc-color-primary-700);transform:translateY(-2px);--box-shadow: var(--shadow-md)}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]):active{transform:translateY(0)}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:var(--spacing-2)}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:var(--spacing-2)}.bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-top: var(--spacing-2);--padding-bottom: var(--spacing-2)}}.bill-details-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-6) var(--spacing-4);color:var(--color-gray-500);animation:_ngcontent-%COMP%_fadeInUp .5s ease-out;min-height:400px;display:flex;flex-direction:column;justify-content:center;align-items:center}.bill-details-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:var(--spacing-4);color:var(--color-gray-400)}.bill-details-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--font-heading-md);font-weight:600;color:var(--color-gray-700);margin:0 0 var(--spacing-2) 0}.bill-details-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-body-md);color:var(--color-gray-600);margin:0}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 600px){.bill-details-page[_ngcontent-%COMP%]{--padding-top: var(--mc-spacing-xl);--padding-bottom: var(--mc-spacing-xl)}.bill-details-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-bottom:120px}.bill-details-page[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%], .bill-details-page[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-bottom:var(--spacing-6)}}"]}),c})()},8135:(k,M,l)=>{l.d(M,{V:()=>f});var u=l(4438),C=l(600),y=l(9012);let f=(()=>{var _;class O{constructor(t,m){this.platform=t,this.router=m,this.activeSubscriptions=new Map}setupBackButton(t,m){Array.isArray(t)?t.forEach(v=>{this.setupSingleBackButton(v.route,v.handler)}):"string"==typeof t&&m&&this.setupSingleBackButton(t,m)}setupSingleBackButton(t,m){this.cleanupBackButton(t);const v=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===t&&m()});this.activeSubscriptions.set(t,v)}cleanupBackButton(t){const m=this.activeSubscriptions.get(t);m&&(m.unsubscribe(),this.activeSubscriptions.delete(t))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((t,m)=>{t.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(t="/home"){window.history.length>1?window.history.back():this.router.navigate([t])}smartNavigateBack(t){const v={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[t];v?this.router.navigate([v]):this.navigateBack()}}return(_=O).\u0275fac=function(t){return new(t||_)(u.KVO(C.OD),u.KVO(y.Ix))},_.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),O})()}}]);