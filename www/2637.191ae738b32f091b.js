"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2637],{2637:(R,b,l)=>{l.r(b),l.d(b,{AppointmentListPage:()=>ht,DaysUntilPipe:()=>gt,FilterPipe:()=>dt,PICK_FORMATS:()=>F,PickDateAdapter:()=>T});var d=l(467),P=l(3),h=l(9893),y=l(177),f=l(7376),C=l(5312),m=l(1299),g=l(9417),u=l(3719),N=l(8359),t=l(4438),E=l(9012),I=l(600),w=l(8023),x=l(9934),L=l(3629),U=l(7031),B=l(8251),G=l(8135),H=l(8875);const j=["timeSelect"];function V(a,p){1&a&&(t.j41(0,"div",13),t.nrm(1,"ion-spinner",14),t.j41(2,"p",15),t.EFF(3,"Loading appointments..."),t.k0s()())}function Y(a,p){1&a&&(t.j41(0,"div",16),t.nrm(1,"ion-icon",17),t.j41(2,"h2"),t.EFF(3,"No Past Appointments"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Your past appointments will appear here"),t.k0s()())}function $(a,p){1&a&&t.nrm(0,"ion-icon",36)}function W(a,p){1&a&&t.nrm(0,"ion-icon",37)}function K(a,p){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const s=t.XpG().$implicit;t.R7$(),t.SpI(" \u2022 ",s.appointmentTime,"")}}function X(a,p){if(1&a){const s=t.RV6();t.j41(0,"ion-button",38),t.bIt("click",function(n){t.eBV(s);const o=t.XpG().$implicit;return t.XpG(2).viewReceipt(o),t.Njj(n.stopPropagation())}),t.nrm(1,"ion-icon",39),t.k0s()}2&a&&t.BMQ("aria-label","View receipt")}function z(a,p){if(1&a){const s=t.RV6();t.j41(0,"div",20),t.bIt("click",function(){const n=t.eBV(s).$implicit,o=t.XpG(2);return t.Njj(o.openConference(n))}),t.j41(1,"div",21)(2,"div",22),t.DNE(3,$,1,0,"ion-icon",23)(4,W,1,0,"ion-icon",24),t.j41(5,"div",25)(6,"div",26)(7,"div",27)(8,"span",28),t.EFF(9),t.k0s(),t.j41(10,"span"),t.EFF(11),t.k0s()(),t.j41(12,"span",29),t.EFF(13),t.k0s()(),t.j41(14,"div",30)(15,"span",31),t.nrm(16,"ion-icon",32),t.EFF(17),t.nI1(18,"date"),t.DNE(19,K,2,1,"span",33),t.k0s()()()(),t.j41(20,"div",34),t.DNE(21,X,2,1,"ion-button",35),t.k0s()()()}if(2&a){const s=p.$implicit,e=p.index,n=t.XpG(2);t.xc7("animation-delay",.05*e,"s"),t.R7$(3),t.Y8G("ngIf",s.videoConsultation),t.R7$(),t.Y8G("ngIf",!s.videoConsultation),t.R7$(5),t.JRh(n.formatDoctorName(s.doctorName)),t.R7$(),t.ZvI("status-badge ",n.getStatusBadgeClass(s.status),""),t.R7$(),t.SpI(" ",n.getStatus(s.status)," "),t.R7$(2),t.JRh(s.specialityName),t.R7$(4),t.SpI(" ",t.i5U(18,13,s.appointmentDate,"MMM dd, yyyy")," "),t.R7$(2),t.Y8G("ngIf",s.appointmentTime),t.R7$(2),t.Y8G("ngIf",s.receiptId)}}function J(a,p){if(1&a&&(t.j41(0,"div",18),t.DNE(1,z,22,16,"div",19),t.k0s()),2&a){const s=t.XpG();t.R7$(),t.Y8G("ngForOf",s.appointmentPast)}}function Q(a,p){1&a&&(t.j41(0,"div",13),t.nrm(1,"ion-spinner",14),t.j41(2,"p",15),t.EFF(3,"Loading appointments..."),t.k0s()())}function Z(a,p){if(1&a){const s=t.RV6();t.j41(0,"div",16),t.nrm(1,"ion-icon",40),t.j41(2,"h2"),t.EFF(3,"No Upcoming Appointments"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Book your next appointment to get started"),t.k0s(),t.j41(6,"ion-button",41),t.bIt("click",function(){t.eBV(s);const n=t.XpG();return t.Njj(n.goToBookAppointment())}),t.nrm(7,"ion-icon",42),t.EFF(8," Book Appointment "),t.k0s()()}}function q(a,p){1&a&&t.nrm(0,"ion-icon",36)}function tt(a,p){1&a&&t.nrm(0,"ion-icon",37)}function et(a,p){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const s=t.XpG().$implicit;t.R7$(),t.SpI(" \u2022 ",s.appointmentTime,"")}}function nt(a,p){if(1&a){const s=t.RV6();t.j41(0,"ion-button",38),t.bIt("click",function(n){t.eBV(s);const o=t.XpG().$implicit;return t.XpG(2).viewReceipt(o),t.Njj(n.stopPropagation())}),t.nrm(1,"ion-icon",39),t.k0s()}2&a&&t.BMQ("aria-label","View receipt")}function it(a,p){if(1&a){const s=t.RV6();t.j41(0,"div",46),t.bIt("click",function(){const n=t.eBV(s).$implicit,o=t.XpG(2);return t.Njj(o.openConference(n))}),t.j41(1,"div",21)(2,"div",22),t.DNE(3,q,1,0,"ion-icon",23)(4,tt,1,0,"ion-icon",24),t.j41(5,"div",25)(6,"div",26)(7,"div",27)(8,"span",28),t.EFF(9),t.k0s(),t.j41(10,"span"),t.EFF(11),t.k0s()(),t.j41(12,"span",29),t.EFF(13),t.k0s()(),t.j41(14,"div",30)(15,"span",31),t.nrm(16,"ion-icon",44),t.EFF(17," Today"),t.DNE(18,et,2,1,"span",33),t.k0s()()()(),t.j41(19,"div",34),t.DNE(20,nt,2,1,"ion-button",35),t.k0s()()()}if(2&a){const s=p.$implicit,e=p.index,n=t.XpG(2);t.xc7("animation-delay",.05*e,"s"),t.R7$(3),t.Y8G("ngIf",s.videoConsultation),t.R7$(),t.Y8G("ngIf",!s.videoConsultation),t.R7$(5),t.JRh(n.formatDoctorName(s.doctorName)),t.R7$(),t.ZvI("status-badge ",n.getStatusBadgeClass(s.status),""),t.R7$(),t.SpI(" ",n.getStatus(s.status)," "),t.R7$(2),t.JRh(s.specialityName),t.R7$(5),t.Y8G("ngIf",s.appointmentTime),t.R7$(2),t.Y8G("ngIf",s.receiptId)}}function ot(a,p){if(1&a&&(t.j41(0,"div",18)(1,"div",43),t.nrm(2,"ion-icon",44),t.j41(3,"span"),t.EFF(4,"Today"),t.k0s()(),t.DNE(5,it,21,12,"div",45),t.k0s()),2&a){const s=t.XpG();t.R7$(5),t.Y8G("ngForOf",s.appointmentToday)}}function at(a,p){1&a&&(t.j41(0,"div",43),t.nrm(1,"ion-icon",48),t.j41(2,"span"),t.EFF(3,"Upcoming"),t.k0s()())}function st(a,p){1&a&&t.nrm(0,"ion-icon",36)}function rt(a,p){1&a&&t.nrm(0,"ion-icon",37)}function pt(a,p){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const s=t.XpG().$implicit;t.R7$(),t.SpI(" \u2022 ",s.appointmentTime,"")}}function ct(a,p){if(1&a){const s=t.RV6();t.j41(0,"ion-button",38),t.bIt("click",function(n){t.eBV(s);const o=t.XpG().$implicit;return t.XpG(2).viewReceipt(o),t.Njj(n.stopPropagation())}),t.nrm(1,"ion-icon",39),t.k0s()}2&a&&t.BMQ("aria-label","View receipt")}function lt(a,p){if(1&a){const s=t.RV6();t.j41(0,"div",20),t.bIt("click",function(){const n=t.eBV(s).$implicit,o=t.XpG(2);return t.Njj(o.openConference(n))}),t.j41(1,"div",21)(2,"div",22),t.DNE(3,st,1,0,"ion-icon",23)(4,rt,1,0,"ion-icon",24),t.j41(5,"div",25)(6,"div",26)(7,"div",27)(8,"span",28),t.EFF(9),t.k0s(),t.j41(10,"span"),t.EFF(11),t.k0s()(),t.j41(12,"span",29),t.EFF(13),t.k0s()(),t.j41(14,"div",30)(15,"span",31),t.nrm(16,"ion-icon",32),t.EFF(17),t.nI1(18,"date"),t.DNE(19,pt,2,1,"span",33),t.k0s()()()(),t.j41(20,"div",34),t.DNE(21,ct,2,1,"ion-button",35),t.k0s()()()}if(2&a){const s=p.$implicit,e=p.index,n=t.XpG(2);t.xc7("animation-delay",.05*(e+n.appointmentToday.length),"s"),t.R7$(3),t.Y8G("ngIf",s.videoConsultation),t.R7$(),t.Y8G("ngIf",!s.videoConsultation),t.R7$(5),t.JRh(n.formatDoctorName(s.doctorName)),t.R7$(),t.ZvI("status-badge ",n.getStatusBadgeClass(s.status),""),t.R7$(),t.SpI(" ",n.getStatus(s.status)," "),t.R7$(2),t.JRh(s.specialityName),t.R7$(4),t.SpI(" ",t.i5U(18,13,s.appointmentDate,"MMM dd, yyyy")," "),t.R7$(2),t.Y8G("ngIf",s.appointmentTime),t.R7$(2),t.Y8G("ngIf",s.receiptId)}}function mt(a,p){if(1&a&&(t.j41(0,"div",18),t.DNE(1,at,4,0,"div",47)(2,lt,22,16,"div",19),t.k0s()),2&a){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.appointmentToday.length>0),t.R7$(),t.Y8G("ngForOf",s.appointmentUpcoming)}}let dt=(()=>{var a;class p{transform(e){return null!=e?f.uniqBy(e,"specialityName"):e}}return(a=p).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.EJ8({name:"filter",type:a,pure:!0,standalone:!0}),p})(),gt=(()=>{var a;class p{transform(e){const n=new Date,i=new Date(e).getTime()-n.getTime();return Math.ceil(i/864e5)}}return(a=p).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.EJ8({name:"daysUntil",type:a,pure:!0,standalone:!0}),p})();const F={parse:{dateInput:{month:"numeric",year:"numeric",day:"numeric"}},display:{dateInput:"input",monthYearLabel:{year:"numeric",month:"numeric"},dateA11yLabel:{year:"numeric",month:"numeric",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"numeric"}}};let T=(()=>{var a;class p extends P.xW{format(e,n){return"input"===n?(0,y.Yq)(e,"dd/MM/yyyy",this.locale):e.toDateString()}}return(a=p).\u0275fac=(()=>{let s;return function(n){return(s||(s=t.xGo(a)))(n||a)}})(),a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac}),p})(),ht=(()=>{var a;class p{constructor(e,n,o,i,r,c,M,_,O,D,ft,ut,_t){this.router=e,this.navCtrl=n,this.httpService=o,this.functionService=i,this.storageService=r,this.dateService=c,this.platform=M,this.loadingController=_,this.route=O,this.navService=D,this.utilityService=ft,this.pageNavService=ut,this.globalFamilyMemberService=_t,this.appointments=[],this.today=new Date,this.appointmentToday=[],this.isAppointmentPast=!1,this.appointmentUpcoming=[],this.appointmentPast=[],this.pastAppointment=!1,this.noAppointments=!1,this.noUpcomingAppointments=!1,this.event="Show",this.activeTab=1,this.isBookAppointmetLoaded=!1,this.hospitals=[],this.specialityList=[],this.doctors=[],this.hospital=null,this.timeSlotAfternoon=[],this.timeSlotMorning=[],this.timeSlotEvening=[],this.timeSlotNight=[],this.doctorSlots=[],this.familyMember=null,this.familyMembers=[],this.selectedDoctorData={doctorId:"",doctorName:"",canDoVideoConsultation:!1},this.isHidden=!0,this.isBookingDisable=!0,this.timeSlotArray=[],this.isHiddenFees=!0,this.toFamilymember=!1,this.hideHospital=!0,this.isSingleDoctor=!1,this.isOptionGroup=!1,this.noSlotsErrMessage=!1,this.corporateHospitals=[],this.hideProgressBar=!0,this.doctorArray=[],this.doctorGroups=[],this.timeSlotAvailable=!0,this.showSpinnerForSlotLoading=!1,this.selectedGlobalFamilyMember=null,this.subscriptions=new N.yU,this.isMobile=!1,this.devWidth=this.platform.width(),this.devWidth<770&&(this.isMobile=!0),this.setPageTitle("Appointments"),this.conference=!1,this.user=this.storageService.get("user"),this.minAppointmentDate=new Date,this.relations=this.utilityService.getRelations(),this.relations.shift();try{var S,v;this.draftAppointment=null!==(S=null===(v=this.router.getCurrentNavigation())||void 0===v||null===(v=v.extras)||void 0===v||null===(v=v.state)||void 0===v?void 0:v.draftAppointment)&&void 0!==S?S:null}catch{this.ngOnInit()}if(this.draftAppointment){this.hideHospital=!1,this.isHidden=!1,this.isHiddenFees=!1,this.dateOfAppointment=this.draftAppointment.appointmentDate,this.getTimeSlot(),"VID_CONS"===this.draftAppointment.consultationCharge.code?(this.videoConsultation=this.draftAppointment.consultationCharge,this.fees=this.draftAppointment.consultationCharge.price,this.consultationType.name=this.draftAppointment.consultationCharge.chargeName):this.consultation=this.draftAppointment.appointmentDetails.consultationCharge,this.isVideo=this.draftAppointment.videoConsultation;let k={code:this.draftAppointment.hospital.code,_id:this.draftAppointment.hospital.id,name:this.draftAppointment.hospital.name,paymentGatewayDetails:this.draftAppointment.paymentGatewayDetails};this.getConsultationFee(this.draftAppointment.doctorId,this.draftAppointment.hospital.code),this.getDoctors(k)}}setPageTitle(e){this.navService.pageChange(e)}ngOnInit(){var e=this;return(0,d.A)(function*(){e.entityCode=e.route.snapshot.paramMap.get("hospitalCode"),e.user=e.storageService.get("user"),yield e.getFamilyMembers(),e.setupGlobalFamilyMemberSubscription();const n=e.globalFamilyMemberService.getSelectedMember();n&&(e.selectedGlobalFamilyMember=n)})()}ionViewWillEnter(){this.setPageTitle("Appointments"),this.hideAppointmentOptions=!1,this.hideHospitalOptions=!1;const e=this.globalFamilyMemberService.getSelectedMember();e&&(this.selectedGlobalFamilyMember=e);try{this.toFamilymember&&this.route.queryParams.subscribe(n=>{n.familyMemberID&&(this.hideHospital=!1,this.getRecentlyAddedFamilyMember())}),this.route.queryParams.subscribe(n=>{this.mrn=n.mrn,"fromLinkPatient"===n.navigateFrom&&(this.isHidden=!1,this.checkRegisteredPatient=!1,this.mrn||(this.isNewPatient=!0)),"upcoming"===n.tab?this.activeTab=1:"past"===n.tab&&(this.activeTab=0)})}catch{}C.c.HOSPITAL_ID?this.getHospitalsById(C.c.HOSPITAL_ID):(this.showCorporateHospitals=!0,this.getHospitals()),0!==this.activeTab&&(this.activeTab=1),this.appointmentToday=[],this.appointmentUpcoming=[],this.appointmentPast=[],this.getSavedAppointments(),this.pageNavService.setupBackButton("/appointment-list",()=>{this.router.navigate(["home"])})}goToBookAppointment(){this.router.navigate(["/home/appointment-booking"])}dateValidation(e){return this.pendingDate=this.dateService.getDateDifferenceInDays(e),this.pendingDate=0===this.pendingDate?"Today":1===this.pendingDate?"Tomorrow":this.pendingDate>1?"In "+this.pendingDate+" days":"Past",this.pendingDate}getSavedAppointments(){var e=this;return(0,d.A)(function*(){e.user=e.storageService.get("user");const n="/appointment?userId="+e.user.id;yield e.httpService.getInBackground(n,!0).then(o=>{if(o.length>0){e.appointments=o,e.noAppointments=!1,e.noUpcomingAppointments=!1;for(let i=0;i<e.appointments.length;i++){if(null!==e.appointments[i].appointmentTime&&(e.appointments[i].appointmentTime=e.dateService.to12HourFormat(e.appointments[i].appointmentTime)),!e.appointments[i].active)continue;e.appointments[i].appointmentDate=e.appointments[i].appointmentDate.slice(0,10);const r=e.functionService.toISODateTime(new Date).slice(0,10);r<e.appointments[i].appointmentDate?"CLOSED"===e.appointments[i].status?(e.appointments[i].appointmentDate=new Date(e.appointments[i].appointmentDate),e.appointmentPast.push(e.appointments[i])):(e.appointmentUpcoming.push(e.appointments[i]),e.appointments[i].appointmentDate=new Date(e.appointments[i].appointmentDate)):r>e.appointments[i].appointmentDate||"CLOSED"===e.appointments[i].status?(e.appointments[i].appointmentDate=new Date(e.appointments[i].appointmentDate),e.appointmentPast.push(e.appointments[i])):(e.appointments[i].appointmentDate=new Date(e.appointments[i].appointmentDate),e.appointmentToday.push(e.appointments[i])),e.appointmentPast=e.appointmentPast.slice().sort((c,M)=>M.appointmentDate-c.appointmentDate)}}else e.noAppointments=!0,e.noUpcomingAppointments=!0;e.appointmentUpcoming.length>0||e.appointmentToday.length>0||(e.noUpcomingAppointments=!0),e.appointmentPast.length>0||(e.noAppointments=!0)}).catch(o=>{})})()}markAppointmentsAsRead(){this.httpService.get("/appointment/markasread/?userId="+this.user.id).then(n=>{}).catch(n=>{})}showPastAppointment(){this.isAppointmentPast=!0,this.noUpcomingAppointments=!1,this.isAppointmentPast&&(this.pastAppointment=!1)}getStatus(e){let n;switch(e){case"DRAFT":n="DRAFT";break;case"PAYMENT_PENDING":n="PAYMENT PENDING";break;case"AWAITING_CONFIRMATION_FROM_HOSPITAL":n="AWAITING";break;case"SCHEDULED":n="SCHEDULED";break;case"PAYMENT_FAILED":n="PAYMENT FAILED";break;case"CANCELLED":n="CANCELLED";break;case"CLOSED":n="CLOSED";break;case"RE_SCHEDULED":n="RESCHEDULED";break;case"STARTED":n="STARTED"}return n}getStatusBadgeClass(e){switch(e){case"CLOSED":return"status-closed";case"SCHEDULED":return"status-scheduled";case"STARTED":return"status-started";case"DRAFT":return"status-draft";case"PAYMENT_PENDING":return"status-payment-pending";case"AWAITING_CONFIRMATION_FROM_HOSPITAL":return"status-awaiting";case"PAYMENT_FAILED":return"status-payment-failed";case"CANCELLED":return"status-cancelled";case"RE_SCHEDULED":return"status-rescheduled";default:return"status-default"}}formatDoctorName(e){return e?`Dr. ${e.replace(/^(dr\.?\s*)/i,"").trim()}`:""}tabClick(e){var n=this;return(0,d.A)(function*(){n.activeTab=e.index})()}openConference(e){this.router.navigate(["/home/appointment-details"],{state:{appointmentDetails:e}})}viewReceipt(e){this.router.navigate(["/home/appointment-confirmed"],{state:{appointment:e,navigationFrom:"Appointment-details"}})}loadBookingAppointmentDetails(){return(0,d.A)(function*(){})()}pickerOpen(e){this.datePickerBox=e,this.datePickerBox.open()}openFamilyMemberPopUp(){this.hospital=null,this.doctor=null,this.specialist=null,this.dateOfAppointment=null,this.slots=void 0,this.timeOfAppointment=null,this.isVideo=!1,this.isHiddenFees=!0,this.isHidden=!0,this.isNewPatient=!1,this.checkRegisteredPatient=!1,this.hideHospital=!0,this.timeSlotArray.length=0,this.timeSlotEvening.length=0,this.timeSlotMorning.length=0,this.timeSlotAfternoon.length=0,this.showSpinnerForSlotLoading=!1,this.hideAppointmentOptions=!0,this.router.navigate(["."],{relativeTo:this.route,queryParams:{familyMemberID:null}}),this.toFamilymember=!0,setTimeout(()=>{this.router.navigate(["/home/family-member-form"],{state:{isAppointment:!0}})},700)}getFamilyMemberId(e){this.hospital=null,this.doctor=null,this.specialist=null,this.dateOfAppointment=null,this.slots=void 0,this.timeOfAppointment=null,this.isVideo=!1,this.isHiddenFees=!0,this.checkRegisteredPatient=!1,this.mrn=null,this.isHidden=!0,this.isNewPatient=!1,this.timeSlotArray.length=0,this.timeSlotEvening.length=0,this.timeSlotMorning.length=0,this.timeSlotAfternoon.length=0,this.showSpinnerForSlotLoading=!1,this.hideHospital=!1,this.familyMemberId=e._id,this.familyMemberPhone=e.phone,this.familyMemberName=e.fullName,this.selectedFamilyMemberDetails=e,this.familyMemberPhone||(this.familyMemberPhone=this.user.phone)}getFamilyMembers(){var e=this;return(0,d.A)(function*(){let n;n=e.draftAppointment?"/familyMember/"+e.draftAppointment.familyMemberId:"/familyMember/?userId="+e.user.id,yield e.httpService.get(n,!0).then(o=>{if(""!==o)if(e.draftAppointment)e.familyMembers.push(o),e.familyMember=e.familyMembers[0];else{e.familyMembers=o,e.globalFamilyMemberService.loadFamilyMembers(o);const i=e.globalFamilyMemberService.getSelectedMember();i&&(e.selectedGlobalFamilyMember=i),1===e.familyMembers.length&&(e.familyMember=e.familyMembers[0],e.hideHospital=!1,e.getFamilyMemberId(e.familyMembers[0]))}}).catch(o=>{})})()}getRecentlyAddedFamilyMember(){var e=this;return(0,d.A)(function*(){const n="/familyMember/?userId="+e.user.id;yield e.httpService.get(n).then(o=>{o&&(e.familyMembers=o.reverse(),e.familyMember=e.familyMembers[0],e.familyMemberId=o[0]._id,e.familyMemberPhone=o[0].phone,e.familyMemberName=o[0].fullName,e.selectedFamilyMemberDetails=o[0])}).catch(o=>{})})()}hospitalPreference(){this.hideHospitalOptions=!0,setTimeout(()=>{this.router.navigate(["/home/hospital-preference"])},700)}getHospitalByPreference(){var e=this;return(0,d.A)(function*(){const n="/user/"+e.user.id;yield e.httpService.get(n).then(o=>{if(o)if(o.data.preference.hospitalPreferences.length>0){let i=[];for(let r=0;r<e.hospitals.length;r++)for(let c=0;c<o.data.preference.hospitalPreferences.length;c++)if(e.hospitals[r]._id===o.data.preference.hospitalPreferences[c].hospitalId){i.push(e.hospitals[r]);break}if(e.hospitals.length=0,e.hospitals=i,e.draftAppointment)for(let r=0;r<e.hospitals.length;r++)e.hospitals[r].name===e.draftAppointment.hospital.name&&(e.hospital=e.hospitals[r])}else e.getHospitals()}).catch(o=>{e.getHospitals()})})()}getHospitals(){var e=this;return(0,d.A)(function*(){let n="/hospital/?active=true";e.platform.is("capacitor")?n+="&parentId=33":e.storageService.get("parentId")&&(n+="&parentId="+e.storageService.get("parentId")),yield e.httpService.get(n).then(o=>{if(o.length>0)return e.hospitals=o,o;e.httpService.get("/hospital/?active=true").then(r=>{if(r.length>0)return e.hospitals=r,r})}).catch(o=>{})})()}getHospitalsById(e){var n=this;return(0,d.A)(function*(){yield n.httpService.get("/hospital/?active=true").then(i=>{if(i.length>0){for(let r=0;r<i.length;r++)i[r].parentId===e&&i[r].parentId!==i[r].entityId&&n.hospitals.push(i[r]);return i}}).catch(i=>{})})()}getSpecialists(e){var n=this;return(0,d.A)(function*(){n.doctor=null,n.dateOfAppointment=null,n.slots=void 0,n.timeOfAppointment=null,n.isHiddenFees=!0,n.hospitalCode=e.code,n.hospitalId=e._id,n.hospitalName=e.name,n.gateWayKey=e.paymentGatewayDetails.key,n.getFamilyMemberHospitalAccount();const o="/speciality/?hospitalCode="+n.hospitalCode;yield n.httpService.get(o).then(i=>{""!==i&&(n.specialityList=i.data.specialities)}).catch(i=>{n.utilityService.presentAlert("Fetching Error","No specialty found.")})})()}getDoctors(e){var n=this;return(0,d.A)(function*(){if(!n.isVideo)return;n.draftAppointment||(n.doctor=null,n.specialist=null,n.dateOfAppointment=null,n.slots=void 0,n.timeOfAppointment=null,n.isHiddenFees=!0,n.doctors.length=0,n.doctorArray.length=0,n.isHidden=!0,n.timeSlotArray.length=0,n.timeSlotEvening.length=0,n.timeSlotMorning.length=0,n.timeSlotAfternoon.length=0,n.checkRegisteredPatient=!1,n.mrn=null,n.isNewPatient=!1,n.showSpinnerForSlotLoading=!1),n.hospitalCode=e.code,n.hospitalId=e._id,n.hospitalName=e.name,n.isPaymentRequired=e.paymentRequired,n.selectedHospitalDetails=e,n.gateWayKey=n.draftAppointment?n.draftAppointment.paymentDetails.gatewayKey:e.paymentGatewayDetails.key,n.getFamilyMemberHospitalAccount();const o="/doctor/?hospitalCode="+n.hospitalCode;yield n.httpService.getInBackground(o,!0).then(i=>{let r;if(i.data&&i.data.doctors)r=i.data.doctors;else{if(!i.doctors)return void console.error("Could not find doctors array in response");r=i.doctors}if("videoConsultation"===n.isVideo?r=r.filter(function(c){return"0"!==c.canDoVideoConsultation}):"atTheHospital"===n.isVideo&&(r=r.filter(function(c){return c.canDoVideoConsultation="0",c})),r&&r.length>0){if(n.doctors=r.slice(0),n.doctorArray=r.slice(0),n.doctors.length>=10&&(n.isOptionGroup=!1,n.isSingleDoctor=!1),n.doctors.length>1&&n.doctors.length<10){n.isOptionGroup=!0,n.isSingleDoctor=!1;let c=n.doctors,M=[...new Set(c.map(_=>_.specialityName))].map(_=>({name:_,doctors:c}));c.forEach(_=>{const O=M.find(D=>D.name===_.specialityName);O?O.doctors.push(_):console.error(`Speciality '${_.specialityName}' not found in result.`)}),n.doctorGroups=M}if(1===n.doctors.length&&(n.isOptionGroup=!1,n.isSingleDoctor=!0,n.doctor=n.doctorArray[0],n.getCurrentDoctor(n.doctor)),n.draftAppointment){for(let c=0;c<n.doctors.length;c++)if(n.doctors[c].specialityName===n.draftAppointment.specialityName){n.specialist=n.doctors[c];break}for(let c=0;c<n.doctorArray.length;c++)if(n.doctorArray[c].doctorName===n.draftAppointment.doctorName){n.doctor=n.doctorArray[c];break}}}}).catch(i=>{console.error("Error fetching doctors:",i)})})()}getDoctorsArray(e,n){this.doctor=null,this.dateOfAppointment=null,this.slots=void 0,this.timeOfAppointment=null,this.isHiddenFees=!0,this.timeSlotArray.length=0,this.selectedDoctorData.doctorId="",this.timeSlotEvening.length=0,this.timeSlotMorning.length=0,this.timeSlotAfternoon.length=0,this.showSpinnerForSlotLoading=!1,this.doctorArray.length=0,this.specialityCode=e,this.specialityName=n;for(let o=0;o<this.doctors.length;o++)e===this.doctors[o].specialityCode&&this.doctorArray.push(this.doctors[o])}getConsultationFee(e,n){var o=this;return(0,d.A)(function*(){const i="/doctor/?id="+e+"&hospitalCode="+n;yield o.httpService.get(i).then(r=>{if(r){const c=r.data||r;o.consultation=c.consultationCharge,o.videoConsultation=c.videoConsultationCharge}}).catch(r=>{console.error("Error fetching consultation fee:",r)})})()}getCurrentDoctor(e){var n=this;return(0,d.A)(function*(){n.selectedDoctorData.doctorId=e.doctorId,n.selectedDoctorData.doctorName=e.doctorName,n.selectedDoctorData.canDoVideoConsultation="0"!==e.canDoVideoConsultation,n.specialityCode=e.specialityCode,n.specialityName=e.specialityName,yield n.getConsultationFee(n.selectedDoctorData.doctorId,n.hospitalCode),n.dateOfAppointment=null,n.timeOfAppointment=null,n.fees=null,n.slots=void 0,n.timeSlotArray.length=0,n.timeSlotEvening.length=0,n.timeSlotMorning.length=0,n.timeSlotAfternoon.length=0,n.showSpinnerForSlotLoading=!1,n.timeSlotAvailable=!1})()}setTimeforSpinner(){return this.timeOut=setTimeout(()=>{0===this.timeSlotEvening.length&&0===this.timeSlotMorning.length&&0===this.timeSlotAfternoon.length&&(this.showSpinnerForSlotLoading=!0)},1e3),this.timeOut}getTimeSlot(){var e=this;return(0,d.A)(function*(){let n;e.timeSlotAvailable=!1,e.setTimeforSpinner(),e.draftAppointment||(e.slots=void 0,e.timeOfAppointment=null,e.isHiddenFees=!0),e.timeSlotEvening.length=0,e.timeSlotMorning.length=0,e.timeSlotAfternoon.length=0,e.timeSlotNight.length=0,e.selectedDoctorData.doctorId=e.selectedDoctorData.doctorId?e.selectedDoctorData.doctorId:e.draftAppointment.doctorId,e.hospitalCode=e.hospitalCode?e.hospitalCode:e.draftAppointment.hospital.code,e.dateOfAppointment=e.dateOfAppointment?new Date(e.dateOfAppointment):new Date(e.draftAppointment.appointmentDate),n="videoConsultation"===e.isVideo;const o="/appointment/slot/?hospitalCode="+e.hospitalCode+"&doctorId="+e.selectedDoctorData.doctorId+"&appointmentDate="+e.utilityService.toISODateTime(e.dateOfAppointment)+"&videoConsultationHoursOnly="+n;yield e.httpService.get(o).then(i=>{if(e.showSpinnerForSlotLoading=!1,i)if(i.data.Evening||i.data.Night||i.data.Afternoon||i.data.Morning){if(e.timeSlotAvailable=!0,e.isHidden=!1,document.getElementById("noSlotsAvailable").textContent=null,document.getElementById("noSlotsAvailable").style.marginTop="0",i.data.Evening)for(let r=0;r<i.data.Evening.length;r++)!0===i.data.Evening[r].available&&e.timeSlotEvening.push(i.data.Evening[r]);if(i.data.Night)for(let r=0;r<i.data.Night.length;r++)!0===i.data.Night[r].available&&e.timeSlotEvening.push(i.data.Night[r]);if(i.data.Afternoon)for(let r=0;r<i.data.Afternoon.length;r++)!0===i.data.Afternoon[r].available&&e.timeSlotAfternoon.push(i.data.Afternoon[r]);if(i.data.Morning)for(let r=0;r<i.data.Morning.length;r++)!0===i.data.Morning[r].available&&e.timeSlotMorning.push(i.data.Morning[r])}else e.showSpinnerForSlotLoading=!1,document.getElementById("noSlotsAvailable").textContent="No slots available",document.getElementById("noSlotsAvailable").style.marginBottom="6%",e.timeSlotAvailable=!1,clearTimeout(e.timeOut)}).catch(i=>{e.showSpinnerForSlotLoading=!1,e.timeSlotAvailable=!1,clearTimeout(e.timeOut),e.utilityService.presentAlert("Error!","Time slots not available.")})})()}getFamilyMemberHospitalAccount(){var e=this;return(0,d.A)(function*(){const n="/familyMemberHospitalAccount/?familyMemberId="+e.familyMemberId+"&hospitalCode="+e.hospitalCode;yield e.httpService.get(n).then(o=>{o.length>0?e.isHidden=!0:e.getHospitalAccountInformation()}).catch(o=>{})})()}openLinkPatient(){this.router.navigate(["/home/select-patient"],{state:{hospitalAccountInfo:this.hospitalAccount,familyMemberId:this.familyMemberId,familyMemberName:this.familyMemberName,hospitalCode:this.hospitalCode,hospitalId:this.hospitalId,hospitalName:this.hospitalName,phone:this.familyMemberPhone,userId:this.user.id,selectedPatientMrn:this.mrn}})}getHospitalAccountInformation(){var e=this;return(0,d.A)(function*(){const n="/familyMemberHospitalAccount/patient/?phoneNo="+e.familyMemberPhone+"&hospitalCode="+e.hospitalCode;yield e.httpService.get(n).then(o=>{e.checkRegisteredPatient=!0,o.data.patients&&o.data.patients.length>0?(e.hospitalAccount=o.data.patients,e.checkRegisteredPatient=!0):(e.isNewPatient=!1,e.isHidden=!0,e.checkRegisteredPatient=!1)}).catch(o=>{})})()}getConsultationType(e){var n=this;return(0,d.A)(function*(){n.familyMember&&(n.isHiddenFees=!1,n.doctor&&(yield n.getCurrentDoctor(n.doctor)),n.dateOfAppointment=null,n.slots=void 0,n.timeOfAppointment=null,n.isHiddenFees=!0,n.timeSlotArray.length=0,n.timeSlotEvening.length=0,n.timeSlotMorning.length=0,n.timeSlotAfternoon.length=0,n.isBookingDisable=!0,n.hospital&&(yield n.getDoctors(n.hospital)),document.getElementById("noSlotsAvailable").textContent=null,document.getElementById("noSlotsAvailable").style.marginTop="0",n.timeOfAppointment&&(n.isBookingDisable=!1),"videoConsultation"===e?n.consultationType=n.videoConsultation:"atTheHospital"===e&&(n.draftAppointment&&n.getConsultationFee(n.draftAppointment.doctorId,n.draftAppointment.hospital.code),n.consultationType=n.consultation))})()}onRadioSelected(e){this.timeOfAppointment=null,"Morning"===e?(this.timeSlotArray=[],this.timeSlotArray=this.timeSlotMorning):"Afternoon"===e?(this.timeSlotArray=[],this.timeSlotArray=this.timeSlotAfternoon):(this.timeSlotArray=[],this.timeSlotArray=this.timeSlotEvening),setTimeout(()=>{this.timeSelect.open()},1)}scrollToBottom(){this.isBookingDisable=!this.isVideo;const e=document.getElementById("dummyDiv");null==e||e.scrollIntoView({behavior:"smooth",block:"end"}),"videoConsultation"===this.isVideo?this.consultationType=this.videoConsultation:"atTheHospital"===this.isVideo&&(this.draftAppointment&&this.getConsultationFee(this.draftAppointment.doctorId,this.draftAppointment.hospital.code),this.consultationType=this.consultation),this.isHiddenFees=!1}getConsentForm(){if(!this.timeOfAppointment.time)return void this.utilityService.presentAlert("Select time slot","Please select a time slot.");if(!this.isVideo)return void this.utilityService.presentAlert("Select consultation type","Please select a consultation type.");this.isPaymentRequired||(this.consultationType.price=0);const e={familyMemberId:this.familyMemberId,hospitalCode:this.hospitalCode,doctorId:this.selectedDoctorData.doctorId,doctorName:this.selectedDoctorData.doctorName,specialityCode:this.specialityCode,specialityName:this.specialityName,appointmentDate:this.utilityService.toISODateTime(this.dateOfAppointment),appointmentTime:this.timeOfAppointment.time,videoConsultation:"videoConsultation"===this.isVideo,paymentDetails:{gatewayKey:this.gateWayKey},consultationCharge:this.consultationType,hospitalName:this.hospitalName,patientName:this.familyMemberName};"videoConsultation"===this.isVideo?this.router.navigate(["/home/consent-form"],{state:{details:{patientName:this.familyMemberName,patientDOB:this.selectedFamilyMemberDetails.dob,familyMemberId:this.familyMemberId,hospitalCode:this.hospitalCode,hospitalName:this.hospitalName,speciality:this.specialityName,doctorName:this.selectedDoctorData.doctorName,hospitalContactNumber:this.selectedHospitalDetails.contactDetails.phone,appointment:e}}}):this.router.navigate(["/home/confirm-appointment"],{state:{appointment:e}})}setupGlobalFamilyMemberSubscription(){let e=!0;this.subscriptions.add(this.globalFamilyMemberService.selectedFamilyMember$.subscribe(o=>{this.selectedGlobalFamilyMember=o,o&&(this.autoSelectGlobalFamilyMember(o),e||(this.appointmentToday=[],this.appointmentUpcoming=[],this.appointmentPast=[],this.getSavedAppointments(),this.resetAppointmentForm()),e=!1)}));const n=this.globalFamilyMemberService.getSelectedMember();n&&(this.selectedGlobalFamilyMember=n,this.autoSelectGlobalFamilyMember(n))}autoSelectGlobalFamilyMember(e){if(!this.familyMembers||0===this.familyMembers.length)return;const n=this.globalFamilyMemberService.getMemberId(e),o=this.familyMembers.find(i=>i._id===n||i.id===n);o&&(this.familyMember=o,this.getFamilyMemberId(o),this.familyMemberId=o._id,this.familyMemberPhone=o.phone||this.user.phone,this.familyMemberName=o.fullName,this.selectedFamilyMemberDetails=o)}resetAppointmentForm(){this.hospital=null,this.doctor=null,this.specialist=null,this.dateOfAppointment=null,this.slots=void 0,this.timeOfAppointment=null,this.isVideo=null,this.isHiddenFees=!0,this.isHidden=!0,this.timeSlotArray.length=0,this.timeSlotEvening.length=0,this.timeSlotMorning.length=0,this.timeSlotAfternoon.length=0,this.showSpinnerForSlotLoading=!1}getInitials(e){if(!e)return"?";const n=e.trim().split(" ").filter(o=>o.length>0);return 1===n.length?n[0].substring(0,2).toUpperCase():(n[0].charAt(0)+n[n.length-1].charAt(0)).toUpperCase()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.pageNavService.cleanupBackButton("/appointment-list")}}return(a=p).\u0275fac=function(e){return new(e||a)(t.rXU(E.Ix),t.rXU(I.q9),t.rXU(w.k),t.rXU(x.Q),t.rXU(L.n),t.rXU(U.k),t.rXU(I.OD),t.rXU(h.Xi),t.rXU(E.nX),t.rXU(B.o),t.rXU(x.Q),t.rXU(G.V),t.rXU(H.b))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-appointment-list"]],viewQuery:function(e,n){if(1&e&&t.GBs(j,5),2&e){let o;t.mGM(o=t.lsd())&&(n.timeSelect=o.first)}},standalone:!0,features:[t.Jv_([{provide:P.MJ,useClass:T},{provide:P.de,useValue:F},{provide:u.U$,useValue:{appearance:"outline"}}]),t.aNF],decls:21,vars:10,consts:[[1,"appointment-list-page"],[1,"container"],[1,"header"],[1,"subtitle"],[1,"main-card"],["mat-align-tabs","center",3,"selectedTabChange","selectedIndex"],[3,"label"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","appointments-list",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end",1,"fab-new-appointment"],["aria-label","Book new appointment",3,"click"],["name","add"],[1,"loading-container"],["name","crescent"],[1,"loading-text"],[1,"empty-state"],["name","calendar-clear-outline",1,"empty-icon"],[1,"appointments-list"],["class","appointment-card",3,"animation-delay","click",4,"ngFor","ngForOf"],[1,"appointment-card",3,"click"],[1,"card-main"],[1,"card-left"],["name","videocam","class","consultation-icon video",4,"ngIf"],["name","medical","class","consultation-icon in-person",4,"ngIf"],[1,"card-content"],[1,"doctor-info"],[1,"doctor-name-row"],[1,"doctor-name"],[1,"specialty"],[1,"appointment-info"],[1,"date-time"],["name","calendar-outline"],[4,"ngIf"],[1,"card-right"],["fill","clear","size","small","class","receipt-button",3,"click",4,"ngIf"],["name","videocam",1,"consultation-icon","video"],["name","medical",1,"consultation-icon","in-person"],["fill","clear","size","small",1,"receipt-button",3,"click"],["name","receipt-outline","slot","icon-only"],["name","calendar-outline",1,"empty-icon"],["expand","block",1,"book-button",3,"click"],["name","add-circle-outline","slot","start"],[1,"section-header"],["name","time-outline"],["class","appointment-card today-highlight",3,"animation-delay","click",4,"ngFor","ngForOf"],[1,"appointment-card","today-highlight",3,"click"],["class","section-header",4,"ngIf"],["name","calendar-number-outline"]],template:function(e,n){1&e&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"header",2)(3,"h1"),t.EFF(4,"Appointments"),t.k0s(),t.j41(5,"p",3),t.EFF(6,"Manage your upcoming and past appointments"),t.k0s()(),t.j41(7,"div",4)(8,"mat-tab-group",5),t.bIt("selectedTabChange",function(i){return n.tabClick(i)}),t.j41(9,"mat-tab",6),t.DNE(10,V,4,0,"div",7)(11,Y,6,0,"div",8)(12,J,2,1,"div",9),t.k0s(),t.j41(13,"mat-tab",6),t.DNE(14,Q,4,0,"div",7)(15,Z,9,0,"div",8)(16,ot,6,1,"div",9)(17,mt,3,2,"div",9),t.k0s()()()(),t.j41(18,"ion-fab",10)(19,"ion-fab-button",11),t.bIt("click",function(){return n.goToBookAppointment()}),t.nrm(20,"ion-icon",12),t.k0s()()()),2&e&&(t.R7$(8),t.Y8G("selectedIndex",n.activeTab),t.R7$(),t.Y8G("label",n.isMobile?"Past":"Past Appointments"),t.R7$(),t.Y8G("ngIf",!n.noAppointments&&0===n.appointmentPast.length),t.R7$(),t.Y8G("ngIf",n.noAppointments),t.R7$(),t.Y8G("ngIf",n.appointmentPast.length>0),t.R7$(),t.Y8G("label",n.isMobile?"Upcoming":"Upcoming Appointments"),t.R7$(),t.Y8G("ngIf",!n.noUpcomingAppointments&&0===n.appointmentToday.length&&0===n.appointmentUpcoming.length),t.R7$(),t.Y8G("ngIf",n.noUpcomingAppointments),t.R7$(),t.Y8G("ngIf",n.appointmentToday.length>0),t.R7$(),t.Y8G("ngIf",n.appointmentUpcoming.length>0))},dependencies:[h.bv,h.Jm,h.W9,h.Q8,h.YW,h.iq,h.w2,y.MD,y.Sq,y.bT,y.vh,m.T8,m.mq,g.YN],styles:[".appointment-list-page[_ngcontent-%COMP%]{--padding-top: var(--mc-spacing-xl);--padding-bottom: 100px;--background: var(--mc-bg-primary)}.appointment-list-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:0 var(--mc-spacing-lg);padding-bottom:80px}@media (max-width: 600px){.appointment-list-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-md);padding-bottom:80px}}.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-xl);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-lg);font-weight:600;color:var(--mc-text-primary);margin:0 0 var(--mc-spacing-xs) 0}.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);color:var(--mc-text-secondary);margin:0;font-weight:400}@media (max-width: 600px){.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-lg)}.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-md)}.appointment-list-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm)}}.appointment-list-page[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]{background:var(--mc-bg-card);border-radius:var(--mc-radius-lg);padding:var(--mc-spacing-md) var(--mc-spacing-lg);box-shadow:var(--mc-shadow-sm);border:1px solid var(--mc-card-border);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out .1s both}@media (max-width: 600px){.appointment-list-page[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]{padding:var(--mc-spacing-sm) var(--mc-spacing-md)}}.appointment-list-page[_ngcontent-%COMP%]   .appointments-list[_ngcontent-%COMP%]{margin-top:var(--mc-spacing-sm)}.appointment-list-page[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-xs);margin:var(--mc-spacing-lg) 0 var(--mc-spacing-sm) 0;padding:var(--mc-spacing-xs) 0;font-size:var(--mc-font-body-md);font-weight:600;color:var(--mc-text-secondary)}.appointment-list-page[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-sm);color:var(--mc-color-primary-500)}.appointment-list-page[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]:first-child{margin-top:var(--mc-spacing-sm)}.appointment-list-page[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]{background:var(--mc-card-bg);border:1px solid var(--mc-card-border);border-radius:var(--mc-radius-md);padding:var(--mc-spacing-sm) var(--mc-spacing-md);margin-bottom:var(--mc-spacing-sm);cursor:pointer;transition:all var(--mc-transition-base);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out both}.appointment-list-page[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]:hover{box-shadow:var(--mc-shadow-md);transform:translateY(-1px);border-color:var(--mc-color-primary-300)}.appointment-list-page[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:var(--mc-shadow-sm)}.appointment-list-page[_ngcontent-%COMP%]   .appointment-card.today-highlight[_ngcontent-%COMP%]{border-left:3px solid var(--mc-color-primary-500);background:var(--mc-color-primary-50)}.appointment-list-page[_ngcontent-%COMP%]   .appointment-card.today-highlight[_ngcontent-%COMP%]   .consultation-icon[_ngcontent-%COMP%]{color:var(--mc-color-primary-600)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .appointment-card[_ngcontent-%COMP%]{padding:var(--mc-spacing-sm)}}.appointment-list-page[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--mc-spacing-md)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--mc-spacing-sm)}}.appointment-list-page[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-md);flex:1;min-width:0}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]{gap:var(--mc-spacing-sm)}}.appointment-list-page[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-sm);flex-shrink:0}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]{justify-content:space-between;width:100%}}.appointment-list-page[_ngcontent-%COMP%]   .consultation-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.appointment-list-page[_ngcontent-%COMP%]   .consultation-icon.video[_ngcontent-%COMP%]{color:var(--mc-color-primary-600)}.appointment-list-page[_ngcontent-%COMP%]   .consultation-icon.in-person[_ngcontent-%COMP%]{color:var(--mc-color-info-600)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .consultation-icon[_ngcontent-%COMP%]{font-size:28px}}.appointment-list-page[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--mc-spacing-xs);flex:1;min-width:0}.appointment-list-page[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.appointment-list-page[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   .doctor-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--mc-spacing-sm);flex-wrap:nowrap}.appointment-list-page[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   .doctor-name[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);font-weight:600;color:var(--mc-text-primary);line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;min-width:0}.appointment-list-page[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   .specialty[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm);color:var(--mc-text-secondary);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.appointment-list-page[_ngcontent-%COMP%]   .appointment-info[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--mc-spacing-xs);font-size:var(--mc-font-body-sm);color:var(--mc-text-secondary);font-weight:500}.appointment-list-page[_ngcontent-%COMP%]   .appointment-info[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .appointment-info[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]{font-size:var(--mc-font-body-xs)}}.appointment-list-page[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:4px var(--mc-spacing-sm);border-radius:var(--mc-radius-sm);font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;line-height:1.2;flex-shrink:0}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-closed[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background-color:var(--mc-color-success-100);color:var(--mc-color-success-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-scheduled[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-upcoming[_ngcontent-%COMP%]{background-color:var(--mc-color-primary-100);color:var(--mc-color-primary-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-started[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-in-progress[_ngcontent-%COMP%]{background-color:var(--mc-color-info-100);color:var(--mc-color-info-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-default[_ngcontent-%COMP%]{background-color:var(--mc-color-gray-100);color:var(--mc-color-gray-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-payment-pending[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-awaiting[_ngcontent-%COMP%]{background-color:var(--mc-color-warning-100);color:var(--mc-color-warning-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-payment-failed[_ngcontent-%COMP%], .appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background-color:var(--mc-color-error-100);color:var(--mc-color-error-800)}.appointment-list-page[_ngcontent-%COMP%]   .status-badge.status-rescheduled[_ngcontent-%COMP%]{background-color:var(--mc-color-purple-100);color:var(--mc-color-purple-800)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px var(--mc-spacing-xs);font-size:9px;letter-spacing:.3px}}.appointment-list-page[_ngcontent-%COMP%]   .receipt-button[_ngcontent-%COMP%]{--padding-start: var(--mc-spacing-xs);--padding-end: var(--mc-spacing-xs);--color: var(--mc-color-primary-600);margin:0;width:32px;height:32px}.appointment-list-page[_ngcontent-%COMP%]   .receipt-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.appointment-list-page[_ngcontent-%COMP%]   .receipt-button[_ngcontent-%COMP%]:hover{--color: var(--mc-color-primary-700)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .receipt-button[_ngcontent-%COMP%]{width:28px;height:28px}.appointment-list-page[_ngcontent-%COMP%]   .receipt-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--mc-spacing-6) var(--mc-spacing-4);color:var(--mc-text-tertiary);animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:var(--mc-spacing-lg);color:var(--mc-color-gray-400)}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--mc-spacing-sm) 0;font-size:var(--mc-font-heading-md);color:var(--mc-text-primary);font-weight:600}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--mc-spacing-lg) 0;font-size:var(--mc-font-body-md);color:var(--mc-text-secondary)}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .book-button[_ngcontent-%COMP%]{max-width:280px;margin:var(--mc-spacing-lg) auto 0;--border-radius: var(--mc-radius-md);--padding-top: var(--mc-spacing-md);--padding-bottom: var(--mc-spacing-md);font-weight:600;text-transform:none;letter-spacing:.3px}.appointment-list-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .book-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:var(--mc-spacing-xs)}.appointment-list-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;gap:var(--mc-spacing-md);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.appointment-list-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:40px;height:40px;--color: var(--mc-color-primary-500)}.appointment-list-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--mc-text-secondary);font-size:var(--mc-font-body-md);font-weight:500;margin:0}.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{--mat-tab-header-label-text-size: var(--mc-font-body-md);--mat-tab-header-label-text-font-weight: var(--mc-font-weight-medium);--mat-tab-header-label-text-color: var(--mc-text-secondary);--mat-tab-header-active-label-text-color: var(--mc-color-primary-600);--mat-tab-header-active-focus-indicator-color: var(--mc-color-primary-500);--mat-tab-header-active-hover-indicator-color: var(--mc-color-primary-100);--mat-tab-header-inactive-label-text-color: var(--mc-text-tertiary);--mat-tab-header-inactive-hover-label-text-color: var(--mc-text-secondary);--mat-tab-header-divider-color: var(--mc-border-primary);margin:0;font-family:inherit}.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{text-transform:none;letter-spacing:.3px;min-width:120px}@media (max-width: 768px){.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{min-width:80px;padding:0 var(--mc-spacing-sm)}}.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]   .mat-mdc-tab-label[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);font-weight:var(--mc-font-weight-medium)}.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]   .mat-mdc-tab-body-wrapper[_ngcontent-%COMP%]{padding:0}.appointment-list-page[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]   .mat-mdc-tab-body-content[_ngcontent-%COMP%]{padding:var(--mc-spacing-sm) 0 0;overflow-x:hidden}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]{transform:translateY(-85px);z-index:1001}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background: var(--mc-color-primary-500);--background-activated: var(--mc-color-primary-700);--background-hover: var(--mc-color-primary-600);--background-focused: var(--mc-color-primary-600);--color: white;--box-shadow: 0 4px 12px rgba(0, 37, 130, .3);width:56px;height:56px}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);transition:transform var(--mc-transition-base)}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 767px){.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{width:52px;height:52px}.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}}@supports (padding-bottom: env(safe-area-inset-bottom)){.appointment-list-page[_ngcontent-%COMP%]   .fab-new-appointment[_ngcontent-%COMP%]{transform:translateY(calc(-85px - env(safe-area-inset-bottom)))}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]}),p})()},8135:(R,b,l)=>{l.d(b,{V:()=>y});var d=l(4438),P=l(600),h=l(9012);let y=(()=>{var f;class A{constructor(m,g){this.platform=m,this.router=g,this.activeSubscriptions=new Map}setupBackButton(m,g){Array.isArray(m)?m.forEach(u=>{this.setupSingleBackButton(u.route,u.handler)}):"string"==typeof m&&g&&this.setupSingleBackButton(m,g)}setupSingleBackButton(m,g){this.cleanupBackButton(m);const u=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===m&&g()});this.activeSubscriptions.set(m,u)}cleanupBackButton(m){const g=this.activeSubscriptions.get(m);g&&(g.unsubscribe(),this.activeSubscriptions.delete(m))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((m,g)=>{m.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(m="/home"){window.history.length>1?window.history.back():this.router.navigate([m])}smartNavigateBack(m){const u={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[m];u?this.router.navigate([u]):this.navigateBack()}}return(f=A).\u0275fac=function(m){return new(m||f)(d.KVO(P.OD),d.KVO(h.Ix))},f.\u0275prov=d.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),A})()}}]);