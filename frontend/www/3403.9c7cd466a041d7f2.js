"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3403],{9164:(Ce,K,O)=>{O.d(K,{cY:()=>V,FA:()=>Y,g:()=>ne,dM:()=>J,u:()=>u,Uj:()=>o,bD:()=>me,T9:()=>ce,Ku:()=>He,Bd:()=>we,zW:()=>F,p7:()=>he,eX:()=>G});const H=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],c=r+1<t.length,h=c?t[r+1]:0,b=r+2<t.length,w=b?t[r+2]:0;let d=(15&h)<<2|w>>6,N=63&w;b||(N=64,c||(d=64)),i.push(n[s>>2],n[(3&s)<<4|h>>4],n[d],n[N])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const b=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(b>>10)),e[i++]=String.fromCharCode(56320+(1023&b))}else{const s=t[n++],c=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&c)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const w=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,null==s||null==h||null==w||null==g)throw new U;i.push(s<<2|h>>4),64!==w&&(i.push(h<<4&240|w>>2),64!==g&&i.push(w<<6&192|g))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class U extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=H(t);return $.encodeByteArray(e,!0)}(t).replace(/\./g,"")},u=function(t){try{return $.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},P=()=>{try{return function k(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&u(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},ce=()=>{var t;return null===(t=P())||void 0===t?void 0:t.config};class V{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,i))}}}function we(){return typeof window<"u"||he()}function he(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F(){try{return"object"==typeof indexedDB}catch{return!1}}function G(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],c=s?function pe(t,e){return t.replace(De,(n,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new ne(r,`${this.serviceName}: ${c} (${r}).`,i)}}const De=/\{\$([^}]+)}/g;function me(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],c=e[r];if(ge(s)&&ge(c)){if(!me(s,c))return!1}else if(s!==c)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ge(t){return null!==t&&"object"==typeof t}function He(t){return t&&t._delegate?t._delegate:t}},3403:(Ce,K,O)=>{O.d(K,{g:()=>f.g,MF:()=>Qe,iF:()=>te,yi:()=>le,mq:()=>ne,SV:()=>F,HG:()=>Ze,yX:()=>J,j6:()=>pe,U6:()=>re,xZ:()=>ie,Mw:()=>Ae,om:()=>Y,Us:()=>De,Tj:()=>G,NM:()=>xe,Sx:()=>ge,Dk:()=>qe,Wp:()=>Oe,pN:()=>me,aP:()=>et,KO:()=>se,He:()=>tt});var S=O(467),x=O(4012);const R=[];var p=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(p||{});const H={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},Z=p.INFO,$={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},U=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=$[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};var f=O(9164),_=O(6749);class D{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function k(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}return null}).filter(n=>n).join(" ")}}const L="@firebase/app",X="0.14.3",v=new class T{constructor(e){this.name=e,this._logLevel=Z,this._logHandler=U,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in p))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?H[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...e),this._logHandler(this,p.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...e),this._logHandler(this,p.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,p.INFO,...e),this._logHandler(this,p.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,p.WARN,...e),this._logHandler(this,p.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...e),this._logHandler(this,p.ERROR,...e)}}("@firebase/app"),P="@firebase/app-compat",ae="@firebase/analytics-compat",de="@firebase/analytics",ce="@firebase/app-check-compat",ue="@firebase/app-check",V="@firebase/auth",ee="@firebase/auth-compat",a="@firebase/database",l="@firebase/data-connect",m="@firebase/database-compat",y="@firebase/functions",A="@firebase/functions-compat",I="@firebase/installations",C="@firebase/installations-compat",j="@firebase/messaging",E="@firebase/messaging-compat",z="@firebase/performance",W="@firebase/performance-compat",we="@firebase/remote-config",he="@firebase/remote-config-compat",Ue="@firebase/storage",ze="@firebase/storage-compat",Ve="@firebase/firestore",je="@firebase/ai",We="@firebase/firestore-compat",Ge="firebase",te="[DEFAULT]",Ke={[L]:"fire-core",[P]:"fire-core-compat",[de]:"fire-analytics",[ae]:"fire-analytics-compat",[ue]:"fire-app-check",[ce]:"fire-app-check-compat",[V]:"fire-auth",[ee]:"fire-auth-compat",[a]:"fire-rtdb",[l]:"fire-data-connect",[m]:"fire-rtdb-compat",[y]:"fire-fn",[A]:"fire-fn-compat",[I]:"fire-iid",[C]:"fire-iid-compat",[j]:"fire-fcm",[E]:"fire-fcm-compat",[z]:"fire-perf",[W]:"fire-perf-compat",[we]:"fire-rc",[he]:"fire-rc-compat",[Ue]:"fire-gcs",[ze]:"fire-gcs-compat",[Ve]:"fire-fst",[We]:"fire-fst-compat",[je]:"fire-vertex","fire-js":"fire-js",[Ge]:"fire-js-all"},F=new Map,G=new Map,J=new Map;function le(t,e){try{t.container.addComponent(e)}catch(n){v.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ne(t,e){t.container.addOrOverwriteComponent(e)}function Y(t){const e=t.name;if(J.has(e))return v.debug(`There were multiple attempts to register component ${e}.`),!1;J.set(e,t);for(const n of F.values())le(n,t);for(const n of G.values())le(n,t);return!0}function pe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function De(t,e,n=te){pe(t,e).clearInstance(n)}function re(t){return void 0!==t.options}function Ae(t){return!re(t)&&("authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t)}function ie(t){return null!=t&&void 0!==t.settings}function Ze(){J.clear()}const B=new f.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Se{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new x.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw B.create("app-deleted",{appName:this._name})}}function Ie(t,e){const n=(0,f.u)(t.split(".")[1]);null!==n?void 0!==JSON.parse(n).exp?1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`):console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`):console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`)}class Ye extends Se{constructor(e,n,i,r){const s=void 0===n.automaticDataCollectionEnabled||n.automaticDataCollectionEnabled,c={name:i,automaticDataCollectionEnabled:s};super(void 0!==e.apiKey?e:e.options,c,r),this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&Ie(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Ie(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,se(L,X,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xe(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw B.create("server-app-deleted")}}const Qe="12.3.0";function Oe(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i={name:te,automaticDataCollectionEnabled:!0,...e},r=i.name;if("string"!=typeof r||!r)throw B.create("bad-app-name",{appName:String(r)});if(n||(n=(0,f.T9)()),!n)throw B.create("no-options");const s=F.get(r);if(s){if((0,f.bD)(n,s.options)&&(0,f.bD)(i,s.config))return s;throw B.create("duplicate-app",{appName:r})}const c=new x.h1(r);for(const b of J.values())c.addComponent(b);const h=new Se(n,i,c);return F.set(r,h),h}function me(t,e={}){if((0,f.Bd)()&&!(0,f.p7)())throw B.create("invalid-server-app-environment");let n,i=e||{};if(t&&(re(t)?n=t.options:Ae(t)?i=t:n=t),void 0===i.automaticDataCollectionEnabled&&(i.automaticDataCollectionEnabled=!0),n||(n=(0,f.T9)()),!n)throw B.create("no-options");const r={...i,...n};if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==i.releaseOnDeref&&typeof FinalizationRegistry>"u")throw B.create("finalization-registry-not-supported",{});const c=""+(M=JSON.stringify(r),[...M].reduce((g,d)=>Math.imul(31,g)+d.charCodeAt(0)|0,0)),h=G.get(c);var M;if(h)return h.incRefCount(i.releaseOnDeref),h;const b=new x.h1(c);for(const M of J.values())b.addComponent(M);const w=new Ye(n,i,c,b);return G.set(c,w),w}function ge(t=te){const e=F.get(t);if(!e&&t===te&&(0,f.T9)())return Oe();if(!e)throw B.create("no-app",{appName:t});return e}function qe(){return Array.from(F.values())}function xe(t){return be.apply(this,arguments)}function be(){return(be=(0,S.A)(function*(t){let e=!1;const n=t.name;F.has(n)?(e=!0,F.delete(n)):G.has(n)&&t.decRefCount()<=0&&(G.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)})).apply(this,arguments)}function se(t,e,n){var i;let r=null!==(i=Ke[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),c=e.match(/\s|\//);if(s||c){const h=[`Unable to register library "${r}" with version "${e}":`];return s&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void v.warn(h.join(" "))}Y(new x.uA(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function et(t,e){if(null!==t&&"function"!=typeof t)throw B.create("invalid-log-argument");!function u(t,e){for(const n of R){let i=null;e&&e.level&&(i=H[e.level]),n.userLogHandler=null===t?null:(r,s,...c)=>{const h=c.map(b=>{if(null==b)return null;if("string"==typeof b)return b;if("number"==typeof b||"boolean"==typeof b)return b.toString();if(b instanceof Error)return b.message;try{return JSON.stringify(b)}catch{return null}}).filter(b=>b).join(" ");s>=(null!=i?i:r.logLevel)&&t({level:p[s].toLowerCase(),message:h,args:c,type:r.name})}}}(t,e)}function tt(t){!function o(t){R.forEach(e=>{e.setLogLevel(t)})}(t)}const Te="firebase-heartbeat-database",nt=1,Q="firebase-heartbeat-store";let q=null;function Be(){return q||(q=(0,_.P2)(Te,nt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Q)}catch(n){console.warn(n)}}}).catch(t=>{throw B.create("idb-open",{originalErrorMessage:t.message})})),q}function _e(){return(_e=(0,S.A)(function*(t){try{const n=(yield Be()).transaction(Q),i=yield n.objectStore(Q).get(Ne(t));return yield n.done,i}catch(e){if(e instanceof f.g)v.warn(e.message);else{const n=B.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});v.warn(n.message)}}})).apply(this,arguments)}function Me(t,e){return ye.apply(this,arguments)}function ye(){return(ye=(0,S.A)(function*(t,e){try{const i=(yield Be()).transaction(Q,"readwrite");yield i.objectStore(Q).put(e,Ne(t)),yield i.done}catch(n){if(n instanceof f.g)v.warn(n.message);else{const i=B.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});v.warn(i.message)}}})).apply(this,arguments)}function Ne(t){return`${t.name}!${t.options.appId}`}class ke{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new it(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return(0,S.A)(function*(){try{var n;const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ve();var i;if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(i=e._heartbeatsCache)||void 0===i?void 0:i.heartbeats)))return;if(e._heartbeatsCache.lastSentHeartbeatDate===c||e._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(e._heartbeatsCache.heartbeats.push({date:c,agent:s}),e._heartbeatsCache.heartbeats.length>30){const h=function Fe(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(h,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(r){v.warn(r)}})()}getHeartbeatsHeader(){var e=this;return(0,S.A)(function*(){try{var n;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const i=ve(),{heartbeatsToSend:r,unsentEntries:s}=function Le(t,e=1024){const n=[];let i=t.slice();for(const r of t){const s=n.find(c=>c.agent===r.agent);if(s){if(s.dates.push(r.date),Pe(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Pe(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(e._heartbeatsCache.heartbeats),c=(0,f.Uj)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=i,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),c}catch(i){return v.warn(i),""}})()}}function ve(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.A)(function*(){return!!(0,f.zW)()&&(0,f.eX)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,S.A)(function*(){if(yield e._canUseIndexedDBPromise){const i=yield function fe(t){return _e.apply(this,arguments)}(e.app);return null!=i&&i.heartbeats?i:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return(0,S.A)(function*(){if(yield n._canUseIndexedDBPromise){var r;const s=yield n.read();return Me(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return(0,S.A)(function*(){if(yield n._canUseIndexedDBPromise){var r;const s=yield n.read();return Me(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Pe(t){return(0,f.Uj)(JSON.stringify({version:2,heartbeats:t})).length}!function He(t){Y(new x.uA("platform-logger",e=>new D(e),"PRIVATE")),Y(new x.uA("heartbeat",e=>new ke(e),"PRIVATE")),se(L,X,t),se(L,X,"esm2020"),se("fire-js","")}("")},4012:(Ce,K,O)=>{O.d(K,{h1:()=>U,uA:()=>R});var S=O(467),x=O(9164);class R{constructor(o,u,f){this.name=o,this.instanceFactory=u,this.type=f,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(o){return this.instantiationMode=o,this}setMultipleInstances(o){return this.multipleInstances=o,this}setServiceProps(o){return this.serviceProps=o,this}setInstanceCreatedCallback(o){return this.onInstanceCreated=o,this}}const p="[DEFAULT]";class H{constructor(o,u){this.name=o,this.container=u,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(o){const u=this.normalizeInstanceIdentifier(o);if(!this.instancesDeferred.has(u)){const f=new x.cY;if(this.instancesDeferred.set(u,f),this.isInitialized(u)||this.shouldAutoInitialize())try{const _=this.getOrInitializeService({instanceIdentifier:u});_&&f.resolve(_)}catch{}}return this.instancesDeferred.get(u).promise}getImmediate(o){var u;const f=this.normalizeInstanceIdentifier(null==o?void 0:o.identifier),_=null!==(u=null==o?void 0:o.optional)&&void 0!==u&&u;if(!this.isInitialized(f)&&!this.shouldAutoInitialize()){if(_)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:f})}catch(D){if(_)return null;throw D}}getComponent(){return this.component}setComponent(o){if(o.name!==this.name)throw Error(`Mismatching Component ${o.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=o,this.shouldAutoInitialize()){if(function $(T){return"EAGER"===T.instantiationMode}(o))try{this.getOrInitializeService({instanceIdentifier:p})}catch{}for(const[u,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);try{const D=this.getOrInitializeService({instanceIdentifier:_});f.resolve(D)}catch{}}}}clearInstance(o=p){this.instancesDeferred.delete(o),this.instancesOptions.delete(o),this.instances.delete(o)}delete(){var o=this;return(0,S.A)(function*(){const u=Array.from(o.instances.values());yield Promise.all([...u.filter(f=>"INTERNAL"in f).map(f=>f.INTERNAL.delete()),...u.filter(f=>"_delete"in f).map(f=>f._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(o=p){return this.instances.has(o)}getOptions(o=p){return this.instancesOptions.get(o)||{}}initialize(o={}){const{options:u={}}=o,f=this.normalizeInstanceIdentifier(o.instanceIdentifier);if(this.isInitialized(f))throw Error(`${this.name}(${f}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _=this.getOrInitializeService({instanceIdentifier:f,options:u});for(const[D,k]of this.instancesDeferred.entries())f===this.normalizeInstanceIdentifier(D)&&k.resolve(_);return _}onInit(o,u){var f;const _=this.normalizeInstanceIdentifier(u),D=null!==(f=this.onInitCallbacks.get(_))&&void 0!==f?f:new Set;D.add(o),this.onInitCallbacks.set(_,D);const k=this.instances.get(_);return k&&o(k,_),()=>{D.delete(o)}}invokeOnInitCallbacks(o,u){const f=this.onInitCallbacks.get(u);if(f)for(const _ of f)try{_(o,u)}catch{}}getOrInitializeService({instanceIdentifier:o,options:u={}}){let f=this.instances.get(o);if(!f&&this.component&&(f=this.component.instanceFactory(this.container,{instanceIdentifier:(T=o,T===p?void 0:T),options:u}),this.instances.set(o,f),this.instancesOptions.set(o,u),this.invokeOnInitCallbacks(f,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,o,f)}catch{}var T;return f||null}normalizeInstanceIdentifier(o=p){return this.component?this.component.multipleInstances?o:p:o}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U{constructor(o){this.name=o,this.providers=new Map}addComponent(o){const u=this.getProvider(o.name);if(u.isComponentSet())throw new Error(`Component ${o.name} has already been registered with ${this.name}`);u.setComponent(o)}addOrOverwriteComponent(o){this.getProvider(o.name).isComponentSet()&&this.providers.delete(o.name),this.addComponent(o)}getProvider(o){if(this.providers.has(o))return this.providers.get(o);const u=new H(o,this);return this.providers.set(o,u),u}getProviders(){return Array.from(this.providers.values())}}},6749:(Ce,K,O)=>{O.d(K,{MR:()=>de,P2:()=>ae});var S=O(467);const x=(a,l)=>l.some(m=>a instanceof m);let R,p;const $=new WeakMap,U=new WeakMap,T=new WeakMap,o=new WeakMap,u=new WeakMap;let D={get(a,l,m){if(a instanceof IDBTransaction){if("done"===l)return U.get(a);if("objectStoreNames"===l)return a.objectStoreNames||T.get(a);if("store"===l)return m.objectStoreNames[1]?void 0:m.objectStore(m.objectStoreNames[0])}return v(a[l])},set:(a,l,m)=>(a[l]=m,!0),has:(a,l)=>a instanceof IDBTransaction&&("done"===l||"store"===l)||l in a};function X(a){return"function"==typeof a?function L(a){return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Z(){return p||(p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(a)?function(...l){return a.apply(P(this),l),v($.get(this))}:function(...l){return v(a.apply(P(this),l))}:function(l,...m){const y=a.call(P(this),l,...m);return T.set(y,l.sort?l.sort():[l]),v(y)}}(a):(a instanceof IDBTransaction&&function _(a){if(U.has(a))return;const l=new Promise((m,y)=>{const A=()=>{a.removeEventListener("complete",I),a.removeEventListener("error",C),a.removeEventListener("abort",C)},I=()=>{m(),A()},C=()=>{y(a.error||new DOMException("AbortError","AbortError")),A()};a.addEventListener("complete",I),a.addEventListener("error",C),a.addEventListener("abort",C)});U.set(a,l)}(a),x(a,function H(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(a,D):a)}function v(a){if(a instanceof IDBRequest)return function f(a){const l=new Promise((m,y)=>{const A=()=>{a.removeEventListener("success",I),a.removeEventListener("error",C)},I=()=>{m(v(a.result)),A()},C=()=>{y(a.error),A()};a.addEventListener("success",I),a.addEventListener("error",C)});return l.then(m=>{m instanceof IDBCursor&&$.set(m,a)}).catch(()=>{}),u.set(l,a),l}(a);if(o.has(a))return o.get(a);const l=X(a);return l!==a&&(o.set(a,l),u.set(l,a)),l}const P=a=>u.get(a);function ae(a,l,{blocked:m,upgrade:y,blocking:A,terminated:I}={}){const C=indexedDB.open(a,l),j=v(C);return y&&C.addEventListener("upgradeneeded",E=>{y(v(C.result),E.oldVersion,E.newVersion,v(C.transaction),E)}),m&&C.addEventListener("blocked",E=>m(E.oldVersion,E.newVersion,E)),j.then(E=>{I&&E.addEventListener("close",()=>I()),A&&E.addEventListener("versionchange",z=>A(z.oldVersion,z.newVersion,z))}).catch(()=>{}),j}function de(a,{blocked:l}={}){const m=indexedDB.deleteDatabase(a);return l&&m.addEventListener("blocked",y=>l(y.oldVersion,y)),v(m).then(()=>{})}const ce=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],V=new Map;function ee(a,l){if(!(a instanceof IDBDatabase)||l in a||"string"!=typeof l)return;if(V.get(l))return V.get(l);const m=l.replace(/FromIndex$/,""),y=l!==m,A=ue.includes(m);if(!(m in(y?IDBIndex:IDBObjectStore).prototype)||!A&&!ce.includes(m))return;const I=function(){var C=(0,S.A)(function*(j,...E){const z=this.transaction(j,A?"readwrite":"readonly");let W=z.store;return y&&(W=W.index(E.shift())),(yield Promise.all([W[m](...E),A&&z.done]))[0]});return function(E){return C.apply(this,arguments)}}();return V.set(l,I),I}!function k(a){D=a(D)}(a=>({...a,get:(l,m,y)=>ee(l,m)||a.get(l,m,y),has:(l,m)=>!!ee(l,m)||a.has(l,m)}))}}]);