"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9424],{9424:(k,x,s)=>{s.r(x),s.d(x,{VisitSummaryPage:()=>B});var C=s(467),M=s(9893),f=s(177),D=s(8176),_=s(2739),h=s(5083),w=s(4726),n=s(4438),d=s(9012),v=s(8023),E=s(600),z=s(8251),F=s(8135);function S(r,u){if(1&r&&(n.j41(0,"p",10),n.EFF(1),n.k0s()),2&r){const c=n.XpG();n.R7$(),n.Lme("",c.allDocuments.length," document",1!==c.allDocuments.length?"s":"","")}}function I(r,u){if(1&r){const c=n.RV6();n.j41(0,"ion-button",11),n.bIt("click",function(){n.eBV(c);const t=n.XpG();return n.Njj(t.toggleViewMode())}),n.nrm(1,"ion-icon",12),n.k0s()}if(2&r){const c=n.XpG();n.R7$(),n.Y8G("name","list"===c.viewMode?"grid-outline":"list-outline")}}function T(r,u){1&r&&(n.j41(0,"div",13),n.nrm(1,"ion-spinner",14),n.j41(2,"p",15),n.EFF(3,"Loading documents..."),n.k0s()())}function R(r,u){1&r&&(n.j41(0,"div",16),n.nrm(1,"ion-icon",17),n.j41(2,"p"),n.EFF(3,"No documents available for this visit"),n.k0s(),n.j41(4,"p",18),n.EFF(5,"Check back later or contact your healthcare provider"),n.k0s()())}function $(r,u){if(1&r){const c=n.RV6();n.j41(0,"div",21),n.bIt("click",function(){const t=n.eBV(c).$implicit,o=n.XpG(2);return n.Njj(o.viewPDF(t))}),n.j41(1,"div",22),n.nrm(2,"ion-icon",23),n.j41(3,"span",24),n.EFF(4,"PDF"),n.k0s()(),n.j41(5,"div",25)(6,"h3",26),n.EFF(7),n.k0s(),n.j41(8,"div",27)(9,"span",28),n.EFF(10),n.k0s()()(),n.j41(11,"div",29)(12,"ion-button",30),n.bIt("click",function(t){const o=n.eBV(c).$implicit;return n.XpG(2).viewPDF(o),n.Njj(t.stopPropagation())}),n.nrm(13,"ion-icon",31),n.k0s(),n.j41(14,"ion-button",32),n.bIt("click",function(t){const o=n.eBV(c).$implicit;return n.XpG(2).downloadPDF(o),n.Njj(t.stopPropagation())}),n.nrm(15,"ion-icon",33),n.k0s()()()}if(2&r){const c=u.$implicit,e=n.XpG(2);n.R7$(),n.HbH("category-"+e.getCategoryClass(c)),n.R7$(6),n.JRh(c.displayName),n.R7$(2),n.HbH("pill-"+e.getCategoryClass(c)),n.R7$(),n.SpI(" ",e.getCategoryLabel(c)," ")}}function N(r,u){if(1&r&&(n.j41(0,"div",19),n.DNE(1,$,16,6,"div",20),n.k0s()),2&r){const c=n.XpG();n.R7$(),n.Y8G("ngForOf",c.allDocuments)}}function j(r,u){if(1&r){const c=n.RV6();n.j41(0,"div",36)(1,"div",37),n.nrm(2,"ion-icon",23),n.j41(3,"div",38),n.EFF(4,"PDF"),n.k0s()(),n.j41(5,"div",39)(6,"h3",40),n.EFF(7),n.k0s(),n.j41(8,"div",41),n.EFF(9),n.k0s()(),n.j41(10,"div",42)(11,"ion-button",43),n.bIt("click",function(){const t=n.eBV(c).$implicit,o=n.XpG(2);return n.Njj(o.viewPDF(t))}),n.nrm(12,"ion-icon",44),n.EFF(13," View "),n.k0s(),n.j41(14,"ion-button",45),n.bIt("click",function(){const t=n.eBV(c).$implicit,o=n.XpG(2);return n.Njj(o.downloadPDF(t))}),n.nrm(15,"ion-icon",46),n.EFF(16," Download "),n.k0s()()()}if(2&r){const c=u.$implicit,e=n.XpG(2);n.R7$(),n.HbH("category-"+e.getCategoryClass(c)),n.R7$(6),n.JRh(c.displayName),n.R7$(),n.HbH("badge-"+e.getCategoryClass(c)),n.R7$(),n.SpI(" ",e.getCategoryLabel(c)," ")}}function L(r,u){if(1&r&&(n.j41(0,"div",34),n.DNE(1,j,17,6,"div",35),n.k0s()),2&r){const c=n.XpG();n.R7$(),n.Y8G("ngForOf",c.allDocuments)}}let B=(()=>{var r;class u{constructor(e,t,o,a,i,O,P,m){var l,y,g,b;this.router=e,this.httpService=t,this.loadingController=o,this.navService=a,this.platform=i,this.toastController=O,this.pageNavService=P,this.modalController=m,this.isLoading=!0,this.allDocuments=[],this.summaryData=null,this.viewMode="list",this.prescriptionDocuments=[],this.showPrescriptionDetails=!0,this.categoryConfig={discharge:{color:"primary",defaultLabel:"Discharge Summary"},lab:{color:"success",defaultLabel:"Lab Report"},radiology:{color:"info",defaultLabel:"Radiology Report"},rad:{color:"info",defaultLabel:"Radiology Report"},art:{color:"warning",defaultLabel:"ART Summary"},prescription:{color:"purple",defaultLabel:"Prescription"}},this.navService.pageChange("Visit Summary");const p=this.router.getCurrentNavigation();this.visitId=null==p||null===(l=p.extras.state)||void 0===l?void 0:l.visitId,this.hospitalCode=null==p||null===(y=p.extras.state)||void 0===y?void 0:y.hospitalCode,this.patientId=null==p||null===(g=p.extras.state)||void 0===g?void 0:g.patientId,this.visitType=null==p||null===(b=p.extras.state)||void 0===b?void 0:b.visitType}ngOnInit(){}ionViewWillEnter(){var e=this;return(0,C.A)(function*(){e.navService.pageChange("Visit Summary"),e.visitId&&e.hospitalCode&&(yield e.getVisitSummary(e.visitId,e.hospitalCode)),e.pageNavService.setupBackButton([{route:"/emr-visit-summary",handler:()=>e.router.navigate(["/home/emr-visits"])}])})()}getVisitSummary(e,t){var o=this;return(0,C.A)(function*(){o.isLoading=!0;const a=`/emr/visit-summary?hospitalCode=${t}&visitRID=${e}`;try{const i=yield o.httpService.get(a);if(!i)throw new Error("Empty response from server");o.summaryData=i,o.allDocuments=[],Object.keys(i).forEach(O=>{const P=i[O];if(Array.isArray(P)&&"prescriptionDocumentArr"!==O&&"medicalSummary"!==O){const m=o.extractCategoryFromKey(O),l=o.getCategoryLabelFromConfig(m),y=P.filter(g=>g&&"object"==typeof g).map(g=>({...g,category:m,categoryLabel:(null==g?void 0:g.displayName)||l,base64String:(null==g?void 0:g.base64String)||"",displayName:(null==g?void 0:g.displayName)||"Unnamed Document"}));o.allDocuments.push(...y)}}),o.prescriptionDocuments=i.prescriptionDocumentArr||[],0===o.allDocuments.length&&0===o.prescriptionDocuments.length&&o.showToast("No documents found for this visit","warning")}catch(i){console.error("Failed to fetch visit summary",i),o.showToast("Failed to load visit summary","danger"),o.allDocuments=[],o.prescriptionDocuments=[]}finally{o.isLoading=!1}})()}extractCategoryFromKey(e){if(!e||"string"!=typeof e)return"default";let t=e.replace(/Summary$/i,"").replace(/Report$/i,"").replace(/Print$/i,"");return t=t.toLowerCase().trim(),t&&""!==t?"prescription"===t?"prescription":"discharge"===t?"discharge":"lab"===t?"lab":"rad"===t?"radiology":"art"===t?"art":t:"default"}getCategoryLabelFromConfig(e){var t;return e&&(null===(t=this.categoryConfig[e])||void 0===t?void 0:t.defaultLabel)||"Document"}sanitizeFileName(e){return e?e.replace(/[<>:"/\\|?*\x00-\x1F]/g,"_").replace(/\s+/g,"_").replace(/_{2,}/g,"_").substring(0,200).trim():"document"}viewPDF(e){var t=this;return(0,C.A)(function*(){if(e)if(e.base64String)try{if(h.Ii.isNativePlatform()){yield(yield t.toastController.create({message:"Opening document...",duration:1500,position:"bottom",color:"primary"})).present();let i=e.base64String;if(i.startsWith("data:")&&(i=i.split(",")[1]),!i||""===i.trim())throw new Error("Empty document data");const P=`${t.sanitizeFileName(e.displayName||"document")}_preview.pdf`,m=yield _.YA.writeFile({path:P,data:i,directory:_.__.Cache,recursive:!0});console.log("Temp file created:",m.uri),yield w.M.open({filePath:m.uri,contentType:"application/pdf",openWithDefault:!0})}else yield(yield t.modalController.create({component:D.z,componentProps:{pdfData:e.base64String,documentName:e.displayName},cssClass:"pdf-viewer-modal"})).present()}catch(o){console.error("Failed to view PDF",o),t.showToast("Failed to open PDF viewer","danger")}else t.showToast("Document data not available","danger");else t.showToast("Invalid document","danger")})()}downloadPDF(e){var t=this;return(0,C.A)(function*(){var b;if(e)if(e.base64String)try{yield(yield t.toastController.create({message:"Downloading document...",duration:2e3,position:"bottom",color:"primary"})).present();let a=e.base64String;if(a.startsWith("data:")&&(a=a.split(",")[1]),!a||""===a.trim())throw new Error("Empty document data");if(h.Ii.isNativePlatform()){const P=`${t.sanitizeFileName(e.displayName||"document")}.pdf`;try{const m=t.platform.is("android")?_.__.ExternalStorage:_.__.Documents,l=t.platform.is("android")?`Download/${P}`:P,y=yield _.YA.writeFile({path:l,data:a,directory:m,recursive:!0});console.log("File saved successfully to:",y.uri),yield(yield t.toastController.create({message:(t.platform.is("android"),"Downloaded successfully!"),duration:5e3,position:"bottom",color:"success",icon:"checkmark-circle",buttons:[{text:"Open",role:"action",handler:(b=(0,C.A)(function*(){try{yield w.M.open({filePath:y.uri,contentType:"application/pdf",openWithDefault:!0})}catch(p){console.error("Failed to open file:",p),t.showToast("Failed to open file","danger")}}),function(){return b.apply(this,arguments)})},{text:"Dismiss",role:"cancel"}]})).present()}catch(m){throw console.error("Filesystem error:",m),console.error("Error details:",JSON.stringify(m)),m}}else{const O=t.base64ToBlob(a,"application/pdf"),P=window.URL.createObjectURL(O),m=t.sanitizeFileName(e.displayName||"document"),l=window.document.createElement("a");l.href=P,l.download=`${m}.pdf`,window.document.body.appendChild(l),l.click(),window.document.body.removeChild(l),window.URL.revokeObjectURL(P),yield(yield t.toastController.create({message:"Download completed successfully!",duration:2e3,position:"bottom",color:"success",icon:"checkmark-circle"})).present()}}catch(o){console.error("Failed to download PDF",o),t.showToast("Failed to download document","danger")}else t.showToast("Document data not available","danger");else t.showToast("Invalid document","danger")})()}base64ToBlob(e,t){if(!e||"string"!=typeof e)throw new Error("Invalid base64 data");try{const o=window.atob(e),a=new Uint8Array(o.length);for(let i=0;i<o.length;i++)a[i]=o.charCodeAt(i);return new Blob([a],{type:t})}catch(o){throw console.error("Failed to decode base64:",o),new Error("Invalid base64 encoding")}}showToast(e){var t=this;return(0,C.A)(function*(o,a="primary"){yield(yield t.toastController.create({message:o,duration:2500,position:"bottom",color:a})).present()}).apply(this,arguments)}getDocumentCategory(e){return e&&e.category||"default"}getCategoryLabel(e){return e&&e.categoryLabel||"Document"}getCategoryColor(e){var t;return e&&(null===(t=this.categoryConfig[e])||void 0===t?void 0:t.color)||"default"}getCategoryClass(e){if(!e)return"default";const t=this.getDocumentCategory(e);return["discharge","lab","radiology","art","prescription"].includes(t)?t:"default"}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}getDurationText(e,t){const i=e*t;return 1===i?"1 day":i<7?`${i} days`:7===i?"1 week":i<30?`${Math.round(i/7)} weeks`:i<365?`${Math.round(i/30)} months`:`${Math.round(i/365)} years`}getPrescriptionSections(e){var t;const o=[];return null!==(t=e.templateData)&&void 0!==t&&t.frames&&e.templateData.frames.forEach(a=>{a.sections&&o.push(...a.sections)}),o}togglePrescriptionDetails(){this.showPrescriptionDetails=!this.showPrescriptionDetails}toggleViewMode(){this.viewMode="list"===this.viewMode?"grid":"list"}}return(r=u).\u0275fac=function(e){return new(e||r)(n.rXU(d.Ix),n.rXU(v.k),n.rXU(M.Xi),n.rXU(z.o),n.rXU(E.OD),n.rXU(M.K_),n.rXU(F.V),n.rXU(M.W3))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-visit-summary"]],standalone:!0,features:[n.aNF],decls:13,vars:6,consts:[[1,"visit-summary-page"],[1,"container"],[1,"header"],[1,"header-content"],["class","subtitle",4,"ngIf"],["fill","clear","size","small","class","view-toggle-btn",3,"click",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","documents-list",4,"ngIf"],["class","documents-grid",4,"ngIf"],[1,"subtitle"],["fill","clear","size","small",1,"view-toggle-btn",3,"click"],["slot","icon-only",3,"name"],[1,"loading-container"],["name","crescent"],[1,"loading-text"],[1,"empty-state"],["name","document-text-outline",1,"empty-icon"],[1,"help-text"],[1,"documents-list"],["class","document-item",3,"click",4,"ngFor","ngForOf"],[1,"document-item",3,"click"],[1,"document-icon-compact"],["name","document-text"],[1,"pdf-badge-compact"],[1,"document-content"],[1,"document-title"],[1,"document-meta"],[1,"category-pill"],[1,"document-actions-compact"],["fill","clear","size","small",1,"icon-btn","primary-action",3,"click"],["name","eye-outline","slot","icon-only"],["fill","clear","size","small",1,"icon-btn","secondary-action",3,"click"],["name","download-outline","slot","icon-only"],[1,"documents-grid"],["class","document-tile",4,"ngFor","ngForOf"],[1,"document-tile"],[1,"document-icon"],[1,"pdf-badge"],[1,"document-info"],[1,"document-name"],[1,"document-category-badge"],[1,"document-actions"],["fill","clear","size","small",1,"action-btn","view-btn",3,"click"],["name","eye-outline","slot","start"],["fill","clear","size","small",1,"action-btn","download-btn",3,"click"],["name","download-outline","slot","start"]],template:function(e,t){1&e&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"div")(5,"h1"),n.EFF(6,"Visit Documents"),n.k0s(),n.DNE(7,S,2,2,"p",4),n.k0s(),n.DNE(8,I,2,1,"ion-button",5),n.k0s()(),n.DNE(9,T,4,0,"div",6)(10,R,6,0,"div",7)(11,N,2,1,"div",8)(12,L,2,1,"div",9),n.k0s()()),2&e&&(n.R7$(7),n.Y8G("ngIf",t.allDocuments.length&&!t.isLoading),n.R7$(),n.Y8G("ngIf",t.allDocuments.length&&!t.isLoading),n.R7$(),n.Y8G("ngIf",t.isLoading),n.R7$(),n.Y8G("ngIf",!t.allDocuments.length&&!t.prescriptionDocuments.length&&!t.isLoading),n.R7$(),n.Y8G("ngIf",t.allDocuments.length&&!t.isLoading&&"list"===t.viewMode),n.R7$(),n.Y8G("ngIf",t.allDocuments.length&&!t.isLoading&&"grid"===t.viewMode))},dependencies:[M.bv,M.Jm,M.W9,M.iq,M.w2,f.pM,f.bT,f.MD],styles:[".visit-summary-page[_ngcontent-%COMP%]{--background: var(--mc-bg-secondary);--padding-top: var(--mc-spacing-2xl);--padding-bottom: var(--mc-spacing-2xl)}.visit-summary-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 var(--mc-spacing-xl)}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:12px}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-lg);font-weight:700;color:var(--mc-text-primary);margin:0 0 var(--mc-spacing-xs) 0}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm);color:var(--mc-text-secondary);margin:0;font-weight:400}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]{--color: var(--mc-text-secondary);--padding-start: var(--mc-spacing-sm);--padding-end: var(--mc-spacing-sm);min-height:44px;min-width:44px}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:hover{--color: var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--mc-spacing-6) var(--mc-spacing-4);min-height:200px;gap:var(--mc-spacing-3);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.visit-summary-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: var(--mc-color-primary-500);width:40px;height:40px}.visit-summary-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--mc-text-secondary);font-size:var(--mc-font-body-md);font-weight:500;margin:0}.visit-summary-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--mc-spacing-6) var(--mc-spacing-4);text-align:center;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.visit-summary-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:var(--mc-font-display-md);color:var(--mc-color-gray-400);margin-bottom:var(--mc-spacing-4)}.visit-summary-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);color:var(--mc-text-secondary);margin:var(--mc-spacing-2) 0}.visit-summary-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.help-text[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm);color:var(--mc-text-tertiary)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--mc-spacing-sm);margin-bottom:var(--mc-spacing-4)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]{background:var(--mc-bg-card);border-radius:var(--mc-radius-md);padding:var(--mc-spacing-3) var(--mc-spacing-4);box-shadow:var(--mc-card-shadow);border:1px solid var(--mc-card-border);display:flex;align-items:center;gap:var(--mc-spacing-3);min-height:96px;max-height:120px;transition:all .2s ease;cursor:pointer;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]:active{background:var(--mc-bg-secondary);transform:scale(.98)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;border-radius:var(--mc-radius-md);display:flex;align-items:center;justify-content:center;position:relative}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:var(--mc-text-inverse)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact[_ngcontent-%COMP%]   .pdf-badge-compact[_ngcontent-%COMP%]{position:absolute;bottom:-4px;right:-4px;background:var(--mc-color-error-500);color:var(--mc-text-inverse);font-size:9px;font-weight:700;padding:2px 4px;border-radius:var(--mc-radius-sm);box-shadow:var(--mc-shadow-sm);line-height:1}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-discharge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-500) 0%,var(--mc-color-primary-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-lab[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-success-500) 0%,var(--mc-color-success-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-radiology[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0891b2)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-art[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-warning-500) 0%,var(--mc-color-warning-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-prescription[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9333ea,#7e22ce)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact.category-default[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-gray-600) 0%,var(--mc-color-gray-700) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);font-weight:600;color:var(--mc-text-primary);margin:0;line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]{display:inline-block;font-size:var(--mc-font-body-xs);font-weight:500;padding:2px var(--mc-spacing-sm);border-radius:var(--mc-radius-full);color:var(--mc-text-inverse);line-height:1.4}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-discharge[_ngcontent-%COMP%]{background:var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-lab[_ngcontent-%COMP%]{background:var(--mc-color-success-500)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-radiology[_ngcontent-%COMP%]{background:#06b6d4}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-art[_ngcontent-%COMP%]{background:var(--mc-color-warning-500)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-prescription[_ngcontent-%COMP%]{background:#9333ea}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill.pill-default[_ngcontent-%COMP%]{background:var(--mc-color-gray-600)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]{flex-shrink:0;display:flex;gap:4px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;margin:0;width:44px;height:44px;display:flex;align-items:center;justify-content:center}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn.primary-action[_ngcontent-%COMP%]{--color: var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn.primary-action[_ngcontent-%COMP%]:hover{--background: var(--mc-color-primary-50)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn.secondary-action[_ngcontent-%COMP%]{--color: var(--mc-text-secondary)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn.secondary-action[_ngcontent-%COMP%]:hover{--background: var(--mc-color-gray-100)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-6);animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--mc-spacing-4);padding:var(--mc-spacing-3) 0;border-bottom:2px solid var(--mc-color-gray-200)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-2)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-md);font-weight:700;color:var(--mc-text-primary);margin:0}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:var(--mc-color-primary-500);color:var(--mc-text-inverse);font-size:var(--mc-font-body-xs);font-weight:700;padding:4px 10px;border-radius:var(--mc-radius-full);min-width:24px;text-align:center}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{--color: var(--mc-text-secondary);--padding-start: 8px;--padding-end: 8px;min-height:44px;min-width:44px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{--color: var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--mc-spacing-4)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]{background:var(--mc-bg-card);border-radius:var(--mc-radius-lg);box-shadow:var(--mc-card-shadow);overflow:hidden;border:1px solid var(--mc-card-border);transition:all .3s ease}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]:hover{box-shadow:var(--mc-card-shadow-hover)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-500) 0%,var(--mc-color-primary-600) 100%);padding:var(--mc-spacing-4);color:var(--mc-text-inverse)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .prescription-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-2);font-size:var(--mc-font-heading-sm);font-weight:700;margin:0 0 var(--mc-spacing-3) 0;color:var(--mc-text-inverse)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .prescription-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:24px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--spacing-3);font-size:var(--font-body-sm)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#fffffff2}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .meta-icon[_ngcontent-%COMP%]{font-size:16px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item.status-badge[_ngcontent-%COMP%]{background:#fff3;padding:4px 12px;border-radius:var(--radius-full);font-weight:600}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item.status-badge.locked[_ngcontent-%COMP%]{background:var(--mc-color-success-500)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]{padding:var(--spacing-4)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-5)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .section-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);font-size:var(--font-body-lg);font-weight:700;color:var(--mc-color-primary-600);margin:0 0 var(--spacing-3) 0;padding-bottom:var(--spacing-2);border-bottom:2px solid var(--mc-color-primary-100)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .section-header-title[_ngcontent-%COMP%]   .section-header-icon[_ngcontent-%COMP%]{font-size:20px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-3)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-3);padding:var(--spacing-4);background:var(--mc-bg-secondary);border-radius:var(--radius-md);border-left:4px solid var(--mc-color-primary-500);transition:all .2s ease}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]:hover{background:var(--color-gray-100);transform:translate(4px)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-number[_ngcontent-%COMP%]{flex-shrink:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--mc-color-primary-500);color:var(--color-white);font-weight:700;font-size:var(--font-body-sm);border-radius:50%}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-2)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-name[_ngcontent-%COMP%]{font-size:var(--font-body-lg);font-weight:700;color:var(--mc-text-primary);line-height:1.4}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-2)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]   .drug-detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:var(--font-body-sm);color:var(--mc-text-secondary)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]   .drug-detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]   .drug-detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--mc-text-primary)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);padding:var(--spacing-2) var(--spacing-3);background:var(--color-white);border-radius:var(--radius-sm);font-size:var(--font-body-sm);color:var(--mc-text-secondary);margin-top:var(--spacing-1)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--mc-color-success-500)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{font-size:14px;color:var(--color-gray-400)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:var(--mc-text-primary)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .no-drugs[_ngcontent-%COMP%]{padding:var(--spacing-4);text-align:center;color:var(--mc-text-tertiary);font-style:italic}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:var(--spacing-5);margin-bottom:var(--spacing-6)}@media (max-width: 768px){.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (min-width: 769px) and (max-width: 1024px){.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]{background:var(--color-white);border-radius:var(--radius-lg);padding:var(--spacing-5);box-shadow:var(--shadow-sm);transition:all .3s ease;border:1px solid var(--color-gray-200);display:flex;flex-direction:column;gap:var(--spacing-4);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-2px)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;position:relative;margin:0 auto}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:var(--color-white)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon[_ngcontent-%COMP%]   .pdf-badge[_ngcontent-%COMP%]{position:absolute;bottom:-8px;right:-8px;background:var(--mc-color-error-500);color:var(--color-white);font-size:var(--font-body-xs);font-weight:700;padding:var(--spacing-1) var(--spacing-2);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-discharge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-500) 0%,var(--mc-color-primary-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-lab[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-success-500) 0%,var(--mc-color-success-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-radiology[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0891b2)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-art[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-warning-500) 0%,var(--mc-color-warning-600) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-prescription[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9333ea,#7e22ce)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon.category-default[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-gray-600) 0%,var(--color-gray-700) 100%)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]{text-align:center;flex:1}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-name[_ngcontent-%COMP%]{font-size:var(--font-body-md);font-weight:600;color:var(--mc-text-primary);margin:0 0 var(--spacing-2) 0;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge[_ngcontent-%COMP%]{display:inline-block;font-size:var(--font-body-xs);font-weight:500;padding:var(--spacing-1) var(--spacing-3);border-radius:var(--radius-full);color:var(--color-white)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-discharge[_ngcontent-%COMP%]{background:var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-lab[_ngcontent-%COMP%]{background:var(--mc-color-success-500)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-radiology[_ngcontent-%COMP%]{background:#06b6d4}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-art[_ngcontent-%COMP%]{background:var(--mc-color-warning-500)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-prescription[_ngcontent-%COMP%]{background:#9333ea}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-info[_ngcontent-%COMP%]   .document-category-badge.badge-default[_ngcontent-%COMP%]{background:var(--color-gray-600)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);padding-top:var(--spacing-2);border-top:1px solid var(--color-gray-200)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;margin:0;font-size:var(--font-body-sm);font-weight:500;height:36px}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{--color: var(--mc-color-primary-500)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover{--background: var(--mc-color-primary-50)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]{--color: var(--mc-color-success-500)}.visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:hover{--background: var(--mc-color-success-50)}@media (max-width: 600px){.visit-summary-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-md)}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:8px}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.visit-summary-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{font-size:20px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:var(--font-body-lg)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title-wrapper[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{font-size:10px;padding:2px 8px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]{padding:var(--spacing-3)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .prescription-title[_ngcontent-%COMP%]{font-size:var(--font-body-lg)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .prescription-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:20px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-2);font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-header[_ngcontent-%COMP%]   .prescription-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .meta-icon[_ngcontent-%COMP%]{font-size:14px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]{padding:var(--spacing-3)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .section-header-title[_ngcontent-%COMP%]{font-size:var(--font-body-md)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .section-header-title[_ngcontent-%COMP%]   .section-header-icon[_ngcontent-%COMP%]{font-size:18px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-2);padding:var(--spacing-3)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-number[_ngcontent-%COMP%]{width:28px;height:28px;font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-name[_ngcontent-%COMP%]{font-size:var(--font-body-md)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--spacing-2)}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]   .drug-detail-item[_ngcontent-%COMP%]{font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-details[_ngcontent-%COMP%]   .drug-detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:14px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]{flex-wrap:wrap;font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{font-size:14px}.visit-summary-page[_ngcontent-%COMP%]   .prescription-details-section[_ngcontent-%COMP%]   .prescription-card[_ngcontent-%COMP%]   .prescription-sections[_ngcontent-%COMP%]   .prescription-section[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]   .drug-content[_ngcontent-%COMP%]   .drug-timeline[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{font-size:12px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]{padding:8px 12px;min-height:88px;gap:8px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact[_ngcontent-%COMP%]{width:44px;height:44px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-icon-compact[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-content[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]{gap:2px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{width:40px;height:40px}.visit-summary-page[_ngcontent-%COMP%]   .documents-list[_ngcontent-%COMP%]   .document-item[_ngcontent-%COMP%]   .document-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]{padding:var(--spacing-4)}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon[_ngcontent-%COMP%]{width:64px;height:64px}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--spacing-2)}.visit-summary-page[_ngcontent-%COMP%]   .documents-grid[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.ios[_ngcontent-%COMP%]   .visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]:hover{transform:none}.md[_ngcontent-%COMP%]   .visit-summary-page[_ngcontent-%COMP%]   .document-tile[_ngcontent-%COMP%]{border-radius:var(--radius-md)}"]}),u})()},8135:(k,x,s)=>{s.d(x,{V:()=>D});var C=s(4438),M=s(600),f=s(9012);let D=(()=>{var _;class h{constructor(n,d){this.platform=n,this.router=d,this.activeSubscriptions=new Map}setupBackButton(n,d){Array.isArray(n)?n.forEach(v=>{this.setupSingleBackButton(v.route,v.handler)}):"string"==typeof n&&d&&this.setupSingleBackButton(n,d)}setupSingleBackButton(n,d){this.cleanupBackButton(n);const v=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===n&&d()});this.activeSubscriptions.set(n,v)}cleanupBackButton(n){const d=this.activeSubscriptions.get(n);d&&(d.unsubscribe(),this.activeSubscriptions.delete(n))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((n,d)=>{n.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(n="/home"){window.history.length>1?window.history.back():this.router.navigate([n])}smartNavigateBack(n){const v={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[n];v?this.router.navigate([v]):this.navigateBack()}}return(_=h).\u0275fac=function(n){return new(n||_)(C.KVO(M.OD),C.KVO(f.Ix))},_.\u0275prov=C.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),h})()}}]);