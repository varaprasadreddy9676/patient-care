"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2397],{2397:(D,w,l)=>{l.r(w),l.d(w,{AttachmentListPage:()=>ut});var v=l(467),A=l(8636),k=l(5351),u=l(9893),_=l(177),b=l(9417),t=l(4438),d=l(9934),f=l(8023),P=l(9012),N=l(345);function S(a,s){1&a&&(t.j41(0,"div",20),t.nrm(1,"ion-icon",21),t.j41(2,"span"),t.EFF(3,"PDF Document"),t.k0s()())}function E(a,s){1&a&&(t.j41(0,"div",22),t.nrm(1,"ion-icon",23),t.j41(2,"span"),t.EFF(3,"Image File"),t.k0s()())}function T(a,s){if(1&a&&(t.j41(0,"div",24)(1,"div",25),t.nrm(2,"ion-icon",26),t.j41(3,"span"),t.EFF(4,"Current name:"),t.k0s()(),t.j41(5,"div",27),t.EFF(6),t.k0s()()),2&a){const o=t.XpG();t.R7$(6),t.JRh(o.fileName)}}function U(a,s){if(1&a&&(t.j41(0,"div",28),t.nrm(1,"ion-icon",29),t.j41(2,"div",30)(3,"strong"),t.EFF(4,"Name already exists"),t.k0s(),t.j41(5,"p"),t.EFF(6,'A file named "'),t.j41(7,"strong"),t.EFF(8),t.k0s(),t.EFF(9,'" already exists. Please choose a different name.'),t.k0s()()()),2&a){const o=t.XpG();t.R7$(8),t.JRh(o.fileName)}}let G=(()=>{var a;class s{constructor(e,n,i,c,m,r){this.data=e,this.dialogRef=n,this.utilityService=i,this.httpService=c,this.router=m,this.domSanitizer=r,this.isFileNameExists=!1,this.data&&(this.attachment=this.data.attachmentDetails,this.fileNames=this.data.attached,this.isFileNameExists=this.data.exist,this.fileName=this.attachment.fileName)}ngOnInit(){}sanitizeURI(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}closeDialog(){this.dialogRef.close(null)}saveDialog(){this.dialogRef.close(this.attachment)}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(k.Vh),t.rXU(k.CP),t.rXU(d.Q),t.rXU(f.k),t.rXU(P.Ix),t.rXU(N.up))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-rename-attachment"]],standalone:!0,features:[t.aNF],decls:25,vars:8,consts:[[1,"rename-dialog-container"],[1,"dialog-header"],["name","create-outline",1,"header-icon"],[1,"header-title"],[1,"dialog-content"],[1,"thumbnail-preview"],[1,"preview-image",3,"src","alt"],["class","file-type-indicator",4,"ngIf"],["class","file-type-indicator image-type",4,"ngIf"],["class","current-file-info",4,"ngIf"],[1,"input-section"],["for","fileNameInput",1,"input-label"],["id","fileNameInput","cdkFocusInitial","","type","text","maxlength","260","placeholder","Enter new file name",1,"file-name-input",3,"keyup.enter","ngModelChange","ngModel"],[1,"input-hint"],["class","error-banner",4,"ngIf"],[1,"dialog-actions"],["fill","outline","size","default",1,"cancel-button",3,"click"],["slot","start","name","close-circle-outline"],["fill","solid","size","default",1,"save-button",3,"click","disabled"],["slot","start","name","checkmark-circle-outline"],[1,"file-type-indicator"],["name","document-text-outline"],[1,"file-type-indicator","image-type"],["name","image-outline"],[1,"current-file-info"],[1,"info-label"],["name","document-outline",1,"info-icon"],[1,"current-name"],[1,"error-banner"],["name","alert-circle-outline",1,"error-icon"],[1,"error-content"]],template:function(e,n){1&e&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"ion-icon",2),t.j41(3,"h2",3),t.EFF(4,"Rename Attachment"),t.k0s()(),t.j41(5,"div",4)(6,"div",5),t.nrm(7,"img",6),t.DNE(8,S,4,0,"div",7)(9,E,4,0,"div",8),t.k0s(),t.DNE(10,T,7,1,"div",9),t.j41(11,"div",10)(12,"label",11),t.EFF(13,"New file name"),t.k0s(),t.j41(14,"input",12),t.bIt("keyup.enter",function(){return n.saveDialog()}),t.mxI("ngModelChange",function(c){return t.DH7(n.attachment.fileName,c)||(n.attachment.fileName=c),c}),t.k0s(),t.j41(15,"div",13),t.EFF(16,"Maximum 260 characters"),t.k0s()(),t.DNE(17,U,10,1,"div",14),t.k0s(),t.j41(18,"div",15)(19,"ion-button",16),t.bIt("click",function(){return n.closeDialog()}),t.nrm(20,"ion-icon",17),t.EFF(21," Cancel "),t.k0s(),t.j41(22,"ion-button",18),t.bIt("click",function(){return n.saveDialog()}),t.nrm(23,"ion-icon",19),t.EFF(24," Save Changes "),t.k0s()()()),2&e&&(t.R7$(7),t.Y8G("src",n.sanitizeURI(n.attachment.thumbnailBase64DataURI),t.B4B)("alt",n.attachment.fileName),t.R7$(),t.Y8G("ngIf","application/pdf"===n.attachment.contentType),t.R7$(),t.Y8G("ngIf","application/pdf"!==n.attachment.contentType),t.R7$(),t.Y8G("ngIf",n.fileName),t.R7$(4),t.R50("ngModel",n.attachment.fileName),t.R7$(3),t.Y8G("ngIf",n.isFileNameExists),t.R7$(5),t.Y8G("disabled",!n.attachment.fileName||0===n.attachment.fileName.trim().length))},dependencies:[u.bv,u.Jm,u.iq,_.MD,_.bT,b.YN,b.me,b.BC,b.tU,b.vS],styles:[".rename-dialog-container[_ngcontent-%COMP%]{min-width:500px;max-width:600px;border-radius:var(--mc-radius-lg);overflow:hidden;background:var(--mc-bg-primary);box-shadow:var(--mc-shadow-xl);animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@media (max-width: 768px){.rename-dialog-container[_ngcontent-%COMP%]{min-width:90vw;max-width:95vw}}@media (max-width: 480px){.rename-dialog-container[_ngcontent-%COMP%]{min-width:95vw}}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-md);padding:var(--mc-spacing-xl) var(--mc-spacing-2xl);background:linear-gradient(135deg,var(--mc-color-primary-500) 0%,var(--mc-color-primary-600) 100%);border-bottom:1px solid var(--mc-border-primary)}.dialog-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-xl);color:var(--mc-text-inverse);flex-shrink:0}.dialog-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:var(--font-heading-lg);font-weight:600;color:var(--mc-text-inverse);flex:1}@media (max-width: 480px){.dialog-header[_ngcontent-%COMP%]{padding:var(--mc-spacing-lg) var(--mc-spacing-xl)}.dialog-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-lg)}.dialog-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}}.dialog-content[_ngcontent-%COMP%]{padding:var(--mc-spacing-2xl);max-height:65vh;overflow-y:auto}@media (max-width: 480px){.dialog-content[_ngcontent-%COMP%]{padding:var(--mc-spacing-xl) var(--mc-spacing-lg);max-height:60vh}}.thumbnail-preview[_ngcontent-%COMP%]{position:relative;width:100%;max-height:300px;background:var(--mc-bg-secondary);border-radius:var(--mc-radius-lg);overflow:hidden;margin-bottom:var(--mc-spacing-xl);box-shadow:var(--mc-shadow-md);border:2px solid var(--mc-border-secondary)}.thumbnail-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;max-height:300px;object-fit:contain;display:block}.thumbnail-preview[_ngcontent-%COMP%]   .file-type-indicator[_ngcontent-%COMP%]{position:absolute;top:var(--mc-spacing-md);right:var(--mc-spacing-md);display:flex;align-items:center;gap:var(--mc-spacing-xs);padding:var(--mc-spacing-sm) var(--mc-spacing-md);background:#dc2626f2;color:var(--mc-text-inverse);border-radius:var(--mc-radius-md);font-size:var(--font-body-sm);font-weight:600;box-shadow:var(--mc-shadow-md)}.thumbnail-preview[_ngcontent-%COMP%]   .file-type-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-sm)}.thumbnail-preview[_ngcontent-%COMP%]   .file-type-indicator.image-type[_ngcontent-%COMP%]{background:#10b981f2}@media (max-width: 480px){.thumbnail-preview[_ngcontent-%COMP%], .thumbnail-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{max-height:200px}.thumbnail-preview[_ngcontent-%COMP%]   .file-type-indicator[_ngcontent-%COMP%]{font-size:var(--font-body-xs);padding:var(--mc-spacing-xs) var(--mc-spacing-sm)}.thumbnail-preview[_ngcontent-%COMP%]   .file-type-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.current-file-info[_ngcontent-%COMP%]{padding:var(--mc-spacing-lg);background:var(--mc-bg-secondary);border-radius:var(--mc-radius-md);margin-bottom:var(--mc-spacing-xl);border:1px solid var(--mc-border-secondary)}.current-file-info[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-xs);margin-bottom:var(--mc-spacing-sm);color:var(--mc-text-secondary);font-size:var(--font-body-sm);font-weight:500}.current-file-info[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-sm);color:var(--mc-color-primary-500)}.current-file-info[_ngcontent-%COMP%]   .current-name[_ngcontent-%COMP%]{font-size:var(--font-body-md);font-weight:600;color:var(--mc-text-primary);word-break:break-all;padding-left:calc(var(--mc-icon-size-sm) + var(--mc-spacing-xs))}.input-section[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-xl)}.input-section[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--mc-spacing-sm);font-size:var(--font-body-md);font-weight:600;color:var(--mc-text-primary)}.input-section[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]{width:100%;padding:var(--mc-spacing-md) var(--mc-spacing-lg);font-size:var(--font-body-md);color:var(--mc-text-primary);background:var(--mc-bg-primary);border:2px solid var(--mc-border-primary);border-radius:var(--mc-radius-md);transition:all var(--mc-transition-base);font-family:inherit}.input-section[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--mc-color-primary-500);box-shadow:0 0 0 3px var(--mc-color-primary-100)}.input-section[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]::placeholder{color:var(--mc-text-tertiary)}.input-section[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]:disabled{background:var(--mc-bg-secondary);cursor:not-allowed;opacity:.6}.input-section[_ngcontent-%COMP%]   .input-hint[_ngcontent-%COMP%]{margin-top:var(--mc-spacing-xs);font-size:var(--font-body-sm);color:var(--mc-text-secondary);font-style:italic}.error-banner[_ngcontent-%COMP%]{display:flex;gap:var(--mc-spacing-md);padding:var(--mc-spacing-lg);background:var(--mc-color-error-50);border:2px solid var(--mc-color-error-200);border-radius:var(--mc-radius-md);margin-bottom:var(--mc-spacing-xl);animation:_ngcontent-%COMP%_shake .4s ease-out}.error-banner[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-lg);color:var(--mc-color-error-500);flex-shrink:0;margin-top:2px}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{flex:1}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:var(--mc-spacing-xs);font-size:var(--font-body-md);font-weight:600;color:var(--mc-color-error-700)}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-body-sm);color:var(--mc-color-error-600);line-height:1.5}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:inline;font-weight:600;color:var(--mc-color-error-700)}@media (max-width: 480px){.error-banner[_ngcontent-%COMP%]{padding:var(--mc-spacing-md);gap:var(--mc-spacing-sm)}.error-banner[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-md)}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-body-xs)}}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--mc-spacing-md);padding:var(--mc-spacing-xl) var(--mc-spacing-2xl);background:var(--mc-bg-secondary);border-top:1px solid var(--mc-border-primary)}.dialog-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: var(--mc-radius-md);--padding-start: var(--mc-spacing-xl);--padding-end: var(--mc-spacing-xl);font-weight:600;text-transform:none;min-width:120px;transition:var(--mc-transition-base)}.dialog-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-sm)}.dialog-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{--border-color: var(--mc-border-primary);--border-width: 2px;--color: var(--mc-text-secondary)}.dialog-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{--color: var(--mc-text-primary);--border-color: var(--mc-border-focus)}.dialog-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{--background: var(--mc-color-primary-500);--background-hover: var(--mc-color-primary-600);--color: var(--mc-text-inverse);--box-shadow: var(--mc-shadow-sm)}.dialog-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{--background: var(--mc-bg-tertiary);--color: var(--mc-text-tertiary);opacity:.6;cursor:not-allowed}@media (max-width: 480px){.dialog-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:var(--mc-spacing-lg) var(--mc-spacing-xl)}.dialog-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;--padding-start: var(--mc-spacing-lg);--padding-end: var(--mc-spacing-lg)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}  .mat-dialog-container{padding:0!important;overflow:hidden;border-radius:var(--mc-radius-lg);background:var(--mc-bg-primary);box-shadow:var(--mc-shadow-xl);max-height:90vh}.ios[_ngcontent-%COMP%]     .mat-dialog-container{max-height:calc(var(--app-height, 100vh) - 40px)}[data-theme=dark][_ngcontent-%COMP%]   .rename-dialog-container[_ngcontent-%COMP%]{background:var(--mc-bg-secondary)}[data-theme=dark][_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-700) 0%,var(--mc-color-primary-800) 100%)}[data-theme=dark][_ngcontent-%COMP%]   .thumbnail-preview[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .current-file-info[_ngcontent-%COMP%]{background:var(--mc-bg-tertiary);border-color:var(--mc-border-primary)}[data-theme=dark][_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]{background:var(--mc-bg-secondary);border-color:var(--mc-border-primary)}[data-theme=dark][_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]:focus{border-color:var(--mc-color-primary-400);box-shadow:0 0 0 3px var(--mc-color-primary-900)}[data-theme=dark][_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]{background:var(--mc-color-error-900);border-color:var(--mc-color-error-700)}[data-theme=dark][_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--mc-color-error-300)}[data-theme=dark][_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--mc-color-error-200)}[data-theme=dark][_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--mc-color-error-100)}[data-theme=dark][_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{background:var(--mc-bg-tertiary)}"]}),s})();var L=l(8359),B=l(600),X=l(3629),Y=l(7031),V=l(8251),$=l(8135),J=l(8875);const K=["fileInput"],W=["fileInputpng"];function Q(a,s){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.SpI("Viewing attachments for ",o.familyMember.fullName,"")}}function H(a,s){1&a&&(t.j41(0,"span"),t.EFF(1,"Manage your medical documents and images"),t.k0s())}function Z(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",20),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.hideCheckBox=!n.hideCheckBox)}),t.nrm(1,"ion-icon",21),t.EFF(2," Select "),t.k0s()}}function q(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",22),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.buttonClick())}),t.nrm(1,"ion-icon",23),t.EFF(2," Attach File "),t.k0s()}}function tt(a,s){if(1&a&&(t.j41(0,"div",13)(1,"div",14),t.nrm(2,"ion-icon",15),t.j41(3,"span",16),t.EFF(4,"Supported formats: PDF, JPEG, JPG, PNG"),t.k0s()(),t.j41(5,"div",17),t.DNE(6,Z,3,0,"ion-button",18)(7,q,3,0,"ion-button",19),t.k0s()()),2&a){const o=t.XpG();t.R7$(6),t.Y8G("ngIf",0==o.selectedAttachments.length),t.R7$(),t.Y8G("ngIf",0==o.selectedAttachments.length)}}function nt(a,s){1&a&&(t.j41(0,"span"),t.EFF(1,"s"),t.k0s())}function et(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",33),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.renameAttachment(n.selectedAttachments[0]))}),t.nrm(1,"ion-icon",34),t.EFF(2," Rename "),t.k0s()}}function at(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",35),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.removeAttachment())}),t.nrm(1,"ion-icon",36),t.EFF(2," Delete "),t.k0s()}}function it(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",33),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.shareAttachmentToVisit())}),t.nrm(1,"ion-icon",37),t.EFF(2," Share "),t.k0s()}}function ot(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",24)(1,"div",25),t.nrm(2,"ion-icon",26),t.j41(3,"span",27),t.EFF(4),t.DNE(5,nt,2,0,"span",6),t.EFF(6," selected"),t.k0s()(),t.j41(7,"div",28),t.DNE(8,et,3,0,"ion-button",29)(9,at,3,0,"ion-button",30)(10,it,3,0,"ion-button",29),t.j41(11,"ion-button",31),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.unmarkAttachments())}),t.nrm(12,"ion-icon",32),t.EFF(13," Cancel "),t.k0s()()()}if(2&a){const o=t.XpG();t.R7$(4),t.SpI("",o.selectedAttachments.length," item"),t.R7$(),t.Y8G("ngIf",o.selectedAttachments.length>1),t.R7$(3),t.Y8G("ngIf",!o.appointment&&1===o.selectedAttachments.length),t.R7$(),t.Y8G("ngIf",!o.appointment),t.R7$(),t.Y8G("ngIf",o.appointment)}}function ct(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-button",44),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.buttonClick())}),t.nrm(1,"ion-icon",23),t.EFF(2," Add First Attachment "),t.k0s()}}function rt(a,s){if(1&a&&(t.j41(0,"div",38)(1,"div",39),t.nrm(2,"ion-icon",40),t.k0s(),t.j41(3,"h3",41),t.EFF(4,"No attachments yet"),t.k0s(),t.j41(5,"p",42),t.EFF(6,"Start adding medical documents, reports, and images to keep all your health records organized in one place"),t.k0s(),t.DNE(7,ct,3,0,"ion-button",43),t.k0s()),2&a){const o=t.XpG();t.R7$(7),t.Y8G("ngIf",!o.appointment)}}function st(a,s){if(1&a){const o=t.RV6();t.j41(0,"ion-checkbox",61),t.bIt("ionChange",function(n){t.eBV(o);const i=t.XpG().$implicit,c=t.XpG(3);return t.Njj(c.fileChecked(n,i))}),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG().$implicit;return t.DH7(i.isSelected,n)||(i.isSelected=n),t.Njj(n)}),t.k0s()}if(2&a){const o=t.XpG().$implicit;t.R50("ngModel",o.isSelected)}}function mt(a,s){if(1&a&&t.nrm(0,"img",62),2&a){const o=t.XpG().$implicit,e=t.XpG(3);t.Y8G("src",e.sanitizeURI(o.thumbnailBase64DataURI),t.B4B)("alt",o.fileName)}}function lt(a,s){if(1&a&&t.nrm(0,"img",62),2&a){const o=t.XpG().$implicit,e=t.XpG(3);t.Y8G("src",e.sanitizeURI(o.thumbnailBase64DataURI),t.B4B)("alt",o.fileName)}}function dt(a,s){1&a&&(t.j41(0,"div",63),t.nrm(1,"ion-icon",64),t.j41(2,"span"),t.EFF(3,"PDF"),t.k0s()())}function gt(a,s){1&a&&(t.j41(0,"div",65),t.nrm(1,"ion-icon",66),t.j41(2,"span"),t.EFF(3,"Image"),t.k0s()())}function pt(a,s){if(1&a){const o=t.RV6();t.j41(0,"div",53),t.DNE(1,st,1,1,"ion-checkbox",54),t.j41(2,"div",55),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG(3);return t.Njj(i.openFile(n))}),t.DNE(3,mt,1,2,"img",56)(4,lt,1,2,"img",56)(5,dt,4,0,"div",57)(6,gt,4,0,"div",58),t.k0s(),t.j41(7,"div",59)(8,"div",60),t.EFF(9),t.k0s()()()}if(2&a){const o=s.$implicit,e=t.XpG(3);t.AVh("selected",o.isSelected)("uploading",e.currentUpload&&e.currentUpload.fileName===o.fileName),t.R7$(),t.Y8G("ngIf",!e.hideCheckBox),t.R7$(),t.AVh("disabled",e.disableThumbnailClick),t.R7$(),t.Y8G("ngIf","application/pdf"!==o.contentType),t.R7$(),t.Y8G("ngIf","application/pdf"===o.contentType),t.R7$(),t.Y8G("ngIf","application/pdf"===o.contentType),t.R7$(),t.Y8G("ngIf","application/pdf"!==o.contentType),t.R7$(2),t.Y8G("title",o.fileName),t.R7$(),t.SpI(" ",o.fileName," ")}}function ht(a,s){if(1&a&&(t.j41(0,"div",47)(1,"div",48),t.nrm(2,"ion-icon",49),t.j41(3,"h3",50),t.EFF(4),t.nI1(5,"date"),t.k0s()(),t.j41(6,"div",51),t.DNE(7,pt,10,13,"div",52),t.k0s()()),2&a){const o=s.$implicit,e=t.XpG(2);t.R7$(4),t.JRh(t.i5U(5,2,e.stringToDate(o),"EEEE, MMMM dd, yyyy")),t.R7$(3),t.Y8G("ngForOf",e.attachments[o])}}function ft(a,s){if(1&a&&(t.j41(0,"div",45),t.DNE(1,ht,8,5,"div",46),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.attachmentDates)}}let ut=(()=>{var a;class s{constructor(e,n,i,c,m,r,g,h,p,C,F,_t,vt,bt){var R,M,j,y,O,x;this.platform=e,this.navController=n,this.storageService=i,this.router=c,this.httpService=m,this.dateService=r,this.alertController=g,this.utilityService=h,this.dialog=p,this.domSanitizer=C,this.navService=F,this.actionSheetController=_t,this.pageNavService=vt,this.globalFamilyMemberService=bt,this.attachments=[],this.body={familyMemberId:"",fileName:"",contentType:"",datetime:new Date,thumbnailBase64DataURI:null,base64DataURI:null},this.hideAttachments=!1,this.selectedAttachments=[],this.hideCheckBox=!0,this.isFileNameExists=!1,this.familyMemberSubscription=new L.yU,this.disableThumbnailClick=!1,this.user=this.storageService.get("user"),this.familyMemberId=this.user.id,this.navService.pageChange("Attachments"),this.router.getCurrentNavigation()&&null!==(R=this.router.getCurrentNavigation())&&void 0!==R&&R.extras.state&&null!==(M=this.router.getCurrentNavigation())&&void 0!==M&&null!==(M=M.extras.state)&&void 0!==M&&M.familyMember&&(this.familyMember=null===(O=this.router.getCurrentNavigation())||void 0===O||null===(O=O.extras.state)||void 0===O?void 0:O.familyMember,this.familyMemberId=this.familyMember._id),this.router.getCurrentNavigation()&&null!==(j=this.router.getCurrentNavigation())&&void 0!==j&&j.extras.state&&null!==(y=this.router.getCurrentNavigation())&&void 0!==y&&null!==(y=y.extras.state)&&void 0!==y&&y.appointment&&(this.appointment=null===(x=this.router.getCurrentNavigation())||void 0===x||null===(x=x.extras.state)||void 0===x?void 0:x.appointment);const I=this.globalFamilyMemberService.getSelectedMember();if(I){const z=I._id||I.id;z&&(this.familyMember=I,this.familyMemberId=z,console.log("Using globally selected family member:",z))}this.hideCheckBox=!this.appointment,this.getAttachments(),this.subscribeToFamilyMemberChanges()}subscribeToFamilyMemberChanges(){let e=!0;this.familyMemberSubscription=this.globalFamilyMemberService.selectedFamilyMember$.subscribe(n=>{if(n){const i=n._id||n.id;!e&&i&&i!==this.familyMemberId&&(this.familyMember=n,this.familyMemberId=i,console.log("Family member changed in attachments, refreshing data for:",this.familyMember.fullName||i),this.attachments=[],this.attachmentDates=[],this.selectedAttachments=[],this.hideCheckBox=!0,this.getAttachments()),e=!1}})}ionViewWillEnter(){this.disableThumbnailClick=!1,this.navService.pageChange("Attachments"),this.pageNavService.setupBackButton("/medical-record/attachment-list",()=>{this.router.navigate(["home"])}),this.pageNavService.setupBackButton("/attachment-list",()=>{this.router.navigate(["appointment-details"])}),this.pageNavService.setupBackButton("/home/attachment-list",()=>{this.router.navigate(["appointment-details"])})}delete(e){var n=this;return(0,v.A)(function*(){if(e&&"string"==typeof e)try{const i=`/attachment/${e.toString()}`;yield n.httpService.deleteInBackground(i,!0,!0)}catch{}})()}renameAttachment(e){var n=this;return(0,v.A)(function*(){let i={...e};if(e._id){const m="/attachment/"+e._id;try{i={...yield n.httpService.getInBackground(m,!0,!0)}}catch{}}n.dialog.open(G,{data:{attachmentDetails:i,attached:n.fileNames||[],exist:n.isFileNameExists||!1}}).afterClosed().subscribe(function(){var m=(0,v.A)(function*(r){r&&(n.body={...n.body,base64DataURI:r.base64DataURI,fileName:r.fileName,familyMemberId:r.familyMemberId,thumbnailBase64DataURI:r.thumbnailBase64DataURI,contentType:r.contentType,datetime:r.datetime},e.fileName=r.fileName,r._id&&(yield n.delete(r._id)),n.body.base64DataURI?(yield n.uploadFile(),n.selectedAttachments.length=0):n.utilityService.presentAlert("Base64 string not found","Please ensure the file is properly selected"))});return function(r){return m.apply(this,arguments)}}())})()}getAttachments(){var e=this;return(0,v.A)(function*(){e.isFileNameExists=!1,e.httpService.getInBackground("/attachment/?familyMemberId="+e.familyMemberId,!0,!0).then(i=>{if(i&&Array.isArray(i)){const c=e.groupAttachmentsByDate(i);e.attachmentDates=Object.keys(c),e.attachments=e.deSelectAllAttachments(c)}}).catch(i=>{})})()}groupAttachmentsByDate(e){const n={};e.forEach(c=>{const m=new Date(c.datetime),p=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;n[p]||(n[p]=[]),n[p].push(c)});const i={};return Object.keys(n).sort((c,m)=>new Date(m).getTime()-new Date(c).getTime()).forEach(c=>{i[c]=n[c]}),i}removeAttachment(){var e=this;return(0,v.A)(function*(){e.dialog.open(A.D,{panelClass:["custom-dialog-container"],data:{attachments:e.selectedAttachments,callBack:"attachment-list"}}).afterClosed().subscribe(i=>{e.selectedAttachments=[],e.hideCheckBox=!0,e.getAttachments()})})()}buttonClick(){this.fileInputClick.nativeElement.click()}buttonClickpng(){this.fileInputpngClick.nativeElement.click()}openFile(e){this.disableThumbnailClick=!0,this.httpService.getInBackground("/attachment/"+e._id,!0,!0).then(i=>{if("application/pdf"===i.contentType)return void this.saveAndOpenFile(i.base64DataURI,i.fileName);let c=document.createElement("a");c.href=i.base64DataURI,c.download="Image.png",c.click(),this.disableThumbnailClick=!1})}saveAndOpenFile(e,n){this.disableThumbnailClick=!1;const i=e,c=document.createElement("a"),m=n+".pdf";c.href=i,c.download=m,c.target="_blank",document.body.appendChild(c),c.click()}convertBase64ToBlob(e,n){n=n||"",e=(e=e.replace(/^[^,]+,/,"")).replace(/\s/g,"");const c=window.atob(e),m=[];for(let r=0;r<c.length;r+=512){const g=c.slice(r,r+512),h=new Array(g.length);for(let C=0;C<g.length;C++)h[C]=g.charCodeAt(C);const p=new Uint8Array(h);m.push(p)}return new Blob(m,{type:n})}toDBdateFormat(e){return this.dateService.toDBdateFormat(new Date(e))}sanitizeURI(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}getTime(e){return this.dateService.to12HourFormat(new Date(e).getHours()+":"+new Date(e).getMinutes())}ionViewWillLeave(){this.dialog.closeAll()}onFileChange(e){var n=this,i=e.target.files[0].name;let c=e.target.files[0].type;var m=new FileReader;m.readAsDataURL(e.target.files[0]),m.onload=(0,v.A)(function*(){let g,r=m.result;"image/png"===c&&(n.body.thumbnailBase64DataURI=r,n.body.contentType="image/png",g="img"),("image/jpg"===c||"image/jpeg"===c)&&(n.body.thumbnailBase64DataURI=r,n.body.contentType="image/jpg",g="img"),"application/pdf"===c&&(n.body.thumbnailBase64DataURI="data:image/png;base64,"+n.pdfThumbnail,n.body.contentType="application/pdf",g="doc"),n.body.fileName="",n.body.base64DataURI=r,n.body.fileName=i,yield n.uploadFile();try{n.fileInputClick.nativeElement.value=null,n.fileInputpngClick.nativeElement.value=null}catch{}n.body.datetime=new Date,n.renameAttachment(n.currentUpload)})}stringToDate(e){return new Date(e)}generateFromImage(e,n,i,c,m){const r=document.createElement("canvas"),g=new Image;g.onload=()=>{let h=g.width,p=g.height;h>p?h>n&&(p*=n/h,h=n):p>i&&(h*=i/p,p=i),r.width=h,r.height=p,r.getContext("2d").drawImage(g,0,0,h,p);const F=r.toDataURL("image/png",c);m(F)},g.src=e}uploadFile(){var e=this;return(0,v.A)(function*(){e.body.base64DataURI?(e.body.familyMemberId=e.familyMemberId,yield e.httpService.postInBackground("/attachment",e.body,!0,!0).then(i=>{i&&(e.getAttachments(),e.currentUpload=i)}).catch(i=>{i.error&&11e3===i.error.code?(e.isFileNameExists=!0,e.renameAttachment(e.body)):e.utilityService.presentAlert("Error!",i.message),e.getAttachments()})):e.utilityService.presentAlert("Base64 string not found","Please ensure the file is properly selected")})()}fileChecked(e,n){e.detail.checked?this.selectedAttachments.push(n):this.selectedAttachments.filter(i=>{i._id===n._id&&this.selectedAttachments.splice(this.selectedAttachments.findIndex(c=>c===n),1)})}unmarkAttachments(){this.selectedAttachments=[],this.hideCheckBox=!0,this.attachments=this.deSelectAllAttachments(this.attachments)}deSelectAllAttachments(e){for(let n=0;n<this.attachmentDates.length;n++)e[this.attachmentDates[n]]=e[this.attachmentDates[n]].map(i=>({...i,isSelected:!1}));return e}shareAttachmentToVisit(){const e=[];this.selectedAttachments.map(c=>{e.push(c._id)}),this.httpService.postInBackground("/attachment/share",{familyMemberId:this.familyMemberId,attachmentIds:e,hospitalCode:this.appointment.hospital.code,contextId:this.appointment.visitId,contextType:"VISIT"},!0,!0).then(c=>{c&&this.router.navigate(["/home/appointment-details"],{state:{appointmentDetails:this.appointment}})}).catch(c=>{this.utilityService.presentAlert("Error!",c.message)})}ngOnDestroy(){this.pageNavService.cleanupBackButton("/medical-record/attachment-list"),this.pageNavService.cleanupBackButton("/attachment-list"),this.pageNavService.cleanupBackButton("/home/attachment-list"),this.familyMemberSubscription&&this.familyMemberSubscription.unsubscribe()}}return(a=s).\u0275fac=function(e){return new(e||a)(t.rXU(B.OD),t.rXU(B.q9),t.rXU(X.n),t.rXU(P.Ix),t.rXU(f.k),t.rXU(Y.k),t.rXU(u.hG),t.rXU(d.Q),t.rXU(k.bZ),t.rXU(N.up),t.rXU(V.o),t.rXU(u.GD),t.rXU($.V),t.rXU(J.b))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-attachment-list"]],viewQuery:function(e,n){if(1&e&&(t.GBs(K,5),t.GBs(W,5)),2&e){let i;t.mGM(i=t.lsd())&&(n.fileInputClick=i.first),t.mGM(i=t.lsd())&&(n.fileInputpngClick=i.first)}},standalone:!0,features:[t.aNF],decls:16,vars:6,consts:[["fileInput",""],["fileInputpng",""],[1,"attachment-list-page"],[1,"container"],[1,"header"],[1,"subtitle"],[4,"ngIf"],["accept","application/pdf,image/png,image/jpeg","type","file",2,"display","none",3,"change"],["accept","image/png,image/jpeg","type","file",2,"display","none",3,"change"],["class","action-bar",4,"ngIf"],["class","selection-action-bar",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","attachments-container",4,"ngIf"],[1,"action-bar"],[1,"info-section"],["name","information-circle-outline",1,"info-icon"],[1,"info-text"],[1,"button-group"],["fill","outline","size","default","class","secondary-button",3,"click",4,"ngIf"],["fill","solid","size","default","class","primary-button",3,"click",4,"ngIf"],["fill","outline","size","default",1,"secondary-button",3,"click"],["slot","start","name","checkmark-circle-outline"],["fill","solid","size","default",1,"primary-button",3,"click"],["slot","start","name","add-circle-outline"],[1,"selection-action-bar"],[1,"selection-info"],["name","checkmark-circle",1,"selection-icon"],[1,"selection-count"],[1,"selection-actions"],["fill","clear","size","small","class","action-btn",3,"click",4,"ngIf"],["fill","clear","size","small","color","danger","class","action-btn",3,"click",4,"ngIf"],["fill","clear","size","small",1,"action-btn","cancel-btn",3,"click"],["slot","start","name","close-circle-outline"],["fill","clear","size","small",1,"action-btn",3,"click"],["slot","start","name","create-outline"],["fill","clear","size","small","color","danger",1,"action-btn",3,"click"],["slot","start","name","trash-outline"],["slot","start","name","share-outline"],[1,"empty-state"],[1,"empty-icon-wrapper"],["name","document-attach-outline",1,"empty-icon"],[1,"text-professional-title"],[1,"text-professional-body"],["size","default","fill","solid","class","add-first-button",3,"click",4,"ngIf"],["size","default","fill","solid",1,"add-first-button",3,"click"],[1,"attachments-container"],["class","date-section",4,"ngFor","ngForOf"],[1,"date-section"],[1,"date-header"],["name","calendar-outline",1,"date-icon"],[1,"date-title"],[1,"attachments-grid"],["class","attachment-card",3,"selected","uploading",4,"ngFor","ngForOf"],[1,"attachment-card"],["class","attachment-checkbox","mode","ios",3,"ngModel","ionChange","ngModelChange",4,"ngIf"],[1,"attachment-thumbnail",3,"click"],["class","thumbnail-image",3,"src","alt",4,"ngIf"],["class","file-type-badge",4,"ngIf"],["class","file-type-badge image-badge",4,"ngIf"],[1,"attachment-info"],[1,"file-name",3,"title"],["mode","ios",1,"attachment-checkbox",3,"ionChange","ngModelChange","ngModel"],[1,"thumbnail-image",3,"src","alt"],[1,"file-type-badge"],["name","document-text-outline"],[1,"file-type-badge","image-badge"],["name","image-outline"]],template:function(e,n){if(1&e){const i=t.RV6();t.j41(0,"ion-content",2)(1,"div",3)(2,"header",4)(3,"h1"),t.EFF(4,"Medical Attachments"),t.k0s(),t.j41(5,"p",5),t.DNE(6,Q,2,1,"span",6)(7,H,2,0,"span",6),t.k0s()(),t.j41(8,"input",7,0),t.bIt("change",function(m){return t.eBV(i),t.Njj(n.onFileChange(m))}),t.k0s(),t.j41(10,"input",8,1),t.bIt("change",function(m){return t.eBV(i),t.Njj(n.onFileChange(m))}),t.k0s(),t.DNE(12,tt,8,2,"div",9)(13,ot,14,5,"div",10)(14,rt,8,1,"div",11)(15,ft,2,1,"div",12),t.k0s()()}2&e&&(t.R7$(6),t.Y8G("ngIf",n.familyMember),t.R7$(),t.Y8G("ngIf",!n.familyMember),t.R7$(5),t.Y8G("ngIf",!n.appointment&&n.attachmentDates&&n.attachmentDates.length>0),t.R7$(),t.Y8G("ngIf",n.selectedAttachments.length>0),t.R7$(),t.Y8G("ngIf",!n.attachmentDates||0===n.attachmentDates.length),t.R7$(),t.Y8G("ngIf",n.attachmentDates&&n.attachmentDates.length>0))},dependencies:[u.bv,u.Jm,u.eY,u.W9,u.iq,u.hB,_.bT,_.pM,b.YN,b.BC,b.vS,_.vh,_.MD],styles:['.attachment-list-page[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: var(--mc-spacing-2xl);--background: var(--mc-bg-tertiary);min-height:var(--app-height, 100vh)}.ios[_ngcontent-%COMP%]   .attachment-list-page[_ngcontent-%COMP%]{padding-bottom:calc(var(--mc-spacing-2xl) + var(--safe-area-bottom))}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 var(--mc-spacing-xl)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-md)}}.header[_ngcontent-%COMP%]{padding:var(--mc-spacing-2xl) 0 var(--mc-spacing-xl) 0;animation:_ngcontent-%COMP%_slideDown .4s ease-out}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-xl);font-weight:600;color:var(--mc-text-primary);margin:0 0 var(--mc-spacing-xs) 0}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-lg);color:var(--mc-text-secondary);margin:0;font-weight:400}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--mc-spacing-lg);background:var(--mc-bg-primary);border-radius:var(--mc-radius-lg);box-shadow:var(--mc-shadow-sm);margin-bottom:var(--mc-spacing-xl);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out;border:1px solid var(--mc-border-secondary)}.action-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-sm)}.action-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-md);color:var(--mc-color-info-500);flex-shrink:0}.action-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:var(--font-body-md);color:var(--mc-text-secondary);font-weight:500}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:var(--mc-spacing-md)}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: var(--mc-radius-md);--padding-start: var(--mc-spacing-lg);--padding-end: var(--mc-spacing-lg);font-weight:600;text-transform:none;transition:var(--mc-transition-base)}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-md)}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .primary-button[_ngcontent-%COMP%]{--background: var(--mc-color-primary-500);--background-hover: var(--mc-color-primary-600);--color: var(--mc-text-inverse);--box-shadow: var(--mc-shadow-sm)}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .secondary-button[_ngcontent-%COMP%]{--border-color: var(--mc-color-primary-500);--color: var(--mc-color-primary-500);--border-width: 2px}.selection-action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--mc-spacing-lg);background:linear-gradient(135deg,var(--mc-color-primary-50) 0%,var(--mc-color-info-50) 100%);border-radius:var(--mc-radius-lg);margin-bottom:var(--mc-spacing-xl);animation:_ngcontent-%COMP%_fadeInUp .3s ease-out;border:2px solid var(--mc-color-primary-200);box-shadow:var(--mc-shadow-md)}.selection-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-md)}.selection-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   .selection-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-lg);color:var(--mc-color-primary-500)}.selection-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%]{font-size:var(--font-body-lg);font-weight:600;color:var(--mc-text-primary)}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]{display:flex;gap:var(--mc-spacing-xs);flex-wrap:wrap}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--padding-start: var(--mc-spacing-md);--padding-end: var(--mc-spacing-md);font-weight:500;text-transform:none;font-size:var(--font-body-md)}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-sm)}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{--color: var(--mc-text-secondary)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--mc-spacing-3xl) var(--mc-spacing-xl);text-align:center;background:var(--mc-bg-primary);border-radius:var(--mc-radius-xl);margin:var(--mc-spacing-2xl) 0;box-shadow:var(--mc-shadow-sm);border:1px solid var(--mc-border-secondary);animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}.empty-state[_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]{width:120px;height:120px;background:linear-gradient(135deg,var(--mc-color-primary-50) 0%,var(--mc-color-info-50) 100%);border-radius:var(--mc-radius-2xl);display:flex;align-items:center;justify-content:center;margin-bottom:var(--mc-spacing-xl);box-shadow:var(--mc-shadow-md)}.empty-state[_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--mc-color-primary-500)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-md);color:var(--mc-text-primary);font-weight:600;font-size:var(--font-heading-lg)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-xl);max-width:400px;color:var(--mc-text-secondary);font-size:var(--font-body-md);line-height:1.6}.empty-state[_ngcontent-%COMP%]   .add-first-button[_ngcontent-%COMP%]{--border-radius: var(--mc-radius-lg);--padding-start: var(--mc-spacing-xl);--padding-end: var(--mc-spacing-xl);--background: var(--mc-color-primary-500);--color: var(--mc-text-inverse);--box-shadow: var(--mc-shadow-md);font-weight:600;text-transform:none;height:48px}.empty-state[_ngcontent-%COMP%]   .add-first-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-md)}.attachments-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.date-section[_ngcontent-%COMP%]{margin-bottom:var(--mc-spacing-2xl)}.date-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--mc-spacing-md);margin-bottom:var(--mc-spacing-lg);padding-bottom:var(--mc-spacing-sm);border-bottom:2px solid var(--mc-border-primary)}.date-header[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-lg);color:var(--mc-color-primary-500)}.date-header[_ngcontent-%COMP%]   .date-title[_ngcontent-%COMP%]{font-size:var(--font-heading-md);font-weight:600;color:var(--mc-text-primary);margin:0}.attachments-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--mc-spacing-lg)}@media (max-width: 768px){.attachments-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--mc-spacing-md)}}@media (max-width: 480px){.attachments-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--mc-spacing-sm)}}.attachment-card[_ngcontent-%COMP%]{position:relative;background:var(--mc-bg-primary);border-radius:var(--mc-radius-lg);overflow:hidden;box-shadow:var(--mc-shadow-sm);border:2px solid var(--mc-border-secondary);transition:all var(--mc-transition-base);animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}.attachment-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--mc-shadow-lg);border-color:var(--mc-color-primary-200)}.attachment-card.selected[_ngcontent-%COMP%]{border-color:var(--mc-color-primary-500);box-shadow:0 0 0 3px var(--mc-color-primary-100),var(--mc-shadow-md)}.attachment-card.uploading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.attachment-card.uploading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--mc-bg-primary);opacity:.8}.attachment-card[_ngcontent-%COMP%]   .attachment-checkbox[_ngcontent-%COMP%]{position:absolute;top:var(--mc-spacing-sm);right:var(--mc-spacing-sm);z-index:var(--mc-z-sticky);--size: 24px;--border-width: 2px;--border-color: var(--mc-color-primary-500);--background-checked: var(--mc-color-primary-500)}.attachment-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;background:var(--mc-bg-secondary);cursor:pointer;overflow:hidden}.attachment-thumbnail.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.7}@media (max-width: 768px){.attachment-thumbnail[_ngcontent-%COMP%]{height:180px}}@media (max-width: 480px){.attachment-thumbnail[_ngcontent-%COMP%]{height:150px}}.attachment-thumbnail[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform var(--mc-transition-base)}.attachment-thumbnail[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.attachment-thumbnail[_ngcontent-%COMP%]   .file-type-badge[_ngcontent-%COMP%]{position:absolute;top:var(--mc-spacing-sm);left:var(--mc-spacing-sm);display:flex;align-items:center;gap:var(--mc-spacing-xs);padding:var(--mc-spacing-xs) var(--mc-spacing-sm);background:#dc2626f2;color:var(--mc-text-inverse);border-radius:var(--mc-radius-sm);font-size:var(--font-body-xs);font-weight:600;box-shadow:var(--mc-shadow-sm)}.attachment-thumbnail[_ngcontent-%COMP%]   .file-type-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.attachment-thumbnail[_ngcontent-%COMP%]   .file-type-badge.image-badge[_ngcontent-%COMP%]{background:#10b981f2}.attachment-info[_ngcontent-%COMP%]{padding:var(--mc-spacing-md)}.attachment-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:var(--font-body-sm);font-weight:500;color:var(--mc-text-primary);text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.4}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:var(--mc-spacing-xl) 0 var(--mc-spacing-md) 0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-lg)}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-md)}.action-bar[_ngcontent-%COMP%]{flex-direction:column;gap:var(--mc-spacing-md);align-items:stretch}.action-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{justify-content:center}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{justify-content:stretch}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1}.selection-action-bar[_ngcontent-%COMP%]{flex-direction:column;gap:var(--mc-spacing-md);align-items:stretch}.selection-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%], .selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]{justify-content:center}.date-header[_ngcontent-%COMP%]   .date-title[_ngcontent-%COMP%]{font-size:var(--font-heading-sm)}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0 var(--mc-spacing-sm)}.header[_ngcontent-%COMP%]{padding:var(--mc-spacing-lg) 0 var(--mc-spacing-sm) 0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.action-bar[_ngcontent-%COMP%]{padding:var(--mc-spacing-md)}.action-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}.action-bar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.selection-action-bar[_ngcontent-%COMP%]{padding:var(--mc-spacing-md)}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]{width:100%}.selection-action-bar[_ngcontent-%COMP%]   .selection-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;--padding-start: var(--mc-spacing-sm);--padding-end: var(--mc-spacing-sm);font-size:var(--font-body-sm)}.empty-state[_ngcontent-%COMP%]{padding:var(--mc-spacing-xl) var(--mc-spacing-md)}.empty-state[_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]{width:80px;height:80px}.empty-state[_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-body-sm)}.date-header[_ngcontent-%COMP%]{gap:var(--mc-spacing-sm)}.date-header[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-md)}.date-header[_ngcontent-%COMP%]   .date-title[_ngcontent-%COMP%]{font-size:var(--font-body-lg)}.attachment-info[_ngcontent-%COMP%]{padding:var(--mc-spacing-sm)}.attachment-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:var(--font-body-xs)}}[data-theme=dark][_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .attachment-card[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background:var(--mc-bg-secondary);border-color:var(--mc-border-primary)}[data-theme=dark][_ngcontent-%COMP%]   .selection-action-bar[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-900) 0%,var(--mc-color-info-900) 100%);border-color:var(--mc-color-primary-700)}[data-theme=dark][_ngcontent-%COMP%]   .attachment-thumbnail[_ngcontent-%COMP%]{background:var(--mc-bg-tertiary)}[data-theme=dark][_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mc-color-primary-900) 0%,var(--mc-color-info-900) 100%)}[data-theme=dark][_ngcontent-%COMP%]   .empty-icon-wrapper[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{color:var(--mc-color-primary-400)}']}),s})()},8135:(D,w,l)=>{l.d(w,{V:()=>u});var v=l(4438),A=l(600),k=l(9012);let u=(()=>{var _;class b{constructor(d,f){this.platform=d,this.router=f,this.activeSubscriptions=new Map}setupBackButton(d,f){Array.isArray(d)?d.forEach(P=>{this.setupSingleBackButton(P.route,P.handler)}):"string"==typeof d&&f&&this.setupSingleBackButton(d,f)}setupSingleBackButton(d,f){this.cleanupBackButton(d);const P=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===d&&f()});this.activeSubscriptions.set(d,P)}cleanupBackButton(d){const f=this.activeSubscriptions.get(d);f&&(f.unsubscribe(),this.activeSubscriptions.delete(d))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((d,f)=>{d.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(d="/home"){window.history.length>1?window.history.back():this.router.navigate([d])}smartNavigateBack(d){const P={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[d];P?this.router.navigate([P]):this.navigateBack()}}return(_=b).\u0275fac=function(d){return new(d||_)(v.KVO(A.OD),v.KVO(k.Ix))},_.\u0275prov=v.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),b})()}}]);