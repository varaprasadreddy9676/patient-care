"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5211],{5211:(O,d,s)=>{s.r(d),s.d(d,{HospitalPreferencePage:()=>M,PICK_FORMATS:()=>u,PickDateAdapter:()=>m});var h=s(467),_=s(3),f=s(177),i=s(9893),g=s(2765),e=s(4438),P=s(3629),v=s(8023),E=s(9012),U=s(9934);function y(a,l){if(1&a){const o=e.RV6();e.j41(0,"ion-row",10)(1,"ion-row",5)(2,"ion-col",5)(3,"mat-checkbox",11),e.bIt("change",function(n){const r=e.eBV(o).$implicit,c=e.XpG();return e.Njj(c.onChange(n,r))}),e.j41(4,"span"),e.EFF(5),e.k0s()()()(),e.j41(6,"ion-row",5)(7,"ion-col",5)(8,"div"),e.EFF(9),e.k0s()()()()}if(2&a){const o=l.$implicit;e.R7$(3),e.Y8G("checked",o.preferred),e.R7$(2),e.SpI(" ",o.name," "),e.R7$(4),e.SpI(" ",o.address," ")}}const u={parse:{dateInput:{month:"numeric",year:"numeric",day:"numeric"}},display:{dateInput:"input",monthYearLabel:{year:"numeric",month:"numeric"},dateA11yLabel:{year:"numeric",month:"numeric",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"numeric"}}};class m extends _.xW{format(l,o){return"input"===o?(0,f.Yq)(l,"dd/MM/yyyy",this.locale):l.toDateString()}}let M=(()=>{var a;class l{constructor(t,n,r,c){this.storageService=t,this.httpService=n,this.router=r,this.utilityService=c,this.hospitalPreferences=[],this.getHospitals(),this.user=this.storageService.get("user")}getHospitals(){var t=this;return(0,h.A)(function*(){yield t.httpService.get("/hospital/?active=true").then(r=>{r.length>0&&(t.hospitals=r,t.getCurrentUser())}).catch(r=>{})})()}getCurrentUser(){var t=this;return(0,h.A)(function*(){const n="/user/"+t.user.id;yield t.httpService.get(n).then(r=>{if(r){t.selectedUser=r.data;for(let c=0;c<t.hospitals.length;c++)try{if(t.selectedUser.preference.hospitalPreferences.length>0)for(let p=0;p<t.selectedUser.preference.hospitalPreferences.length;p++){if(t.hospitals[c]._id===t.selectedUser.preference.hospitalPreferences[p].hospitalId){t.hospitals[c].preferred=!0;break}t.hospitals[c].preferred=!1}}catch{}}}).catch(r=>{})})()}onChange(t,n){if(!0===t.checked)try{if(this.selectedUser.preference.hospitalPreferences.length>0){for(let r=0;r<this.selectedUser.preference.hospitalPreferences.length;r++)if(this.selectedUser.preference.hospitalPreferences[r]._id!==n._id){this.selectedUser.preference.hospitalPreferences.push({hospitalId:n._id});break}}else this.selectedUser.preference.hospitalPreferences.push({hospitalId:n._id})}catch{this.selectedUser.preference={hospitalPreferences:[]},this.selectedUser.preference.hospitalPreferences.push({hospitalId:n._id})}else for(let r=0;r<this.selectedUser.preference.hospitalPreferences.length;r++)if(this.selectedUser.preference.hospitalPreferences[r].hospitalId===n._id){this.selectedUser.preference.hospitalPreferences.splice(r,1);break}}savePreference(){var t=this;return(0,h.A)(function*(){const n="/signup/"+t.user.id;yield t.httpService.put(n,t.selectedUser).then(r=>{r&&t.router.navigate(["/home/appointment-booking"])}).catch(r=>{t.utilityService.presentAlert("Error!","Could not save the preferences.")})})()}ngOnInit(){}}return(a=l).\u0275fac=function(t){return new(t||a)(e.rXU(P.n),e.rXU(v.k),e.rXU(E.Ix),e.rXU(U.Q))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-hospital-preference"]],standalone:!0,features:[e.Jv_([{provide:_.MJ,useClass:m},{provide:_.de,useValue:u}]),e.aNF],decls:15,vars:1,consts:[[1,"primaryDark"],["slot","start"],["text","","defaultHref","appointment-booking","icon","chevron-back-outline"],[1,"titleHeader"],[1,"titleText"],[1,"ion-no-padding"],["lines","none"],["class","rowEqualDistribution",4,"ngFor","ngForOf"],["no-border",""],["align","center",1,"footer",3,"click"],[1,"rowEqualDistribution"],[3,"change","checked"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title",3)(5,"ion-text",4),e.EFF(6,"Preferred Hospital"),e.k0s()()()(),e.j41(7,"ion-content",5)(8,"ion-list",6)(9,"ion-item",5)(10,"ion-grid",5),e.DNE(11,y,10,3,"ion-row",7),e.k0s()()()(),e.j41(12,"ion-footer",8)(13,"ion-toolbar",9),e.bIt("click",function(){return n.savePreference()}),e.EFF(14," SAVE PREFERENCES "),e.k0s()()),2&t&&(e.R7$(11),e.Y8G("ngForOf",n.hospitals))},dependencies:[i.bv,i.QW,i.hU,i.W9,i.M0,i.lO,i.eU,i.uz,i.nf,i.ln,i.IO,i.BC,i.ai,i.el,f.pM,g.So],styles:[".display-full-width[_ngcontent-%COMP%]{width:100%}.rowEqualDistribution[_ngcontent-%COMP%]{margin-top:var(--mc-spacing-md)}div[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm);margin-left:var(--mc-spacing-xl);color:var(--mc-text-tertiary)}span[_ngcontent-%COMP%]{font-size:var(--mc-font-body-md);color:var(--mc-text-primary)}ion-grid[_ngcontent-%COMP%]{color:var(--mc-text-primary);font-size:var(--mc-font-body-sm);margin-left:var(--mc-spacing-md);width:100%}  .mat-checkbox-checked.mat-accent .mat-checkbox-background, .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:var(--mc-color-primary-500)}"]}),l})()}}]);