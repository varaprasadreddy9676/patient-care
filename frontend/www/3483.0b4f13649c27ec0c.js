"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3483],{3483:(E,u,r)=>{r.r(u),r.d(u,{FacilityInformationPage:()=>I});var g=r(467),a=r(9893),O=r(177),t=r(4438),c=r(5351),v=r(8023),P=r(9934),o=r(600),s=r(9012),l=r(3629),b=r(8135);function C(m,y){if(1&m){const p=t.RV6();t.j41(0,"ion-col",11)(1,"ion-card",12),t.bIt("click",function(){const e=t.eBV(p).$implicit,n=t.XpG();return t.Njj(n.editFacility(e))}),t.j41(2,"ion-card-content")(3,"ion-grid",13)(4,"ion-row",9)(5,"ion-col",14),t.nrm(6,"ion-icon",15),t.k0s(),t.j41(7,"ion-col",16)(8,"ion-grid",13)(9,"ion-row")(10,"ion-col",9)(11,"strong",17),t.EFF(12),t.k0s()()(),t.j41(13,"ion-row",18),t.nrm(14,"ion-col",9),t.k0s()()()()()()()()}if(2&m){const p=y.$implicit;t.R7$(12),t.SpI(" ",p.name," ")}}let I=(()=>{var m;class y{constructor(i,e,n,d,M,U,D,B,A){var h,f,_;this.dialog=i,this.httpService=e,this.utilityService=n,this.navCtrl=d,this.platform=M,this.router=U,this.loadingController=D,this.storageService=B,this.pageNavService=A,this.pageTitle=" ",this.facilities=[],this.facilitiesTemp=[],this.showAdd=!1,this.isAdminUser=!1,this.isRootUser=!1,this.isSysAdminUser=!1,this.facilities=null===(h=this.router.getCurrentNavigation())||void 0===h||null===(h=h.extras.state)||void 0===h?void 0:h.facilities,this.name=null===(f=this.router.getCurrentNavigation())||void 0===f||null===(f=f.extras.state)||void 0===f?void 0:f.name,this.pageTitle=null===(_=this.router.getCurrentNavigation())||void 0===_||null===(_=_.extras.state)||void 0===_?void 0:_.title}ionViewWillEnter(){var i=this;return(0,g.A)(function*(){i.user=i.storageService.get("user"),yield i.getCurrentUser(),i.name&&i.getFacilityDetails(i.name),i.pageNavService.setupBackButton([{route:"/facility-information",handler:()=>i.router.navigate(["facility-information-template"])},{route:"/home/facility-information",handler:()=>i.router.navigate(["/home/facility-information-template"])}])})()}getCurrentUser(){var i=this;return(0,g.A)(function*(){const e="/user/"+i.user.id;yield i.httpService.get(e).then(n=>{n&&(i.isAdminUser=n.data.roles&&!0===n.data.roles.admin,i.isRootUser=n.data.roles&&!0===n.data.roles.root,i.isSysAdminUser=n.data.roles&&!0===n.data.roles.sysadmin,(i.isAdminUser||i.isRootUser||i.isSysAdminUser)&&(i.showAdd=!0))}).catch(n=>{})})()}getFacilityDetails(i){var e=this;return(0,g.A)(function*(){let n;n=e.showAdd?"/facilityInformation/?type="+i:"/facilityInformation/?type="+i+"&active=true",yield e.httpService.get(n).then(d=>{d&&(e.facilities=d,e.facilitiesTemp=d)}).catch(d=>{})})()}facilityDetail(i){}addFacility(){this.router.navigate(["/home/edit-facility-information"],{state:{pageTitle:this.pageTitle,name:this.name}})}editFacility(i){this.showAdd&&this.router.navigate(["/home/edit-facility-information"],{state:{facility:i,pageTitle:this.pageTitle,name:this.name}})}filterFacilities(i){const e=i.target.value;this.facilities=e&&""!==e.trim()?this.facilities.filter(n=>n.name.toLowerCase().indexOf(e.toLowerCase())>-1||n.phone.toLowerCase().indexOf(e.toLowerCase())>-1||n.location.name.toLowerCase().indexOf(e.toLowerCase())>-1||n.location.pincode.toLowerCase().indexOf(e.toLowerCase())>-1||n.location.area.toLowerCase().indexOf(e.toLowerCase())>-1||n.location.city.toLowerCase().indexOf(e.toLowerCase())>-1):this.facilitiesTemp.filter(n=>this.facilitiesTemp)}ngOnInit(){}ngOnDestroy(){this.pageNavService.cleanup()}}return(m=y).\u0275fac=function(i){return new(i||m)(t.rXU(c.bZ),t.rXU(v.k),t.rXU(P.Q),t.rXU(o.q9),t.rXU(o.OD),t.rXU(s.Ix),t.rXU(a.Xi),t.rXU(l.n),t.rXU(b.V))},m.\u0275cmp=t.VBU({type:m,selectors:[["app-facility-information"]],standalone:!0,features:[t.aNF],decls:13,vars:3,consts:[[1,"primaryDark"],["slot","start"],["text","","defaultHref","facility-information-template","icon","chevron-back-outline"],[1,"titleHeader"],[1,"titleText"],["name","add-circle-outline","slot","end",2,"margin-right","8px","zoom","2","color","white",3,"click","hidden"],["padding-bottom","",1,"ion-no-padding"],["slot","fixed","placeholder","Search by name / area / city / pincode",1,"ion-no-padding",3,"ionInput"],[1,"ion-no-padding",2,"margin-top","50px"],[1,"ion-no-padding"],["class","ion-no-padding","size","12","size-lg","4","size-md","6","size-sm","6",4,"ngFor","ngForOf"],["size","12","size-lg","4","size-md","6","size-sm","6",1,"ion-no-padding"],[1,"ion-no-padding",3,"click"],[1,"ion-no-padding","header"],["size","1",1,"ion-no-padding"],["name","location",1,"locationIcon"],["size","10","offset","1"],[2,"font-weight","400","color","#a9c145"],[1,"row-spacing"]],template:function(i,e){1&i&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title",3)(5,"ion-text",4),t.EFF(6),t.k0s()(),t.j41(7,"ion-icon",5),t.bIt("click",function(){return e.addFacility()}),t.k0s()()(),t.j41(8,"ion-content",6)(9,"ion-searchbar",7),t.bIt("ionInput",function(d){return e.filterFacilities(d)}),t.k0s(),t.j41(10,"ion-grid",8)(11,"ion-row",9),t.DNE(12,C,15,1,"ion-col",10),t.k0s()()()),2&i&&(t.R7$(6),t.JRh(e.pageTitle),t.R7$(),t.Y8G("hidden",!e.showAdd),t.R7$(5),t.Y8G("ngForOf",e.facilities))},dependencies:[a.bv,a.QW,a.b_,a.I9,a.hU,a.W9,a.lO,a.eU,a.iq,a.ln,a.S1,a.IO,a.BC,a.ai,a.Gw,a.el,O.pM],styles:["ion-list[_ngcontent-%COMP%]{width:100%;margin-left:8px}ion-card[_ngcontent-%COMP%]{cursor:pointer;padding:0 3px 3px;background-color:#fff}ion-fab[_ngcontent-%COMP%]{transform:translateY(-85px);z-index:1001}@supports (padding-bottom: env(safe-area-inset-bottom)){ion-fab[_ngcontent-%COMP%]{transform:translateY(calc(-85px - env(safe-area-inset-bottom)))}}.row-spacing[_ngcontent-%COMP%]{margin-top:15px}ion-avatar[_ngcontent-%COMP%]{width:80px;height:80px;padding-left:0}.floating-button[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:1.5%;text-align:center}ion-icon[_ngcontent-%COMP%]{color:#00f}.locationIcon[_ngcontent-%COMP%]{zoom:2;padding:3px}  .mat-slide-toggle.mat-checked:not(.mat-disabled) .mat-slide-toggle-bar{background-color:#00f}  .mat-slide-toggle.mat-checked:not(.mat-disabled) .mat-slide-toggle-thumb{background-color:#00f}"]}),y})()},8135:(E,u,r)=>{r.d(u,{V:()=>t});var g=r(4438),a=r(600),O=r(9012);let t=(()=>{var c;class v{constructor(o,s){this.platform=o,this.router=s,this.activeSubscriptions=new Map}setupBackButton(o,s){Array.isArray(o)?o.forEach(l=>{this.setupSingleBackButton(l.route,l.handler)}):"string"==typeof o&&s&&this.setupSingleBackButton(o,s)}setupSingleBackButton(o,s){this.cleanupBackButton(o);const l=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.url===o&&s()});this.activeSubscriptions.set(o,l)}cleanupBackButton(o){const s=this.activeSubscriptions.get(o);s&&(s.unsubscribe(),this.activeSubscriptions.delete(o))}cleanupAllSubscriptions(){this.activeSubscriptions.forEach((o,s)=>{o.unsubscribe()}),this.activeSubscriptions.clear()}cleanup(){this.cleanupAllSubscriptions()}navigateBack(o="/home"){window.history.length>1?window.history.back():this.router.navigate([o])}smartNavigateBack(o){const l={"/appointment-list":"/home","/appointment-booking":"/appointment-list","/select-patient":"/appointment-booking","/confirm-appointment":"/appointment-booking","/appointment-confirmed":"/appointment-list","/appointment-details":"/appointment-list","/consent-form":"/appointment-booking","/prescription":"/home","/bills":"/home","/bill-details":"/bills","/family-member-list":"/home","/home/profiles":"/home","/family-member-form":"/home/profiles","/profile-edition":"/home","/attachment-list":"/home","/medical-record/attachment-list":"/home","/report-attachment-list":"/home","/medical-record/report-attachment-list":"/home","/family-member-attachment-list":"/home","/patient-medical-record":"/home","/patient-list":"/home","/emr-visits":"/patient-list","/emr":"/home","/medical-attachments":"/patient-medical-record","/facility-information":"/facility-information-template","/facility-information-template":"/home","/edit-facility-information-page":"/facility-information","/service-requests":"/home","/new-service-request":"/service-requests","/reminder":"/home"}[o];l?this.router.navigate([l]):this.navigateBack()}}return(c=v).\u0275fac=function(o){return new(o||c)(g.KVO(a.OD),g.KVO(O.Ix))},c.\u0275prov=g.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),v})()}}]);