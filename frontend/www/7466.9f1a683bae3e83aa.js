"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7466],{7466:(ee,b,l)=>{l.r(b),l.d(b,{HomeTemplatePage:()=>J});var s=l(9893),g=l(9012),p=l(467),m=l(177),v=l(8359),e=l(4438),h=l(8875),f=l(9934);function _(o,r){if(1&o&&(e.qex(0),e.nrm(1,"img",21),e.bVm()),2&o){const i=e.XpG(2).$implicit,t=e.XpG(3);e.R7$(),e.Y8G("src",t.getPhoto(i),e.B4B)("alt",i.fullName||"Family member avatar")}}function M(o,r){if(1&o&&(e.j41(0,"span",22),e.EFF(1),e.k0s()),2&o){const i=e.XpG(2).$implicit,t=e.XpG(3);e.R7$(),e.SpI(" ",t.getInitials((null==i?null:i.fullName)||"")," ")}}function C(o,r){if(1&o&&(e.j41(0,"div",16)(1,"div",17),e.DNE(2,_,2,2,"ng-container",18)(3,M,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"div",19),e.nrm(6,"ion-icon",20),e.k0s()()),2&o){const i=e.sdS(4),t=e.XpG().$implicit,n=e.XpG(3);e.R7$(2),e.Y8G("ngIf",n.hasPhoto(t))("ngIfElse",i),e.R7$(3),e.AVh("visible",n.selectedMemberId&&t&&n.selectedMemberId===n.getMemberId(t))}}function P(o,r){if(1&o&&(e.j41(0,"div",23)(1,"h3",24),e.EFF(2),e.k0s(),e.j41(3,"p",25),e.EFF(4),e.k0s()()),2&o){const i=e.XpG().$implicit;e.R7$(2),e.JRh(null==i?null:i.fullName),e.R7$(2),e.JRh((null==i?null:i.relation)||(null==i?null:i.relationshipToUser)||"Family Member")}}function O(o,r){if(1&o){const i=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){const n=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(n&&a.selectMember(n))}),e.DNE(1,C,7,4,"div",13)(2,P,5,2,"div",14),e.nrm(3,"div",15),e.k0s()}if(2&o){const i=r.$implicit,t=e.XpG(3);e.AVh("disabled",t.selectedMemberId&&i&&t.selectedMemberId!==t.getMemberId(i))("selected",t.selectedMemberId&&i&&t.selectedMemberId===t.getMemberId(i)),e.R7$(),e.Y8G("ngIf",i),e.R7$(),e.Y8G("ngIf",i)}}function y(o,r){if(1&o&&(e.j41(0,"div",10),e.DNE(1,O,4,6,"div",11),e.k0s()),2&o){const i=e.XpG(2);e.R7$(),e.Y8G("ngForOf",i.familyMembers)("ngForTrackBy",i.trackByMemberId)}}function w(o,r){if(1&o){const i=e.RV6();e.j41(0,"div",26),e.nrm(1,"ion-icon",27),e.j41(2,"h3"),e.EFF(3,"No Family Members"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Add family members to get started"),e.k0s(),e.j41(6,"ion-button",28),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.closeModal())}),e.nrm(7,"ion-icon",29),e.EFF(8," Add family member "),e.k0s()()}}function k(o,r){if(1&o){const i=e.RV6();e.j41(0,"div",2),e.bIt("click",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.onBackdropClick(n))}),e.j41(1,"div",3),e.bIt("click",function(n){return e.eBV(i),e.Njj(n.stopPropagation())}),e.j41(2,"div",4)(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"p",5),e.EFF(6),e.k0s()(),e.DNE(7,y,2,2,"div",6)(8,w,9,0,"div",7),e.j41(9,"div",8)(10,"ion-button",9),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.closeModal())}),e.EFF(11," Cancel "),e.k0s()()()()}if(2&o){const i=e.XpG();e.R7$(4),e.JRh((i.isFirstTimeSelectionRequired(),"Select family member")),e.R7$(2),e.JRh(i.isFirstTimeSelectionRequired()?"Please select a family member to continue using the app":"Choose who you'd like to view information for"),e.R7$(),e.Y8G("ngIf",i.familyMembers.length>0),e.R7$(),e.Y8G("ngIf",0===i.familyMembers.length),e.R7$(2),e.Y8G("disabled",!!i.selectedMemberId||i.isFirstTimeSelectionRequired())}}let F=(()=>{var o;class r{constructor(t,n){this.globalFamilyMemberService=t,this.utilityService=n,this.isOpen=!1,this.familyMembers=[],this.selectedMemberId=null,this.subscriptions=new v.yU,this.trackByMemberId=(a,c)=>c?this.getMemberId(c):a.toString()}ngOnInit(){this.subscriptions.add(this.globalFamilyMemberService.isSelectionRequired$.subscribe(t=>{t&&this.openModal()})),this.subscriptions.add(this.globalFamilyMemberService.familyMembers$.subscribe(t=>{this.familyMembers=t||[]}))}ngOnDestroy(){this.subscriptions.unsubscribe()}openModal(){this.isOpen=!0;try{this.familyMembers=this.globalFamilyMemberService.getFamilyMembers(),0===this.familyMembers.length&&setTimeout(()=>{this.familyMembers=this.globalFamilyMemberService.getFamilyMembers()},200)}catch(t){console.error("Error loading family members:",t),this.familyMembers=[]}}closeModal(){this.isOpen=!1}selectMember(t){var n=this;return(0,p.A)(function*(){if(n.selectedMemberId)return;if(!t)return void console.error("Cannot select null or undefined member");const a=n.getMemberId(t);n.selectedMemberId=a,setTimeout(()=>{try{n.globalFamilyMemberService.selectFamilyMember(t);try{n.globalFamilyMemberService.requiresFirstTimeSelection()&&n.globalFamilyMemberService.setFirstTimeSelectionComplete()}catch(c){console.error("Error checking/setting first-time selection:",c)}n.utilityService.presentToast(`${t.fullName} selected as active family member`,2e3),n.closeModal(),n.resetSelectionState()}catch(c){console.error("Error selecting family member:",c),n.resetSelectionState(),n.utilityService.presentToast("Failed to select family member",2e3)}},300)})()}resetSelectionState(){this.selectedMemberId=null}hasPhoto(t){return!!t&&!!(t.profilePicture||null!=t&&t.photo)}getPhoto(t){return this.hasPhoto(t)?t.profilePicture||t.photo:""}getInitials(t){return this.globalFamilyMemberService.getInitials(t)}onBackdropClick(t){try{this.globalFamilyMemberService.requiresFirstTimeSelection()||this.closeModal()}catch(n){console.error("Error in backdrop click handler:",n),this.closeModal()}}getMemberId(t){return t&&(t._id||t.familyMemberId||t.id)||"unknown"}isFirstTimeSelectionRequired(){try{return this.globalFamilyMemberService.requiresFirstTimeSelection()}catch(t){return console.error("Error checking first-time selection requirement:",t),!1}}}return(o=r).\u0275fac=function(t){return new(t||o)(e.rXU(h.b),e.rXU(f.Q))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-family-member-selector"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["initialsTemplate",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"subtitle"],["class","members-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"modal-footer"],["fill","outline",3,"click","disabled"],[1,"members-container"],["class","member-card",3,"disabled","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"member-card",3,"click"],["class","member-avatar",4,"ngIf"],["class","member-info",4,"ngIf"],[1,"card-overlay"],[1,"member-avatar"],[1,"avatar-circle"],[4,"ngIf","ngIfElse"],[1,"selection-ring"],["name","checkmark-outline",1,"check-icon"],[1,"avatar-img",3,"src","alt"],[1,"initials"],[1,"member-info"],[1,"member-name"],[1,"member-relationship"],[1,"empty-state"],["name","people-outline",1,"empty-icon"],["fill","outline","size","small",3,"click"],["name","add-outline","slot","start"]],template:function(t,n){1&t&&e.DNE(0,k,12,5,"div",1),2&t&&e.Y8G("ngIf",n.isOpen)},dependencies:[s.bv,s.Jm,s.iq,m.MD,m.Sq,m.bT],styles:["[_nghost-%COMP%]{--modal-border-radius: var(--mc-radius-lg);--avatar-size: 60px;--card-padding: var(--mc-spacing-md);--selection-color: var(--mc-color-primary-500);--background-blur: var(--mc-bg-inverse)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:var(--app-height, 100vh);background:var(--mc-overlay-bg);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:10000;padding:var(--mc-spacing-lg)}@media (max-width: 480px){.modal-overlay[_ngcontent-%COMP%]{padding:var(--mc-spacing-md)}}@media (max-width: 420px){.modal-overlay[_ngcontent-%COMP%]{padding:calc(var(--mc-spacing-md) * .8)}}@media (max-width: 380px){.modal-overlay[_ngcontent-%COMP%]{padding:calc(var(--mc-spacing-md) * .6)}}@media (max-width: 340px){.modal-overlay[_ngcontent-%COMP%]{padding:calc(var(--mc-spacing-sm) * .8)}}@media (max-width: 300px){.modal-overlay[_ngcontent-%COMP%]{padding:var(--mc-spacing-xs)}}.ios[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{padding-top:calc(var(--mc-spacing-lg) + var(--safe-area-top));padding-bottom:calc(var(--mc-spacing-lg) + var(--safe-area-bottom))}@media (max-width: 480px){.ios[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{padding-top:calc(var(--mc-spacing-md) + var(--safe-area-top));padding-bottom:calc(var(--mc-spacing-md) + var(--safe-area-bottom))}}@media (max-width: 360px){.ios[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{padding-top:calc(var(--mc-spacing-sm) + var(--safe-area-top));padding-bottom:calc(var(--mc-spacing-sm) + var(--safe-area-bottom))}}@media (max-width: 320px){.ios[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{padding-top:calc(var(--mc-spacing-xs) + var(--safe-area-top));padding-bottom:calc(var(--mc-spacing-xs) + var(--safe-area-bottom))}}.modal-content[_ngcontent-%COMP%]{width:480px;max-width:90vw;max-height:70vh;background:var(--mc-bg-primary);border-radius:var(--modal-border-radius);overflow:hidden;overflow-x:hidden;display:flex;flex-direction:column;box-shadow:var(--mc-shadow-xl);border:1px solid var(--mc-border-primary)}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{width:90vw;max-height:75vh}}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{width:92vw;max-height:78vh}}@media (max-width: 480px){.modal-content[_ngcontent-%COMP%]{width:95vw;max-height:80vh}}@media (max-width: 420px){.modal-content[_ngcontent-%COMP%]{width:96vw;max-height:82vh;border-radius:calc(var(--modal-border-radius) * .9)}}@media (max-width: 380px){.modal-content[_ngcontent-%COMP%]{width:97vw;max-height:83vh;border-radius:calc(var(--modal-border-radius) * .8)}}@media (max-width: 340px){.modal-content[_ngcontent-%COMP%]{width:98vw;max-height:85vh;border-radius:var(--mc-radius-md)}}@media (max-width: 300px){.modal-content[_ngcontent-%COMP%]{width:99vw;max-height:90vh;border-radius:calc(var(--mc-radius-md) * .8)}}.modal-header[_ngcontent-%COMP%]{padding:var(--mc-spacing-xl) var(--mc-spacing-xl) var(--mc-spacing-md);text-align:center;background:var(--mc-bg-primary)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--mc-spacing-xs) 0;font-size:var(--mc-font-heading-lg);font-weight:var(--mc-font-weight-semibold);color:var(--mc-text-primary);letter-spacing:-.3px}.modal-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:var(--mc-font-body-md);color:var(--mc-text-secondary);font-weight:var(--mc-font-weight-regular)}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]{padding:var(--mc-spacing-lg) var(--mc-spacing-lg) var(--mc-spacing-sm)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--mc-font-heading-md)}.modal-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:var(--mc-font-body-sm)}}.members-container[_ngcontent-%COMP%]{flex:1;padding:20px 24px;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;overflow-y:auto;overflow-x:hidden;max-height:400px}@media (max-width: 480px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:16px 20px;gap:12px}}@media (max-width: 420px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:14px 18px;gap:11px;max-height:380px}}@media (max-width: 380px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:12px 16px;gap:10px;max-height:360px}}@media (max-width: 340px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:10px 12px;gap:8px;max-height:350px}}@media (max-width: 300px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:8px 10px;gap:6px;max-height:320px}}@media (max-width: 280px){.members-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:6px 8px;gap:4px;max-height:300px}}.member-card[_ngcontent-%COMP%]{position:relative;background:var(--mc-card-bg);border-radius:var(--mc-card-radius);padding:var(--card-padding);cursor:pointer;transition:all var(--mc-transition-base);border:1px solid var(--mc-card-border);display:flex;flex-direction:column;align-items:center;text-align:center;min-height:100px;box-shadow:var(--mc-card-shadow);width:100%;max-width:100%;overflow:hidden}@media (max-width: 360px){.member-card[_ngcontent-%COMP%]{min-height:90px;padding:var(--mc-spacing-sm)}}@media (max-width: 340px){.member-card[_ngcontent-%COMP%]{min-height:85px;padding:calc(var(--mc-spacing-sm) * .8)}}@media (max-width: 300px){.member-card[_ngcontent-%COMP%]{min-height:80px;padding:calc(var(--mc-spacing-xs) * 1.2)}}@media (max-width: 280px){.member-card[_ngcontent-%COMP%]{min-height:75px;padding:var(--mc-spacing-xs)}}.member-card[_ngcontent-%COMP%]:nth-child(4n+1)   .avatar-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.member-card[_ngcontent-%COMP%]:nth-child(4n+2)   .avatar-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.member-card[_ngcontent-%COMP%]:nth-child(4n+3)   .avatar-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.member-card[_ngcontent-%COMP%]:nth-child(4n+4)   .avatar-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.member-card[_ngcontent-%COMP%]:hover:not(.disabled){background:var(--mc-card-bg-hover);border-color:var(--mc-border-hover);box-shadow:var(--mc-card-shadow-hover)}.member-card.selected[_ngcontent-%COMP%]{background:var(--mc-card-bg-selected);border-color:var(--selection-color);box-shadow:var(--mc-card-shadow-selected)}.member-card.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;filter:grayscale(.5)}.card-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#3b82f61a,#8b5cf61a);border-radius:16px;opacity:0;transition:opacity .2s ease;pointer-events:none}.member-avatar[_ngcontent-%COMP%]{position:relative;margin-bottom:8px}.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:var(--avatar-size);height:var(--avatar-size);border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.6);box-shadow:var(--shadow-sm);display:flex;align-items:center;justify-content:center}@media (max-width: 480px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:50px;height:50px}}@media (max-width: 420px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:47px;height:47px}}@media (max-width: 380px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:44px;height:44px;border-width:1.5px}}@media (max-width: 340px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:40px;height:40px;border-width:1px}}@media (max-width: 300px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:36px;height:36px}}@media (max-width: 280px){.member-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:32px;height:32px}}.member-avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.member-avatar[_ngcontent-%COMP%]   .initials[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff;letter-spacing:.3px;text-transform:uppercase}@media (max-width: 480px){.member-avatar[_ngcontent-%COMP%]   .initials[_ngcontent-%COMP%]{font-size:16px}}.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]{position:absolute;top:-4px;left:-4px;right:-4px;bottom:-4px;border:3px solid var(--selection-color);border-radius:50%;opacity:0;transform:scale(.8);transition:all .3s cubic-bezier(.25,.46,.45,.94);display:flex;align-items:center;justify-content:center}@media (max-width: 480px){.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]{border-width:2px;top:-3px;left:-3px;right:-3px;bottom:-3px}}@media (max-width: 360px){.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]{border-width:2px;top:-2px;left:-2px;right:-2px;bottom:-2px}}.member-avatar[_ngcontent-%COMP%]   .selection-ring.visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{position:absolute;bottom:-2px;right:-2px;background:var(--selection-color);color:#fff;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-size:16px;box-shadow:0 2px 8px #3b82f666}@media (max-width: 480px){.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:14px;bottom:-1px;right:-1px}}@media (max-width: 360px){.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:12px;bottom:-1px;right:-1px}}@media (max-width: 320px){.member-avatar[_ngcontent-%COMP%]   .selection-ring[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:10px}}.member-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;width:100%;max-width:100%;overflow:hidden}.member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{margin:0 0 2px;font-size:var(--mc-font-body-sm);font-weight:var(--mc-font-weight-semibold);color:var(--mc-text-primary);line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;word-wrap:break-word;word-break:break-word}@media (max-width: 480px){.member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:var(--mc-font-body-xs);-webkit-line-clamp:2}}.member-info[_ngcontent-%COMP%]   .member-relationship[_ngcontent-%COMP%]{margin:0;font-size:var(--mc-font-body-xs);color:var(--mc-text-secondary);font-weight:var(--mc-font-weight-regular);text-transform:capitalize;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#64748b}.loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px;--color: var(--selection-color)}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:var(--font-body-md);font-weight:500}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:var(--mc-text-tertiary)}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:var(--mc-icon-size-3xl);margin-bottom:var(--mc-spacing-md);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--mc-spacing-xs) 0;font-size:var(--mc-font-heading-md);font-weight:var(--mc-font-weight-semibold);color:var(--mc-text-primary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--mc-spacing-lg) 0;font-size:var(--mc-font-body-sm);opacity:.8}.modal-footer[_ngcontent-%COMP%]{padding:var(--mc-spacing-md) var(--mc-spacing-xl) var(--mc-spacing-lg);display:flex;justify-content:center;border-top:1px solid var(--mc-border-primary);background:var(--mc-bg-primary)}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]{padding:var(--mc-spacing-sm) var(--mc-spacing-lg) var(--mc-spacing-md)}}@media (max-width: 360px){.modal-footer[_ngcontent-%COMP%]{padding:var(--mc-spacing-xs) var(--mc-spacing-md) var(--mc-spacing-sm)}}@media (max-width: 320px){.modal-footer[_ngcontent-%COMP%]{padding:var(--mc-spacing-xs) var(--mc-spacing-sm) var(--mc-spacing-xs)}}.modal-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: var(--mc-radius-sm);--height: var(--mc-button-height-sm);--padding-start: var(--mc-spacing-lg);--padding-end: var(--mc-spacing-lg);font-weight:var(--mc-font-weight-medium);text-transform:none;font-size:var(--mc-font-body-sm);--color: var(--mc-text-primary);--background: transparent;--border-width: 1px;--border-style: solid;--border-color: var(--mc-border-primary)}@media (max-width: 480px){.modal-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--height: 36px;--padding-start: var(--mc-spacing-md);--padding-end: var(--mc-spacing-md);font-size:var(--mc-font-body-xs)}}.modal-footer[_ngcontent-%COMP%]   ion-button[disabled][_ngcontent-%COMP%]{opacity:.4}.modal-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover:not([disabled]){--background: var(--mc-bg-secondary);--border-color: var(--mc-border-hover)}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]{padding:24px 20px 16px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--font-heading-md)}.member-card[_ngcontent-%COMP%]{min-height:120px;padding:16px}[_nghost-%COMP%]{--avatar-size: 60px}}[data-theme=dark][_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{background:var(--mc-overlay-bg-dark)}[data-theme=dark][_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:var(--mc-bg-primary);border-color:var(--mc-border-primary)}[data-theme=dark][_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:var(--mc-bg-primary)}[data-theme=dark][_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--mc-text-primary)}[data-theme=dark][_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--mc-text-secondary)}[data-theme=dark][_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{background:var(--mc-card-bg);border-color:var(--mc-card-border)}[data-theme=dark][_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover:not(.disabled){background:var(--mc-card-bg-hover);border-color:var(--mc-border-hover)}[data-theme=dark][_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%]{background:var(--mc-card-bg-selected);border-color:var(--selection-color)}[data-theme=dark][_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{color:var(--mc-text-primary)}[data-theme=dark][_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-relationship[_ngcontent-%COMP%]{color:var(--mc-text-secondary)}[data-theme=dark][_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{background:var(--mc-bg-primary);border-color:var(--mc-border-primary)}[data-theme=dark][_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--mc-text-primary)}[data-theme=dark][_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--mc-text-secondary)}[data-contrast=high][_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%], [data-contrast=high][_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{border-width:2px}[data-contrast=high][_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover:not(.disabled){border-width:3px}[data-contrast=high][_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%]{border-width:3px}[data-contrast=high][_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-width:2px}[data-contrast=high][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{border:2px solid currentColor}"],data:{animation:[]}}),r})();var u=l(5964),x=l(8251),S=l(3629),I=l(8023),T=l(7031),j=l(8831),z=l(3453);function R(o,r){if(1&o){const i=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goBack())}),e.nrm(1,"ion-icon",16),e.k0s()}}function N(o,r){1&o&&(e.j41(0,"div",17)(1,"div",18),e.nrm(2,"div",19),e.k0s(),e.j41(3,"span",20),e.nrm(4,"div",19),e.k0s()())}function E(o,r){if(1&o&&(e.qex(0),e.nrm(1,"img",27),e.bVm()),2&o){const i=e.XpG(2);e.R7$(),e.Y8G("src",i.getFamilyMemberPhoto(i.selectedFamilyMember),e.B4B)("alt",(i.selectedFamilyMember.fullName||"Family member")+" avatar")}}function $(o,r){if(1&o&&(e.j41(0,"span",28),e.EFF(1),e.k0s()),2&o){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.getInitials(i.selectedFamilyMember.fullName)," ")}}function G(o,r){if(1&o){const i=e.RV6();e.j41(0,"div",21),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onFamilyMemberChipClick())}),e.j41(1,"div",22)(2,"div",23),e.DNE(3,E,2,2,"ng-container",24)(4,$,2,1,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"span",25),e.EFF(7),e.k0s(),e.nrm(8,"ion-icon",26),e.k0s()}if(2&o){const i=e.sdS(5),t=e.XpG();e.BMQ("aria-label","Selected member: "+t.selectedFamilyMember.fullName+". Click to change."),e.R7$(3),e.Y8G("ngIf",t.hasPhoto(t.selectedFamilyMember))("ngIfElse",i),e.R7$(4),e.JRh(t.selectedFamilyMember.fullName)}}function X(o,r){if(1&o){const i=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.openFamilyMemberSelector())}),e.nrm(1,"ion-icon",30),e.j41(2,"span"),e.EFF(3,"Select Member"),e.k0s()()}}function H(o,r){if(1&o&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI(" ",i.reminderCount>99?"99+":i.reminderCount," ")}}let U=(()=>{var o;class r{constructor(t,n,a,c,d,W,Q,q,Z,K){this.navService=t,this.storageService=n,this.httpService=a,this.dateService=c,this.utilityService=d,this.router=W,this.location=Q,this.globalFamilyMemberService=q,this.chatService=Z,this.chatContextService=K,this.reminder=[],this.reminders=[],this.isHomePage=!0,this.shouldShowFamilySelector=!0,this.selectedFamilyMember=null,this.subscriptions=new v.yU,this.SELECTOR_HIDDEN_ROUTES=["/appointment-details","/appointment-modification","/appointment-reschedule","/confirm-appointment","/appointment-confirmed","/bill-details","/prescription-visit-detail","/visit-details","/emr","/emr-visit-summary","/profile-overview","/profile-edition","/facility-information","/edit-facility-information","/consent-form","/select-patient","/rename-attachment","/confirmation-popup","/add-request-popup","/medical-attachments","/family-member-form","/family-member-list","/sign-in","/sign-up","/sign-up-confirmation","/token-verification","/audit-trail","/user-information","/hospital-list","/modify-hospital","/facility-information-template","/sidebar","/home-template"],this.SELECTOR_SHOWN_ROUTES=["/home","/appointment-list","/appointment-booking","/prescription","/bills","/visits","/attachment-list","/family-member-attachment-list","/report-attachment-list","/service-requests","/new-service-request","/reminder","/hospital-preference"],this.user=this.storageService.get("user"),this.firstName=this.user.firstName,this.profilePicture=this.user.profilePicture,this.getReminders(),this.checkCurrentRoute()}hasPhoto(t){return!!t&&!!(t.profilePicture||null!=t&&t.photo)}getFamilyMemberPhoto(t){return this.hasPhoto(t)?t.profilePicture||t.photo:""}getInitials(t){return t?this.globalFamilyMemberService.getInitials(t):"?"}getReminders(){var t=this;return(0,p.A)(function*(){const n="/reminder/?userId="+t.user.id;yield t.httpService.get(n).then(a=>{if(a){t.reminder=[];for(let c=0;c<a.length;c++)a[c].reminderDetails.appointmentTime=t.dateService.to12HourFormat(a[c].reminderDetails.appointmentTime),t.reminder.push(a[c]);t.reminders=t.reminder.sort((c,d)=>new Date(c.remindAt).getDate()-new Date(d.remindAt).getDate()),t.reminderCount=t.reminders.length}}).catch(a=>{t.utilityService.presentAlert("Error!",a.message)})})()}ngOnInit(){this.subscriptions.add(this.globalFamilyMemberService.selectedFamilyMember$.subscribe(t=>{this.selectedFamilyMember=t,this.storageService.get("user")&&(this.reminder=[],this.reminders=[],this.getReminders())}))}ngOnDestroy(){this.subscriptions.unsubscribe()}checkCurrentRoute(){this.updatePageState(this.router.url),this.subscriptions.add(this.router.events.pipe((0,u.p)(t=>t instanceof g.wF)).subscribe(t=>{t instanceof g.wF&&this.updatePageState(t.url)}))}updatePageState(t){this.isHomePage="/home"===t||"/home/"===t||t.endsWith("/home"),this.shouldShowFamilySelector=this.shouldShowSelectorForRoute(t)}shouldShowSelectorForRoute(t){const n=t.split("?")[0].replace(/\/$/,"");return!this.SELECTOR_HIDDEN_ROUTES.some(d=>n.includes(d))&&(this.SELECTOR_SHOWN_ROUTES.some(d=>n.includes(d)),!0)}goBack(){this.location.back()}openFamilyMemberSelector(){this.globalFamilyMemberService.requireSelection()}onFamilyMemberChipClick(){this.openFamilyMemberSelector()}getMemberId(t){return this.globalFamilyMemberService.getMemberId(t)}getDisplayName(){var t,n;return this.selectedFamilyMember?(null===(n=this.selectedFamilyMember.fullName)||void 0===n?void 0:n.split(" ")[0])||this.selectedFamilyMember.fullName||"Family Member":(null===(t=this.user)||void 0===t?void 0:t.firstName)||"User"}onAIChatClick(){var t=this;return(0,p.A)(function*(){if(t.globalFamilyMemberService.getSelectedMember())t.router.navigate(["/patient-assessment"]);else{t.globalFamilyMemberService.requireSelection();const a=t.globalFamilyMemberService.selectedFamilyMember$.subscribe(c=>{c&&(a.unsubscribe(),t.router.navigate(["/patient-assessment"]))})}})()}}return(o=r).\u0275fac=function(t){return new(t||o)(e.rXU(x.o),e.rXU(S.n),e.rXU(I.k),e.rXU(T.k),e.rXU(f.Q),e.rXU(g.Ix),e.rXU(m.aZ),e.rXU(h.b),e.rXU(j.m),e.rXU(z.t))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-header-profile"]],standalone:!0,features:[e.aNF],decls:18,vars:12,consts:[["initials",""],[1,"enterprise-header-wrapper",3,"translucent"],[1,"enterprise-header"],["slot","start",1,"header-left"],["class","back-button","aria-label","Go back",3,"click",4,"ngIf"],["class","member-selector-pill loading-skeleton",4,"ngIf"],["class","member-selector-pill","role","button","tabindex","0",3,"click",4,"ngIf"],["class","select-member-button","aria-label","Select family member",3,"click",4,"ngIf"],["slot","secondary",1,"header-center"],["slot","end",1,"header-right"],["routerLink","/home/reminder","aria-label","View notifications",1,"notification-button"],["name","notifications-outline",1,"notification-icon"],["class","notification-badge",4,"ngIf"],["aria-label","Open AI Chat",1,"ai-chat-button",3,"click"],["name","chatbubble-ellipses-outline",1,"ai-chat-icon"],["aria-label","Go back",1,"back-button",3,"click"],["name","arrow-back",1,"back-icon"],[1,"member-selector-pill","loading-skeleton"],[1,"pill-avatar","skeleton-avatar"],[1,"skeleton-shimmer"],[1,"member-name","skeleton-text"],["role","button","tabindex","0",1,"member-selector-pill",3,"click"],[1,"pill-avatar"],[1,"avatar-image"],[4,"ngIf","ngIfElse"],[1,"member-name"],["name","chevron-down",1,"dropdown-chevron"],[1,"avatar-img",3,"src","alt"],[1,"avatar-initials"],["aria-label","Select family member",1,"select-member-button",3,"click"],["name","people-outline",1,"select-icon"],[1,"notification-badge"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"div",3),e.DNE(3,R,2,0,"button",4)(4,N,5,0,"div",5),e.nI1(5,"async"),e.DNE(6,G,9,4,"div",6),e.nI1(7,"async"),e.DNE(8,X,4,0,"button",7),e.nI1(9,"async"),e.k0s(),e.nrm(10,"div",8),e.j41(11,"div",9)(12,"button",10),e.nrm(13,"ion-icon",11),e.DNE(14,H,2,1,"div",12),e.k0s(),e.j41(15,"button",13),e.bIt("click",function(){return n.onAIChatClick()}),e.nrm(16,"ion-icon",14),e.k0s()()()(),e.nrm(17,"app-family-member-selector")),2&t&&(e.Y8G("translucent",!1),e.R7$(3),e.Y8G("ngIf",!n.isHomePage),e.R7$(),e.Y8G("ngIf",e.bMT(5,6,n.globalFamilyMemberService.isLoading$)&&n.shouldShowFamilySelector),e.R7$(2),e.Y8G("ngIf",n.selectedFamilyMember&&n.shouldShowFamilySelector&&!e.bMT(7,8,n.globalFamilyMemberService.isLoading$)),e.R7$(2),e.Y8G("ngIf",!n.selectedFamilyMember&&n.shouldShowFamilySelector&&!e.bMT(9,10,n.globalFamilyMemberService.isLoading$)),e.R7$(6),e.Y8G("ngIf",n.reminderCount>0))},dependencies:[s.bv,s.eU,s.iq,s.ai,s.N7,g.Wk,m.MD,m.bT,m.Jj,F],styles:['[_nghost-%COMP%]{display:block;--header-height: 64px;--header-padding: var(--spacing-4);--pill-height: 44px;--avatar-size: 36px;--icon-size: 40px;--transition: all .2s ease;position:fixed;top:0;left:0;right:0;z-index:var(--z-index-fixed, 1000);--total-header-height: calc(var(--header-height) + env(safe-area-inset-top))}.enterprise-header-wrapper[_ngcontent-%COMP%]{--background: var(--color-white);--border-color: var(--color-gray-200);--border-width: 0 0 1px 0;--border-style: solid;--min-height: var(--total-header-height);background:var(--background);border:var(--border-width) var(--border-style) var(--border-color)}.enterprise-header-wrapper[_ngcontent-%COMP%]:after{display:none}.enterprise-header[_ngcontent-%COMP%]{--background: transparent;--border-width: 0;--padding-start: calc(var(--header-padding) + env(safe-area-inset-left));--padding-end: calc(var(--header-padding) + env(safe-area-inset-right));--padding-top: calc(var(--spacing-2) + env(safe-area-inset-top));--padding-bottom: var(--spacing-2);--min-height: var(--header-height);display:flex;align-items:center;justify-content:space-between}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-3)}.header-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.back-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:var(--icon-size);height:var(--icon-size);border:none;background:transparent;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition);color:var(--color-gray-600)}.back-button[_ngcontent-%COMP%]:hover{background:var(--color-gray-100);color:var(--color-gray-800)}.back-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.back-button[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:20px}.member-selector-pill[_ngcontent-%COMP%]{display:flex;align-items:center;height:var(--pill-height);padding:var(--spacing-2) var(--spacing-3) var(--spacing-2) var(--spacing-2);background:var(--color-gray-100);border-radius:var(--radius-2xl);cursor:pointer;transition:var(--transition);border:1px solid transparent;gap:var(--spacing-3)}.member-selector-pill[_ngcontent-%COMP%]:hover{background:var(--color-gray-200);border-color:var(--color-gray-300);transform:translateY(-1px);box-shadow:var(--shadow-sm)}.member-selector-pill[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.member-selector-pill[_ngcontent-%COMP%]   .pill-avatar[_ngcontent-%COMP%]{flex-shrink:0}.member-selector-pill[_ngcontent-%COMP%]   .pill-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:var(--avatar-size);height:var(--avatar-size);border-radius:50%;overflow:hidden;border:2px solid var(--color-white);box-shadow:var(--shadow-sm);background:linear-gradient(135deg,var(--color-primary-400) 0%,var(--color-primary-600) 100%);display:flex;align-items:center;justify-content:center}.member-selector-pill[_ngcontent-%COMP%]   .pill-avatar[_ngcontent-%COMP%]   .avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.member-selector-pill[_ngcontent-%COMP%]   .pill-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:var(--font-body-sm);font-weight:600;color:var(--color-white);text-transform:uppercase;letter-spacing:.5px}.member-selector-pill[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--color-gray-800);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}.member-selector-pill[_ngcontent-%COMP%]   .dropdown-chevron[_ngcontent-%COMP%]{font-size:16px;color:var(--color-gray-500);transition:var(--transition)}.member-selector-pill[_ngcontent-%COMP%]:hover   .dropdown-chevron[_ngcontent-%COMP%]{color:var(--color-primary-500);transform:translateY(1px)}.member-selector-pill.loading-skeleton[_ngcontent-%COMP%]{cursor:default;pointer-events:none;background:var(--color-gray-100);border-color:var(--color-gray-200)}.member-selector-pill.loading-skeleton[_ngcontent-%COMP%]   .skeleton-avatar[_ngcontent-%COMP%]{width:var(--avatar-size);height:var(--avatar-size);border-radius:50%;background:var(--color-gray-200);position:relative;overflow:hidden}.member-selector-pill.loading-skeleton[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{width:80px;height:16px;background:var(--color-gray-200);border-radius:4px;position:relative;overflow:hidden}.member-selector-pill.loading-skeleton[_ngcontent-%COMP%]   .skeleton-shimmer[_ngcontent-%COMP%]{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.6) 50%,transparent 100%);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.select-member-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;height:var(--pill-height);padding:0 16px;background:#00258214;border:1px solid rgba(0,37,130,.2);border-radius:20px;color:var(--color-primary-600);font-size:var(--font-body-sm);font-weight:600;cursor:pointer;transition:var(--transition)}.select-member-button[_ngcontent-%COMP%]:hover{background:#0025821f;transform:translateY(-1px);box-shadow:0 4px 12px #00258233}.select-member-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.select-member-button[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{font-size:18px}.notification-button[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:var(--icon-size);height:var(--icon-size);border:none;background:transparent;border-radius:50%;cursor:pointer;transition:var(--transition);color:var(--color-gray-600)}.notification-button[_ngcontent-%COMP%]:hover{background:var(--color-gray-100);color:var(--color-gray-800)}.notification-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.notification-button[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{font-size:22px}.notification-button[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;min-width:18px;height:18px;background:var(--color-error);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:var(--font-body-xs);font-weight:600;border:2px solid var(--color-white);box-shadow:var(--shadow-sm)}.ai-chat-button[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:var(--icon-size);height:var(--icon-size);border:none;background:transparent;border-radius:50%;cursor:pointer;transition:var(--transition);color:var(--ion-color-primary, #002582)}.ai-chat-button[_ngcontent-%COMP%]:hover{background:#00258214;color:var(--ion-color-primary-shade, #001d68);transform:scale(1.05)}.ai-chat-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.ai-chat-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.ai-chat-button[_ngcontent-%COMP%]   .ai-chat-icon[_ngcontent-%COMP%]{font-size:22px}.ai-chat-button[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;border-radius:50%;background:var(--ion-color-primary, #002582);opacity:0;animation:_ngcontent-%COMP%_ai-pulse 3s infinite ease-in-out}@keyframes _ngcontent-%COMP%_ai-pulse{0%{transform:scale(.8);opacity:.6}50%{transform:scale(1.3);opacity:0}to{transform:scale(.8);opacity:0}}.profile-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:var(--icon-size);height:var(--icon-size);border:none;background:transparent;border-radius:50%;cursor:pointer;transition:var(--transition);padding:0}.profile-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}.profile-button[_ngcontent-%COMP%]:hover   .profile-avatar[_ngcontent-%COMP%]{border-color:var(--color-primary-500)}.profile-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-primary-500);outline-offset:2px}.profile-button[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:var(--avatar-size);height:var(--avatar-size);border-radius:50%;border:2px solid var(--color-gray-200);overflow:hidden;transition:var(--transition)}.profile-button[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}@media (max-width: 768px){[_nghost-%COMP%]{--header-height: 56px;--header-padding: 12px;--pill-height: 40px;--avatar-size: 32px;--icon-size: 36px;--total-header-height: calc(var(--header-height) + env(safe-area-inset-top))}.enterprise-header-wrapper[_ngcontent-%COMP%]{--min-height: var(--total-header-height)}.enterprise-header[_ngcontent-%COMP%]{margin:0;border-radius:0}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{gap:8px}.member-selector-pill[_ngcontent-%COMP%]{padding:4px 8px 4px 4px;gap:6px}.member-selector-pill[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{max-width:80px;font-size:14px}.member-selector-pill[_ngcontent-%COMP%]   .dropdown-chevron[_ngcontent-%COMP%]{font-size:14px}.select-member-button[_ngcontent-%COMP%]{padding:0 12px;font-size:var(--font-body-xs)}.select-member-button[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{font-size:16px}.notification-button[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%], .ai-chat-button[_ngcontent-%COMP%]   .ai-chat-icon[_ngcontent-%COMP%]{font-size:20px}.notification-badge[_ngcontent-%COMP%]{min-width:16px;height:16px;font-size:10px}}@media (max-width: 576px){[_nghost-%COMP%]{--header-height: 50px;--header-padding: 8px;--pill-height: 36px;--avatar-size: 28px;--icon-size: 32px;--total-header-height: calc(var(--header-height) + env(safe-area-inset-top))}.enterprise-header-wrapper[_ngcontent-%COMP%]{--min-height: var(--total-header-height)}.enterprise-header[_ngcontent-%COMP%]{margin:0;border-radius:0}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{gap:6px}.member-selector-pill[_ngcontent-%COMP%]{padding:3px 6px 3px 3px;gap:4px}.member-selector-pill[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{max-width:350px;font-size:14px}.member-selector-pill[_ngcontent-%COMP%]   .dropdown-chevron[_ngcontent-%COMP%]{font-size:12px}.select-member-button[_ngcontent-%COMP%]{padding:0 8px}.select-member-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--font-body-xs)}}.member-selector-pill[_ngcontent-%COMP%]:focus-visible, .select-member-button[_ngcontent-%COMP%]:focus-visible, .back-button[_ngcontent-%COMP%]:focus-visible, .notification-button[_ngcontent-%COMP%]:focus-visible, .ai-chat-button[_ngcontent-%COMP%]:focus-visible, .profile-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-primary-500);outline-offset:2px}.enterprise-header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition:var(--transition)}@media (prefers-contrast: high){.enterprise-header[_ngcontent-%COMP%], .member-selector-pill[_ngcontent-%COMP%], .select-member-button[_ngcontent-%COMP%]{border-width:2px;border-color:var(--color-text-primary)}.notification-badge[_ngcontent-%COMP%]{border-width:3px}}'],data:{animation:[]}}),r})();var D=l(1413),B=l(6977);function V(o,r){if(1&o&&(e.j41(0,"ion-badge",8),e.EFF(1),e.k0s()),2&o){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.badge," ")}}function Y(o,r){if(1&o){const i=e.RV6();e.j41(0,"div",3),e.bIt("click",function(){const n=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.onTabClick(n))}),e.j41(1,"div",4),e.nrm(2,"ion-icon",5),e.DNE(3,V,2,1,"ion-badge",6),e.k0s(),e.j41(4,"span",7),e.EFF(5),e.k0s()()}if(2&o){const i=r.$implicit,t=e.XpG();e.AVh("active",t.isActive(i.id)),e.R7$(2),e.Y8G("name",i.icon),e.R7$(),e.Y8G("ngIf",i.badge&&i.badge>0),e.R7$(2),e.JRh(i.label)}}let A=(()=>{var o;class r{constructor(t,n){this.router=t,this.globalFamilyMemberService=n,this.destroy$=new D.B,this.isNavigating=!1,this.activeTab="home",this.tabs=[{id:"home",label:"Home",icon:"home-outline",route:"/home"},{id:"family",label:"Family",icon:"people-outline",route:"/home/profiles"},{id:"records",label:"Records",icon:"folder-open-outline",route:"/home/family-member-list"},{id:"profile",label:"Profile",icon:"person-outline",route:"/home/profile"}]}ngOnInit(){this.router.events.pipe((0,u.p)(t=>t instanceof g.wF),(0,B.Q)(this.destroy$)).subscribe(t=>{this.updateActiveTab(t.url)}),this.updateActiveTab(this.router.url)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateActiveTab(t){"/home"===t||"/home/"===t?this.activeTab="home":t.includes("/home/profiles")?this.activeTab="family":t.includes("/medical-record")||t.includes("/family-member-list")?this.activeTab="records":t.includes("/home/profile")&&(this.activeTab="profile")}onTabClick(t){var n=this;return(0,p.A)(function*(){if(!n.isNavigating&&(n.activeTab!==t.id||n.router.url!==t.route)){n.isNavigating=!0;try{"records"===t.id?yield n.goToMedicalRecords():yield n.router.navigate([t.route]),n.activeTab=t.id}catch(a){console.error("Navigation error:",a)}finally{n.isNavigating=!1}}})()}goToMedicalRecords(){var t=this;return(0,p.A)(function*(){const n=t.globalFamilyMemberService.getSelectedMember();if(n){const a={state:{familyMember:n}};yield t.router.navigate(["/home/medical-record"],a)}else{t.globalFamilyMemberService.requireSelection();const a=t.globalFamilyMemberService.selectedFamilyMember$.subscribe(c=>{c&&(a.unsubscribe(),t.router.navigate(["/home/medical-record"],{state:{familyMember:c}}))})}})()}isActive(t){return this.activeTab===t}}return(o=r).\u0275fac=function(t){return new(t||o)(e.rXU(g.Ix),e.rXU(h.b))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-footer-navigation"]],standalone:!0,features:[e.aNF],decls:4,vars:1,consts:[[1,"footer-navigation"],[1,"tab-container"],["class","tab-item",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-item",3,"click"],[1,"tab-icon"],[3,"name"],["class","tab-badge",4,"ngIf"],[1,"tab-label"],[1,"tab-badge"]],template:function(t,n){1&t&&(e.j41(0,"ion-footer",0)(1,"ion-toolbar")(2,"div",1),e.DNE(3,Y,6,5,"div",2),e.k0s()()()),2&t&&(e.R7$(3),e.Y8G("ngForOf",n.tabs))},dependencies:[m.MD,m.Sq,m.bT,s.bv,s.In,s.M0,s.iq,s.ai],styles:['.footer-navigation[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:var(--z-index-fixed);border-top:1px solid var(--color-gray-200);background:var(--color-white);box-shadow:var(--shadow-sm);margin:0;border-radius:0}@media (orientation: landscape){.footer-navigation[_ngcontent-%COMP%]{left:env(safe-area-inset-left);right:env(safe-area-inset-right)}}.footer-navigation[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--color-white);--border-width: 0;--min-height: calc(60px + env(safe-area-inset-bottom)) ;--padding-start: 0;--padding-end: 0;padding-bottom:env(safe-area-inset-bottom)}@media (orientation: landscape) and (max-height: 500px){.footer-navigation[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: calc(48px + env(safe-area-inset-bottom)) }}.tab-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;min-height:60px;padding:0 16px}.tab-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-2) var(--spacing-3);cursor:pointer;transition:var(--transition);flex:1;position:relative;border-radius:var(--radius-md)}.tab-item[_ngcontent-%COMP%]:hover{background:var(--color-gray-100)}.tab-item.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--color-primary-500);transform:scale(1.1)}.tab-item.active[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{color:var(--color-primary-500);font-weight:600}.tab-item.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:6px;left:50%;transform:translate(-50%);width:30px;height:3px;background:var(--color-primary-500);border-radius:var(--radius-sm)}@media (orientation: landscape) and (max-height: 500px){.tab-item[_ngcontent-%COMP%]{padding:var(--spacing-1) var(--spacing-2)}.tab-item.active[_ngcontent-%COMP%]:after{bottom:2px;width:20px;height:2px}}.tab-icon[_ngcontent-%COMP%]{position:relative;margin-bottom:4px}.tab-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--color-gray-600);transition:var(--transition)}.tab-label[_ngcontent-%COMP%]{font-size:var(--font-body-xs);color:var(--color-gray-600);transition:var(--transition);text-align:center;line-height:1.2;font-weight:500}@media (orientation: landscape) and (max-height: 400px){.tab-label[_ngcontent-%COMP%]{display:none}}@media (orientation: landscape) and (max-height: 500px){.tab-label[_ngcontent-%COMP%]{font-size:.625rem;line-height:1}}.tab-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-8px;min-width:18px;height:18px;font-size:var(--font-body-xs);font-weight:600;line-height:18px;border-radius:50%;background:var(--color-red-500);color:#fff;display:flex;align-items:center;justify-content:center;border:2px solid var(--color-white);box-shadow:var(--shadow-sm)}ion-content[_ngcontent-%COMP%]{--padding-bottom: calc(70px + env(safe-area-inset-bottom)) }']}),r})();var L=l(600);let J=(()=>{var o;class r{constructor(t,n){this.platform=t,this.navService=n,this.devWidth=this.platform.width()}ngOnInit(){}}return(o=r).\u0275fac=function(t){return new(t||o)(e.rXU(L.OD),e.rXU(x.o))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-home-template"]],standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[[1,"main-container"],[3,"fullscreen"],["id","main-content"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.nrm(1,"app-header-profile"),e.j41(2,"ion-content",1),e.nrm(3,"ion-router-outlet",2),e.k0s()(),e.nrm(4,"app-footer-navigation")),2&t&&(e.R7$(2),e.Y8G("fullscreen",!0))},dependencies:[s.bv,s.W9,s.Rg,g.iI,U,A],styles:[".main-container[_ngcontent-%COMP%]{min-height:var(--app-height, 100vh);padding-bottom:85px}.ios[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{padding-bottom:calc(85px + var(--safe-area-bottom))}ion-router-outlet[_ngcontent-%COMP%]{margin-top:var(--total-header-height, calc(64px + env(safe-area-inset-top)) )}"]}),r})()}}]);